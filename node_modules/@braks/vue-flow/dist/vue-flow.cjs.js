"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var r=require("vue"),Bn;const wo=typeof window!="undefined",wi=e=>typeof e!="undefined",He=e=>typeof e=="function",xi=e=>typeof e=="string",Ht=()=>{};wo&&((Bn=window==null?void 0:window.navigator)==null?void 0:Bn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ce(e){return typeof e=="function"?e():r.unref(e)}function _i(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}const xo=e=>e();function bi(e=xo){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...a)=>{t.value&&e(...a)}}}function Rn(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function ki(e){return e}function ht(e,t){let n,o,i;const a=r.ref(!0),s=()=>{a.value=!0,i()};r.watch(e,s,{flush:"sync"});const l=He(t)?t:t.get,u=He(t)?void 0:t.set,c=r.customRef((f,m)=>(o=f,i=m,{get(){return a.value&&(n=l(),a.value=!1),o(),n},set(v){u==null||u(v)}}));return Object.isExtensible(c)&&(c.trigger=s),c}function F(){const e=[],t=i=>{const a=e.indexOf(i);a!==-1&&e.splice(a,1)};return{on:i=>(e.push(i),{off:()=>t(i)}),off:t,trigger:i=>{e.forEach(a=>a(i))}}}function Qe(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function _o(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function Kt(e,t=!1){function n(m,{flush:v="sync",deep:y=!1,timeout:d,throwOnTimeout:g}={}){let p=null;const O=[new Promise(E=>{p=r.watch(e,w=>{m(w)!==t&&(p==null||p(),E(w))},{flush:v,deep:y,immediate:!0})})];return d!=null&&O.push(Rn(d,g).then(()=>Ce(e)).finally(()=>p==null?void 0:p())),Promise.race(O)}function o(m,v){if(!r.isRef(m))return n(w=>w===m,v);const{flush:y="sync",deep:d=!1,timeout:g,throwOnTimeout:p}=v!=null?v:{};let x=null;const E=[new Promise(w=>{x=r.watch([e,m],([C,S])=>{t!==(C===S)&&(x==null||x(),w(C))},{flush:y,deep:d,immediate:!0})})];return g!=null&&E.push(Rn(g,p).then(()=>Ce(e)).finally(()=>(x==null||x(),Ce(e)))),Promise.race(E)}function i(m){return n(v=>Boolean(v),m)}function a(m){return o(null,m)}function s(m){return o(void 0,m)}function l(m){return n(Number.isNaN,m)}function u(m,v){return n(y=>{const d=Array.from(y);return d.includes(m)||d.includes(Ce(m))},v)}function c(m){return f(1,m)}function f(m=1,v){let y=-1;return n(()=>(y+=1,y>=m),v)}return Array.isArray(Ce(e))?{toMatch:n,toContains:u,changed:c,changedTimes:f,get not(){return Kt(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:l,toBeUndefined:s,changed:c,changedTimes:f,get not(){return Kt(e,!t)}}}function Fe(e){return Kt(e)}var zn=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,Si=(e,t)=>{var n={};for(var o in e)Ni.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&zn)for(var o of zn(e))t.indexOf(o)<0&&Ei.call(e,o)&&(n[o]=e[o]);return n};function Ci(e,t,n={}){const o=n,{eventFilter:i=xo}=o,a=Si(o,["eventFilter"]);return r.watch(e,_i(i,t),a)}var Mi=Object.defineProperty,$i=Object.defineProperties,Bi=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,On=(e,t,n)=>t in e?Mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ri=(e,t)=>{for(var n in t||(t={}))bo.call(t,n)&&On(e,n,t[n]);if(vt)for(var n of vt(t))ko.call(t,n)&&On(e,n,t[n]);return e},zi=(e,t)=>$i(e,Bi(t)),Oi=(e,t)=>{var n={};for(var o in e)bo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&vt)for(var o of vt(e))t.indexOf(o)<0&&ko.call(e,o)&&(n[o]=e[o]);return n};function Ee(e,t,n={}){const o=n,{eventFilter:i}=o,a=Oi(o,["eventFilter"]),{eventFilter:s,pause:l,resume:u,isActive:c}=bi(i);return{stop:Ci(e,t,zi(Ri({},a),{eventFilter:s})),pause:l,resume:u,isActive:c}}function No(e){var t;const n=Ce(e);return(t=n==null?void 0:n.$el)!=null?t:n}const dn=wo?window:void 0;function he(...e){let t,n,o,i;if(xi(e[0])?([n,o,i]=e,t=dn):[t,n,o,i]=e,!t)return Ht;let a=Ht;const s=r.watch(()=>No(t),u=>{a(),u&&(u.addEventListener(n,o,i),a=()=>{u.removeEventListener(n,o,i),a=Ht})},{immediate:!0,flush:"post"}),l=()=>{s(),a()};return Qe(l),l}const Pi=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function Pn(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=dn,eventName:a="keydown",passive:s=!1}=o,l=Pi(t);return he(i,a,c=>{l(c)&&n(c)},s)}function Eo(e,t=null){const n=r.getCurrentInstance();let o=()=>{};const i=r.customRef((a,s)=>(o=s,{get(){var l,u;return a(),(u=(l=n==null?void 0:n.proxy)==null?void 0:l.$refs[e])!=null?u:t},set(){}}));return _o(o),r.onUpdated(o),i}function Ti(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),_o(o,t),n}function Ii(e){return JSON.parse(JSON.stringify(e))}const jt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Qt="__vueuse_ssr_handlers__";jt[Qt]=jt[Qt]||{};jt[Qt];var Tn=Object.getOwnPropertySymbols,Di=Object.prototype.hasOwnProperty,Ai=Object.prototype.propertyIsEnumerable,Vi=(e,t)=>{var n={};for(var o in e)Di.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Tn)for(var o of Tn(e))t.indexOf(o)<0&&Ai.call(e,o)&&(n[o]=e[o]);return n};function Hi(e,t,n={}){const o=n,{window:i=dn}=o,a=Vi(o,["window"]);let s;const l=Ti(()=>i&&"ResizeObserver"in i),u=()=>{s&&(s.disconnect(),s=void 0)},c=r.watch(()=>No(e),m=>{u(),l.value&&i&&m&&(s=new ResizeObserver(t),s.observe(m,a))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return Qe(f),{isSupported:l,stop:f}}var In;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(In||(In={}));var Fi=Object.defineProperty,Dn=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,An=(e,t,n)=>t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))Li.call(t,n)&&An(e,n,t[n]);if(Dn)for(var n of Dn(t))Zi.call(t,n)&&An(e,n,t[n]);return e};const Xi={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ui({linear:ki},Xi);function lt(e,t,n,o={}){var i,a,s;const{clone:l=!1,passive:u=!1,eventName:c,deep:f=!1,defaultValue:m}=o,v=r.getCurrentInstance(),y=n||(v==null?void 0:v.emit)||((i=v==null?void 0:v.$emit)==null?void 0:i.bind(v))||((s=(a=v==null?void 0:v.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(v==null?void 0:v.proxy));let d=c;t||(t="modelValue"),d=c||d||`update:${t.toString()}`;const g=x=>l?He(l)?l(x):Ii(x):x,p=()=>wi(e[t])?g(e[t]):m;if(u){const x=p(),O=r.ref(x);return r.watch(()=>e[t],E=>O.value=g(E)),r.watch(O,E=>{(E!==e[t]||f)&&y(d,E)},{deep:f}),O}else return r.computed({get(){return p()},set(x){y(d,x)}})}var Yi={value:()=>{}};function St(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ut(n)}function ut(e){this._=e}function Gi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ut.prototype=St.prototype={constructor:ut,on:function(e,t){var n=this._,o=Gi(e+"",n),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(e=o[a]).type)&&(i=Wi(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=o[a]).type)n[i]=Vn(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vn(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ut(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Wi(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Vn(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Yi,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jt="http://www.w3.org/1999/xhtml",Hn={svg:"http://www.w3.org/2000/svg",xhtml:Jt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ct(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hn.hasOwnProperty(t)?{space:Hn[t],local:e}:e}function qi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jt&&t.documentElement.namespaceURI===Jt?t.createElement(e):t.createElementNS(n,e)}}function Ki(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function So(e){var t=Ct(e);return(t.local?Ki:qi)(t)}function ji(){}function fn(e){return e==null?ji:function(){return this.querySelector(e)}}function Qi(e){typeof e!="function"&&(e=fn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=new Array(s),u,c,f=0;f<s;++f)(u=a[f])&&(c=e.call(u,u.__data__,f,a))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new ee(o,this._parents)}function Ji(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function er(){return[]}function Co(e){return e==null?er:function(){return this.querySelectorAll(e)}}function tr(e){return function(){return Ji(e.apply(this,arguments))}}function nr(e){typeof e=="function"?e=tr(e):e=Co(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var s=t[a],l=s.length,u,c=0;c<l;++c)(u=s[c])&&(o.push(e.call(u,u.__data__,c,s)),i.push(u));return new ee(o,i)}function Mo(e){return function(){return this.matches(e)}}function $o(e){return function(t){return t.matches(e)}}var or=Array.prototype.find;function ir(e){return function(){return or.call(this.children,e)}}function rr(){return this.firstElementChild}function ar(e){return this.select(e==null?rr:ir(typeof e=="function"?e:$o(e)))}var sr=Array.prototype.filter;function lr(){return Array.from(this.children)}function ur(e){return function(){return sr.call(this.children,e)}}function cr(e){return this.selectAll(e==null?lr:ur(typeof e=="function"?e:$o(e)))}function dr(e){typeof e!="function"&&(e=Mo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=[],u,c=0;c<s;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&l.push(u);return new ee(o,this._parents)}function Bo(e){return new Array(e.length)}function fr(){return new ee(this._enter||this._groups.map(Bo),this._parents)}function mt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mt.prototype={constructor:mt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hr(e){return function(){return e}}function vr(e,t,n,o,i,a){for(var s=0,l,u=t.length,c=a.length;s<c;++s)(l=t[s])?(l.__data__=a[s],o[s]=l):n[s]=new mt(e,a[s]);for(;s<u;++s)(l=t[s])&&(i[s]=l)}function mr(e,t,n,o,i,a,s){var l,u,c=new Map,f=t.length,m=a.length,v=new Array(f),y;for(l=0;l<f;++l)(u=t[l])&&(v[l]=y=s.call(u,u.__data__,l,t)+"",c.has(y)?i[l]=u:c.set(y,u));for(l=0;l<m;++l)y=s.call(e,a[l],l,a)+"",(u=c.get(y))?(o[l]=u,u.__data__=a[l],c.delete(y)):n[l]=new mt(e,a[l]);for(l=0;l<f;++l)(u=t[l])&&c.get(v[l])===u&&(i[l]=u)}function gr(e){return e.__data__}function pr(e,t){if(!arguments.length)return Array.from(this,gr);var n=t?mr:vr,o=this._parents,i=this._groups;typeof e!="function"&&(e=hr(e));for(var a=i.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var f=o[c],m=i[c],v=m.length,y=yr(e.call(f,f&&f.__data__,c,o)),d=y.length,g=l[c]=new Array(d),p=s[c]=new Array(d),x=u[c]=new Array(v);n(f,m,g,p,x,y,t);for(var O=0,E=0,w,C;O<d;++O)if(w=g[O]){for(O>=E&&(E=O+1);!(C=p[E])&&++E<d;);w._next=C||null}}return s=new ee(s,o),s._enter=l,s._exit=u,s}function yr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wr(){return new ee(this._exit||this._groups.map(Bo),this._parents)}function xr(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function _r(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,s=Math.min(i,a),l=new Array(i),u=0;u<s;++u)for(var c=n[u],f=o[u],m=c.length,v=l[u]=new Array(m),y,d=0;d<m;++d)(y=c[d]||f[d])&&(v[d]=y);for(;u<i;++u)l[u]=n[u];return new ee(l,this._parents)}function br(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],s;--i>=0;)(s=o[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function kr(e){e||(e=Nr);function t(m,v){return m&&v?e(m.__data__,v.__data__):!m-!v}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var s=n[a],l=s.length,u=i[a]=new Array(l),c,f=0;f<l;++f)(c=s[f])&&(u[f]=c);u.sort(t)}return new ee(i,this._parents).order()}function Nr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Er(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Sr(){return Array.from(this)}function Cr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var s=o[i];if(s)return s}return null}function Mr(){let e=0;for(const t of this)++e;return e}function $r(){return!this.node()}function Br(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,s=i.length,l;a<s;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function Rr(e){return function(){this.removeAttribute(e)}}function zr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Or(e,t){return function(){this.setAttribute(e,t)}}function Pr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ir(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dr(e,t){var n=Ct(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?zr:Rr:typeof t=="function"?n.local?Ir:Tr:n.local?Pr:Or)(n,t))}function Ro(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ar(e){return function(){this.style.removeProperty(e)}}function Vr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hr(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Fr(e,t,n){return arguments.length>1?this.each((t==null?Ar:typeof t=="function"?Hr:Vr)(e,t,n==null?"":n)):Be(this.node(),e)}function Be(e,t){return e.style.getPropertyValue(t)||Ro(e).getComputedStyle(e,null).getPropertyValue(t)}function Lr(e){return function(){delete this[e]}}function Zr(e,t){return function(){this[e]=t}}function Ur(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Xr(e,t){return arguments.length>1?this.each((t==null?Lr:typeof t=="function"?Ur:Zr)(e,t)):this.node()[e]}function zo(e){return e.trim().split(/^|\s+/)}function hn(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=zo(e.getAttribute("class")||"")}Oo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Po(e,t){for(var n=hn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function To(e,t){for(var n=hn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Yr(e){return function(){Po(this,e)}}function Gr(e){return function(){To(this,e)}}function Wr(e,t){return function(){(t.apply(this,arguments)?Po:To)(this,e)}}function qr(e,t){var n=zo(e+"");if(arguments.length<2){for(var o=hn(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wr:t?Yr:Gr)(n,t))}function Kr(){this.textContent=""}function jr(e){return function(){this.textContent=e}}function Qr(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Jr(e){return arguments.length?this.each(e==null?Kr:(typeof e=="function"?Qr:jr)(e)):this.node().textContent}function ea(){this.innerHTML=""}function ta(e){return function(){this.innerHTML=e}}function na(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function oa(e){return arguments.length?this.each(e==null?ea:(typeof e=="function"?na:ta)(e)):this.node().innerHTML}function ia(){this.nextSibling&&this.parentNode.appendChild(this)}function ra(){return this.each(ia)}function aa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sa(){return this.each(aa)}function la(e){var t=typeof e=="function"?e:So(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ua(){return null}function ca(e,t){var n=typeof e=="function"?e:So(e),o=t==null?ua:typeof t=="function"?t:fn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function da(){var e=this.parentNode;e&&e.removeChild(this)}function fa(){return this.each(da)}function ha(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function va(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ma(e){return this.select(e?va:ha)}function ga(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pa(e){return function(t){e.call(this,t,this.__data__)}}function ya(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function wa(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function xa(e,t,n){return function(){var o=this.__on,i,a=pa(t);if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function _a(e,t,n){var o=ya(e+""),i,a=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(i=0,f=l[u];i<a;++i)if((s=o[i]).type===f.type&&s.name===f.name)return f.value}return}for(l=t?xa:wa,i=0;i<a;++i)this.each(l(o[i],t,n));return this}function Io(e,t,n){var o=Ro(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ba(e,t){return function(){return Io(this,e,t)}}function ka(e,t){return function(){return Io(this,e,t.apply(this,arguments))}}function Na(e,t){return this.each((typeof t=="function"?ka:ba)(e,t))}function*Ea(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,s;i<a;++i)(s=o[i])&&(yield s)}var Do=[null];function ee(e,t){this._groups=e,this._parents=t}function Je(){return new ee([[document.documentElement]],Do)}function Sa(){return this}ee.prototype=Je.prototype={constructor:ee,select:Qi,selectAll:nr,selectChild:ar,selectChildren:cr,filter:dr,data:pr,enter:fr,exit:wr,join:xr,merge:_r,selection:Sa,order:br,sort:kr,call:Er,nodes:Sr,node:Cr,size:Mr,empty:$r,each:Br,attr:Dr,style:Fr,property:Xr,classed:qr,text:Jr,html:oa,raise:ra,lower:sa,append:la,insert:ca,remove:fa,clone:ma,datum:ga,on:_a,dispatch:Na,[Symbol.iterator]:Ea};function te(e){return typeof e=="string"?new ee([[document.querySelector(e)]],[document.documentElement]):new ee([[e]],Do)}function Ca(e){let t;for(;t=e.sourceEvent;)e=t;return e}function re(e,t){if(e=Ca(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ma={passive:!1},Le={capture:!0,passive:!1};function Ft(e){e.stopImmediatePropagation()}function Me(e){e.preventDefault(),e.stopImmediatePropagation()}function Ao(e){var t=e.document.documentElement,n=te(e).on("dragstart.drag",Me,Le);"onselectstart"in t?n.on("selectstart.drag",Me,Le):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vo(e,t){var n=e.document.documentElement,o=te(e).on("dragstart.drag",null);t&&(o.on("click.drag",Me,Le),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var nt=e=>()=>e;function en(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:s,y:l,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}en.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $a(e){return!e.ctrlKey&&!e.button}function Ba(){return this.parentNode}function Ra(e,t){return t==null?{x:e.x,y:e.y}:t}function za(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(){var e=$a,t=Ba,n=Ra,o=za,i={},a=St("start","drag","end"),s=0,l,u,c,f,m=0;function v(w){w.on("mousedown.drag",y).filter(o).on("touchstart.drag",p).on("touchmove.drag",x,Ma).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(w,C){if(!(f||!e.call(this,w,C))){var S=E(this,t.call(this,w,C),w,C,"mouse");!S||(te(w.view).on("mousemove.drag",d,Le).on("mouseup.drag",g,Le),Ao(w.view),Ft(w),c=!1,l=w.clientX,u=w.clientY,S("start",w))}}function d(w){if(Me(w),!c){var C=w.clientX-l,S=w.clientY-u;c=C*C+S*S>m}i.mouse("drag",w)}function g(w){te(w.view).on("mousemove.drag mouseup.drag",null),Vo(w.view,c),Me(w),i.mouse("end",w)}function p(w,C){if(!!e.call(this,w,C)){var S=w.changedTouches,z=t.call(this,w,C),T=S.length,H,X;for(H=0;H<T;++H)(X=E(this,z,w,C,S[H].identifier,S[H]))&&(Ft(w),X("start",w,S[H]))}}function x(w){var C=w.changedTouches,S=C.length,z,T;for(z=0;z<S;++z)(T=i[C[z].identifier])&&(Me(w),T("drag",w,C[z]))}function O(w){var C=w.changedTouches,S=C.length,z,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),z=0;z<S;++z)(T=i[C[z].identifier])&&(Ft(w),T("end",w,C[z]))}function E(w,C,S,z,T,H){var X=a.copy(),L=re(H||S,C),Y,I,h;if((h=n.call(w,new en("beforestart",{sourceEvent:S,target:v,identifier:T,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:X}),z))!=null)return Y=h.x-L[0]||0,I=h.y-L[1]||0,function N(b,B,A){var V=L,R;switch(b){case"start":i[T]=N,R=s++;break;case"end":delete i[T],--s;case"drag":L=re(A||B,C),R=s;break}X.call(b,w,new en(b,{sourceEvent:B,subject:h,target:v,identifier:T,active:R,x:L[0]+Y,y:L[1]+I,dx:L[0]-V[0],dy:L[1]-V[1],dispatch:X}),z)}}return v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:nt(!!w),v):e},v.container=function(w){return arguments.length?(t=typeof w=="function"?w:nt(w),v):t},v.subject=function(w){return arguments.length?(n=typeof w=="function"?w:nt(w),v):n},v.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:nt(!!w),v):o},v.on=function(){var w=a.on.apply(a,arguments);return w===a?v:w},v.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,v):Math.sqrt(m)},v}function vn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ho(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function et(){}var Ze=.7,gt=1/Ze,$e="\\s*([+-]?\\d+)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pa=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Ia=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Da=new RegExp(`^rgba\\(${$e},${$e},${$e},${Ue}\\)$`),Aa=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ue}\\)$`),Va=new RegExp(`^hsl\\(${Ue},${ae},${ae}\\)$`),Ha=new RegExp(`^hsla\\(${Ue},${ae},${ae},${Ue}\\)$`),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vn(et,Xe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:Fa,formatHsl:La,formatRgb:Zn,toString:Zn});function Ln(){return this.rgb().formatHex()}function Fa(){return this.rgb().formatHex8()}function La(){return Fo(this).formatHsl()}function Zn(){return this.rgb().formatRgb()}function Xe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Un(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ot(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ot(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ta.exec(e))?new J(t[1],t[2],t[3],1):(t=Ia.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Da.exec(e))?ot(t[1],t[2],t[3],t[4]):(t=Aa.exec(e))?ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Va.exec(e))?Gn(t[1],t[2]/100,t[3]/100,1):(t=Ha.exec(e))?Gn(t[1],t[2]/100,t[3]/100,t[4]):Fn.hasOwnProperty(e)?Un(Fn[e]):e==="transparent"?new J(NaN,NaN,NaN,0):null}function Un(e){return new J(e>>16&255,e>>8&255,e&255,1)}function ot(e,t,n,o){return o<=0&&(e=t=n=NaN),new J(e,t,n,o)}function Za(e){return e instanceof et||(e=Xe(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function tn(e,t,n,o){return arguments.length===1?Za(e):new J(e,t,n,o==null?1:o)}function J(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}vn(J,tn,Ho(et,{brighter(e){return e=e==null?gt:Math.pow(gt,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ze:Math.pow(Ze,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(ye(this.r),ye(this.g),ye(this.b),pt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xn,formatHex:Xn,formatHex8:Ua,formatRgb:Yn,toString:Yn}));function Xn(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}`}function Ua(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}${ge((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yn(){const e=pt(this.opacity);return`${e===1?"rgb(":"rgba("}${ye(this.r)}, ${ye(this.g)}, ${ye(this.b)}${e===1?")":`, ${e})`}`}function pt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ge(e){return e=ye(e),(e<16?"0":"")+e.toString(16)}function Gn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ne(e,t,n,o)}function Fo(e){if(e instanceof ne)return new ne(e.h,e.s,e.l,e.opacity);if(e instanceof et||(e=Xe(e)),!e)return new ne;if(e instanceof ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),s=NaN,l=a-i,u=(a+i)/2;return l?(t===a?s=(n-o)/l+(n<o)*6:n===a?s=(o-t)/l+2:s=(t-n)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new ne(s,l,u,e.opacity)}function Xa(e,t,n,o){return arguments.length===1?Fo(e):new ne(e,t,n,o==null?1:o)}function ne(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}vn(ne,Xa,Ho(et,{brighter(e){return e=e==null?gt:Math.pow(gt,e),new ne(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ze:Math.pow(Ze,e),new ne(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new J(Lt(e>=240?e-240:e+120,i,o),Lt(e,i,o),Lt(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ne(Wn(this.h),it(this.s),it(this.l),pt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pt(this.opacity);return`${e===1?"hsl(":"hsla("}${Wn(this.h)}, ${it(this.s)*100}%, ${it(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wn(e){return e=(e||0)%360,e<0?e+360:e}function it(e){return Math.max(0,Math.min(1,e||0))}function Lt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Lo=e=>()=>e;function Ya(e,t){return function(n){return e+n*t}}function Ga(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Wa(e){return(e=+e)==1?Zo:function(t,n){return n-t?Ga(t,n,e):Lo(isNaN(t)?n:t)}}function Zo(e,t){var n=t-e;return n?Ya(e,n):Lo(isNaN(e)?t:e)}var qn=function e(t){var n=Wa(t);function o(i,a){var s=n((i=tn(i)).r,(a=tn(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=Zo(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=e,o}(1);function fe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zt=new RegExp(nn.source,"g");function qa(e){return function(){return e}}function Ka(e){return function(t){return e(t)+""}}function ja(e,t){var n=nn.lastIndex=Zt.lastIndex=0,o,i,a,s=-1,l=[],u=[];for(e=e+"",t=t+"";(o=nn.exec(e))&&(i=Zt.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(o=o[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:fe(o,i)})),n=Zt.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?Ka(u[0].x):qa(t):(t=u.length,function(c){for(var f=0,m;f<t;++f)l[(m=u[f]).i]=m.x(c);return l.join("")})}var Kn=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Uo(e,t,n,o,i,a){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Kn,skewX:Math.atan(u)*Kn,scaleX:s,scaleY:l}}var rt;function Qa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?on:Uo(t.a,t.b,t.c,t.d,t.e,t.f)}function Ja(e){return e==null||(rt||(rt=document.createElementNS("http://www.w3.org/2000/svg","g")),rt.setAttribute("transform",e),!(e=rt.transform.baseVal.consolidate()))?on:(e=e.matrix,Uo(e.a,e.b,e.c,e.d,e.e,e.f))}function Xo(e,t,n,o){function i(c){return c.length?c.pop()+" ":""}function a(c,f,m,v,y,d){if(c!==m||f!==v){var g=y.push("translate(",null,t,null,n);d.push({i:g-4,x:fe(c,m)},{i:g-2,x:fe(f,v)})}else(m||v)&&y.push("translate("+m+t+v+n)}function s(c,f,m,v){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),v.push({i:m.push(i(m)+"rotate(",null,o)-2,x:fe(c,f)})):f&&m.push(i(m)+"rotate("+f+o)}function l(c,f,m,v){c!==f?v.push({i:m.push(i(m)+"skewX(",null,o)-2,x:fe(c,f)}):f&&m.push(i(m)+"skewX("+f+o)}function u(c,f,m,v,y,d){if(c!==m||f!==v){var g=y.push(i(y)+"scale(",null,",",null,")");d.push({i:g-4,x:fe(c,m)},{i:g-2,x:fe(f,v)})}else(m!==1||v!==1)&&y.push(i(y)+"scale("+m+","+v+")")}return function(c,f){var m=[],v=[];return c=e(c),f=e(f),a(c.translateX,c.translateY,f.translateX,f.translateY,m,v),s(c.rotate,f.rotate,m,v),l(c.skewX,f.skewX,m,v),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,m,v),c=f=null,function(y){for(var d=-1,g=v.length,p;++d<g;)m[(p=v[d]).i]=p.x(y);return m.join("")}}}var es=Xo(Qa,"px, ","px)","deg)"),ts=Xo(Ja,", ",")",")"),ns=1e-12;function jn(e){return((e=Math.exp(e))+1/e)/2}function os(e){return((e=Math.exp(e))-1/e)/2}function is(e){return((e=Math.exp(2*e))-1)/(e+1)}var rs=function e(t,n,o){function i(a,s){var l=a[0],u=a[1],c=a[2],f=s[0],m=s[1],v=s[2],y=f-l,d=m-u,g=y*y+d*d,p,x;if(g<ns)x=Math.log(v/c)/t,p=function(z){return[l+z*y,u+z*d,c*Math.exp(t*z*x)]};else{var O=Math.sqrt(g),E=(v*v-c*c+o*g)/(2*c*n*O),w=(v*v-c*c-o*g)/(2*v*n*O),C=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(w*w+1)-w);x=(S-C)/t,p=function(z){var T=z*x,H=jn(C),X=c/(n*O)*(H*is(t*T+C)-os(C));return[l+X*y,u+X*d,c*H/jn(t*T+C)]}}return p.duration=x*1e3*t/Math.SQRT2,p}return i.rho=function(a){var s=Math.max(.001,+a),l=s*s,u=l*l;return e(s,l,u)},i}(Math.SQRT2,2,4),Re=0,Ie=0,Pe=0,Yo=1e3,yt,De,wt=0,xe=0,Mt=0,Ye=typeof performance=="object"&&performance.now?performance:Date,Go=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mn(){return xe||(Go(as),xe=Ye.now()+Mt)}function as(){xe=0}function xt(){this._call=this._time=this._next=null}xt.prototype=Wo.prototype={constructor:xt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?mn():+n)+(t==null?0:+t),!this._next&&De!==this&&(De?De._next=this:yt=this,De=this),this._call=e,this._time=n,rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,rn())}};function Wo(e,t,n){var o=new xt;return o.restart(e,t,n),o}function ss(){mn(),++Re;for(var e=yt,t;e;)(t=xe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Re}function Qn(){xe=(wt=Ye.now())+Mt,Re=Ie=0;try{ss()}finally{Re=0,us(),xe=0}}function ls(){var e=Ye.now(),t=e-wt;t>Yo&&(Mt-=t,wt=e)}function us(){for(var e,t=yt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yt=n);De=e,rn(o)}function rn(e){if(!Re){Ie&&(Ie=clearTimeout(Ie));var t=e-xe;t>24?(e<1/0&&(Ie=setTimeout(Qn,e-Ye.now()-Mt)),Pe&&(Pe=clearInterval(Pe))):(Pe||(wt=Ye.now(),Pe=setInterval(ls,Yo)),Re=1,Go(Qn))}}function Jn(e,t,n){var o=new xt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var cs=St("start","end","cancel","interrupt"),ds=[],qo=0,eo=1,an=2,ct=3,to=4,sn=5,dt=6;function $t(e,t,n,o,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;fs(e,n,{name:t,index:o,group:i,on:cs,tween:ds,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:qo})}function gn(e,t){var n=oe(e,t);if(n.state>qo)throw new Error("too late; already scheduled");return n}function le(e,t){var n=oe(e,t);if(n.state>ct)throw new Error("too late; already running");return n}function oe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fs(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Wo(a,0,n.time);function a(c){n.state=eo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,m,v,y;if(n.state!==eo)return u();for(f in o)if(y=o[f],y.name===n.name){if(y.state===ct)return Jn(s);y.state===to?(y.state=dt,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete o[f]):+f<t&&(y.state=dt,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete o[f])}if(Jn(function(){n.state===ct&&(n.state=to,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=an,n.on.call("start",e,e.__data__,n.index,n.group),n.state===an){for(n.state=ct,i=new Array(v=n.tween.length),f=0,m=-1;f<v;++f)(y=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=y);i.length=m+1}}function l(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=sn,1),m=-1,v=i.length;++m<v;)i[m].call(e,f);n.state===sn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=dt,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function ft(e,t){var n=e.__transition,o,i,a=!0,s;if(!!n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){a=!1;continue}i=o.state>an&&o.state<sn,o.state=dt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}a&&delete e.__transition}}function hs(e){return this.each(function(){ft(this,e)})}function vs(e,t){var n,o;return function(){var i=le(this,e),a=i.tween;if(a!==n){o=n=a;for(var s=0,l=o.length;s<l;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function ms(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=le(this,e),s=a.tween;if(s!==o){i=(o=s).slice();for(var l={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=l;break}u===c&&i.push(l)}a.tween=i}}function gs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=oe(this.node(),n).tween,i=0,a=o.length,s;i<a;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?vs:ms)(n,e,t))}function pn(e,t,n){var o=e._id;return e.each(function(){var i=le(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return oe(i,o).value[t]}}function Ko(e,t){var n;return(typeof t=="number"?fe:t instanceof Xe?qn:(n=Xe(t))?(t=n,qn):ja)(e,t)}function ps(e){return function(){this.removeAttribute(e)}}function ys(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ws(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===o?a:a=t(o=s,n)}}function xs(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?a:a=t(o=s,n)}}function _s(e,t,n){var o,i,a;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===o&&u===i?a:(i=u,a=t(o=s,l)))}}function bs(e,t,n){var o,i,a;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===o&&u===i?a:(i=u,a=t(o=s,l)))}}function ks(e,t){var n=Ct(e),o=n==="transform"?ts:Ko;return this.attrTween(e,typeof t=="function"?(n.local?bs:_s)(n,o,pn(this,"attr."+e,t)):t==null?(n.local?ys:ps)(n):(n.local?xs:ws)(n,o,t))}function Ns(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Es(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ss(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Es(e,a)),n}return i._value=t,i}function Cs(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Ns(e,a)),n}return i._value=t,i}function Ms(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ct(e);return this.tween(n,(o.local?Ss:Cs)(o,t))}function $s(e,t){return function(){gn(this,e).delay=+t.apply(this,arguments)}}function Bs(e,t){return t=+t,function(){gn(this,e).delay=t}}function Rs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$s:Bs)(t,e)):oe(this.node(),t).delay}function zs(e,t){return function(){le(this,e).duration=+t.apply(this,arguments)}}function Os(e,t){return t=+t,function(){le(this,e).duration=t}}function Ps(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zs:Os)(t,e)):oe(this.node(),t).duration}function Ts(e,t){if(typeof t!="function")throw new Error;return function(){le(this,e).ease=t}}function Is(e){var t=this._id;return arguments.length?this.each(Ts(t,e)):oe(this.node(),t).ease}function Ds(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;le(this,e).ease=n}}function As(e){if(typeof e!="function")throw new Error;return this.each(Ds(this._id,e))}function Vs(e){typeof e!="function"&&(e=Mo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=[],u,c=0;c<s;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&l.push(u);return new de(o,this._parents,this._name,this._id)}function Hs(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var u=t[l],c=n[l],f=u.length,m=s[l]=new Array(f),v,y=0;y<f;++y)(v=u[y]||c[y])&&(m[y]=v);for(;l<o;++l)s[l]=t[l];return new de(s,this._parents,this._name,this._id)}function Fs(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ls(e,t,n){var o,i,a=Fs(t)?gn:le;return function(){var s=a(this,e),l=s.on;l!==o&&(i=(o=l).copy()).on(t,n),s.on=i}}function Zs(e,t){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(e):this.each(Ls(n,e,t))}function Us(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Xs(){return this.on("end.remove",Us(this._id))}function Ys(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fn(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var l=o[s],u=l.length,c=a[s]=new Array(u),f,m,v=0;v<u;++v)(f=l[v])&&(m=e.call(f,f.__data__,v,l))&&("__data__"in f&&(m.__data__=f.__data__),c[v]=m,$t(c[v],t,n,v,c,oe(f,n)));return new de(a,this._parents,t,n)}function Gs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Co(e));for(var o=this._groups,i=o.length,a=[],s=[],l=0;l<i;++l)for(var u=o[l],c=u.length,f,m=0;m<c;++m)if(f=u[m]){for(var v=e.call(f,f.__data__,m,u),y,d=oe(f,n),g=0,p=v.length;g<p;++g)(y=v[g])&&$t(y,t,n,g,v,d);a.push(v),s.push(f)}return new de(a,s,t,n)}var Ws=Je.prototype.constructor;function qs(){return new Ws(this._groups,this._parents)}function Ks(e,t){var n,o,i;return function(){var a=Be(this,e),s=(this.style.removeProperty(e),Be(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}function jo(e){return function(){this.style.removeProperty(e)}}function js(e,t,n){var o,i=n+"",a;return function(){var s=Be(this,e);return s===i?null:s===o?a:a=t(o=s,n)}}function Qs(e,t,n){var o,i,a;return function(){var s=Be(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Be(this,e))),s===u?null:s===o&&u===i?a:(i=u,a=t(o=s,l))}}function Js(e,t){var n,o,i,a="style."+t,s="end."+a,l;return function(){var u=le(this,e),c=u.on,f=u.value[a]==null?l||(l=jo(t)):void 0;(c!==n||i!==f)&&(o=(n=c).copy()).on(s,i=f),u.on=o}}function el(e,t,n){var o=(e+="")=="transform"?es:Ko;return t==null?this.styleTween(e,Ks(e,o)).on("end.style."+e,jo(e)):typeof t=="function"?this.styleTween(e,Qs(e,o,pn(this,"style."+e,t))).each(Js(this._id,e)):this.styleTween(e,js(e,o,t),n).on("end.style."+e,null)}function tl(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function nl(e,t,n){var o,i;function a(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&tl(e,s,n)),o}return a._value=t,a}function ol(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,nl(e,t,n==null?"":n))}function il(e){return function(){this.textContent=e}}function rl(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function al(e){return this.tween("text",typeof e=="function"?rl(pn(this,"text",e)):il(e==null?"":e+""))}function sl(e){return function(t){this.textContent=e.call(this,t)}}function ll(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&sl(i)),t}return o._value=e,o}function ul(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ll(e))}function cl(){for(var e=this._name,t=this._id,n=Qo(),o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],l=s.length,u,c=0;c<l;++c)if(u=s[c]){var f=oe(u,t);$t(u,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new de(o,this._parents,e,n)}function dl(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,s){var l={value:s},u={value:function(){--i===0&&a()}};n.each(function(){var c=le(this,o),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),c.on=t}),i===0&&a()})}var fl=0;function de(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Qo(){return++fl}var ue=Je.prototype;de.prototype={constructor:de,select:Ys,selectAll:Gs,selectChild:ue.selectChild,selectChildren:ue.selectChildren,filter:Vs,merge:Hs,selection:qs,transition:cl,call:ue.call,nodes:ue.nodes,node:ue.node,size:ue.size,empty:ue.empty,each:ue.each,on:Zs,attr:ks,attrTween:Ms,style:el,styleTween:ol,text:al,textTween:ul,remove:Xs,tween:gs,delay:Rs,duration:Ps,ease:Is,easeVarying:As,end:dl,[Symbol.iterator]:ue[Symbol.iterator]};function hl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vl={time:null,delay:0,duration:250,ease:hl};function ml(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gl(e){var t,n;e instanceof de?(t=e._id,e=e._name):(t=Qo(),(n=vl).time=mn(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],l=s.length,u,c=0;c<l;++c)(u=s[c])&&$t(u,e,t,c,s,n||ml(u,t));return new de(o,this._parents,e,t)}Je.prototype.interrupt=hs;Je.prototype.transition=gl;var at=e=>()=>e;function pl(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function ce(e,t,n){this.k=e,this.x=t,this.y=n}ce.prototype={constructor:ce,scale:function(e){return e===1?this:new ce(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ce(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bt=new ce(1,0,0);ce.prototype;function Ut(e){e.stopImmediatePropagation()}function Te(e){e.preventDefault(),e.stopImmediatePropagation()}function yl(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function no(){return this.__zoom||Bt}function xl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _l(){return navigator.maxTouchPoints||"ontouchstart"in this}function bl(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function kl(){var e=yl,t=wl,n=bl,o=xl,i=_l,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=rs,c=St("start","zoom","end"),f,m,v,y=500,d=150,g=0,p=10;function x(h){h.property("__zoom",no).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",X).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(h,N,b,B){var A=h.selection?h.selection():h;A.property("__zoom",no),h!==A?C(h,N,b,B):A.interrupt().each(function(){S(this,arguments).event(B).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},x.scaleBy=function(h,N,b,B){x.scaleTo(h,function(){var A=this.__zoom.k,V=typeof N=="function"?N.apply(this,arguments):N;return A*V},b,B)},x.scaleTo=function(h,N,b,B){x.transform(h,function(){var A=t.apply(this,arguments),V=this.__zoom,R=b==null?w(A):typeof b=="function"?b.apply(this,arguments):b,Z=V.invert(R),W=typeof N=="function"?N.apply(this,arguments):N;return n(E(O(V,W),R,Z),A,s)},b,B)},x.translateBy=function(h,N,b,B){x.transform(h,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),s)},null,B)},x.translateTo=function(h,N,b,B,A){x.transform(h,function(){var V=t.apply(this,arguments),R=this.__zoom,Z=B==null?w(V):typeof B=="function"?B.apply(this,arguments):B;return n(Bt.translate(Z[0],Z[1]).scale(R.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof b=="function"?-b.apply(this,arguments):-b),V,s)},B,A)};function O(h,N){return N=Math.max(a[0],Math.min(a[1],N)),N===h.k?h:new ce(N,h.x,h.y)}function E(h,N,b){var B=N[0]-b[0]*h.k,A=N[1]-b[1]*h.k;return B===h.x&&A===h.y?h:new ce(h.k,B,A)}function w(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function C(h,N,b,B){h.on("start.zoom",function(){S(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(B).end()}).tween("zoom",function(){var A=this,V=arguments,R=S(A,V).event(B),Z=t.apply(A,V),W=b==null?w(Z):typeof b=="function"?b.apply(A,V):b,k=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),_=A.__zoom,M=typeof N=="function"?N.apply(A,V):N,P=u(_.invert(W).concat(k/_.k),M.invert(W).concat(k/M.k));return function($){if($===1)$=M;else{var D=P($),G=k/D[2];$=new ce(G,W[0]-D[0]*G,W[1]-D[1]*G)}R.zoom(null,$)}})}function S(h,N,b){return!b&&h.__zooming||new z(h,N)}function z(h,N){this.that=h,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,N),this.taps=0}z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,N){return this.mouse&&h!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var N=te(this.that).datum();c.call(h,this.that,new pl(h,{sourceEvent:this.sourceEvent,target:x,type:h,transform:this.that.__zoom,dispatch:c}),N)}};function T(h,...N){if(!e.apply(this,arguments))return;var b=S(this,N).event(h),B=this.__zoom,A=Math.max(a[0],Math.min(a[1],B.k*Math.pow(2,o.apply(this,arguments)))),V=re(h);if(b.wheel)(b.mouse[0][0]!==V[0]||b.mouse[0][1]!==V[1])&&(b.mouse[1]=B.invert(b.mouse[0]=V)),clearTimeout(b.wheel);else{if(B.k===A)return;b.mouse=[V,B.invert(V)],ft(this),b.start()}Te(h),b.wheel=setTimeout(R,d),b.zoom("mouse",n(E(O(B,A),b.mouse[0],b.mouse[1]),b.extent,s));function R(){b.wheel=null,b.end()}}function H(h,...N){if(v||!e.apply(this,arguments))return;var b=h.currentTarget,B=S(this,N,!0).event(h),A=te(h.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",k,!0),V=re(h,b),R=h.clientX,Z=h.clientY;Ao(h.view),Ut(h),B.mouse=[V,this.__zoom.invert(V)],ft(this),B.start();function W(_){if(Te(_),!B.moved){var M=_.clientX-R,P=_.clientY-Z;B.moved=M*M+P*P>g}B.event(_).zoom("mouse",n(E(B.that.__zoom,B.mouse[0]=re(_,b),B.mouse[1]),B.extent,s))}function k(_){A.on("mousemove.zoom mouseup.zoom",null),Vo(_.view,B.moved),Te(_),B.event(_).end()}}function X(h,...N){if(!!e.apply(this,arguments)){var b=this.__zoom,B=re(h.changedTouches?h.changedTouches[0]:h,this),A=b.invert(B),V=b.k*(h.shiftKey?.5:2),R=n(E(O(b,V),B,A),t.apply(this,N),s);Te(h),l>0?te(this).transition().duration(l).call(C,R,B,h):te(this).call(x.transform,R,B,h)}}function L(h,...N){if(!!e.apply(this,arguments)){var b=h.touches,B=b.length,A=S(this,N,h.changedTouches.length===B).event(h),V,R,Z,W;for(Ut(h),R=0;R<B;++R)Z=b[R],W=re(Z,this),W=[W,this.__zoom.invert(W),Z.identifier],A.touch0?!A.touch1&&A.touch0[2]!==W[2]&&(A.touch1=W,A.taps=0):(A.touch0=W,V=!0,A.taps=1+!!f);f&&(f=clearTimeout(f)),V&&(A.taps<2&&(m=W[0],f=setTimeout(function(){f=null},y)),ft(this),A.start())}}function Y(h,...N){if(!!this.__zooming){var b=S(this,N).event(h),B=h.changedTouches,A=B.length,V,R,Z,W;for(Te(h),V=0;V<A;++V)R=B[V],Z=re(R,this),b.touch0&&b.touch0[2]===R.identifier?b.touch0[0]=Z:b.touch1&&b.touch1[2]===R.identifier&&(b.touch1[0]=Z);if(R=b.that.__zoom,b.touch1){var k=b.touch0[0],_=b.touch0[1],M=b.touch1[0],P=b.touch1[1],$=($=M[0]-k[0])*$+($=M[1]-k[1])*$,D=(D=P[0]-_[0])*D+(D=P[1]-_[1])*D;R=O(R,Math.sqrt($/D)),Z=[(k[0]+M[0])/2,(k[1]+M[1])/2],W=[(_[0]+P[0])/2,(_[1]+P[1])/2]}else if(b.touch0)Z=b.touch0[0],W=b.touch0[1];else return;b.zoom("touch",n(E(R,Z,W),b.extent,s))}}function I(h,...N){if(!!this.__zooming){var b=S(this,N).event(h),B=h.changedTouches,A=B.length,V,R;for(Ut(h),v&&clearTimeout(v),v=setTimeout(function(){v=null},y),V=0;V<A;++V)R=B[V],b.touch0&&b.touch0[2]===R.identifier?delete b.touch0:b.touch1&&b.touch1[2]===R.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(R=re(R,this),Math.hypot(m[0]-R[0],m[1]-R[1])<p)){var Z=te(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return x.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:at(+h),x):o},x.filter=function(h){return arguments.length?(e=typeof h=="function"?h:at(!!h),x):e},x.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:at(!!h),x):i},x.extent=function(h){return arguments.length?(t=typeof h=="function"?h:at([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),x):t},x.scaleExtent=function(h){return arguments.length?(a[0]=+h[0],a[1]=+h[1],x):[a[0],a[1]]},x.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(h){return arguments.length?(n=h,x):n},x.duration=function(h){return arguments.length?(l=+h,x):l},x.interpolate=function(h){return arguments.length?(u=h,x):u},x.on=function(){var h=c.on.apply(c,arguments);return h===c?x:h},x.clickDistance=function(h){return arguments.length?(g=(h=+h)*h,x):Math.sqrt(g)},x.tapDistance=function(h){return arguments.length?(p=+h,x):p},x}var U=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(U||{}),Jo=(e=>(e.Lines="lines",e.Dots="dots",e))(Jo||{}),we=(e=>(e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(we||{}),_e=(e=>(e.Strict="strict",e.Loose="loose",e))(_e||{}),ei=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(ei||{}),Ge=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ge||{});const ln=Symbol("vueFlow"),yn=Symbol("nodeId"),ti=Symbol("nodeRef"),ni=Symbol("edgeId"),oi=Symbol("edgeRef"),Rt=Symbol("slots"),Nl=()=>({edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F()});var El=(e,t)=>{r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Qe(()=>{o.off(i)})}})};const We=e=>({width:e.offsetWidth,height:e.offsetHeight}),_t=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),wn=(e,t)=>({x:_t(e.x,t[0][0],t[1][0]),y:_t(e.y,t[0][1],t[1][1])}),oo=e=>{const t=e.getRootNode(),n=Oe();return"elementFromPoint"in t?t:n.document},se=e=>e&&"id"in e&&"source"in e&&"target"in e,qe=e=>se(e)&&"sourceNode"in e&&"targetNode"in e,zt=e=>e&&"id"in e&&!se(e),ve=e=>zt(e)&&"computedPosition"in e,Sl=(e,t,n)=>{var i;let o=n;return ve(e)||(o={type:(i=e.type)!=null?i:"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:r.shallowReactive({source:[],target:[]}),computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,...n}),{...o,...e,id:e.id.toString()}},xn=(e,t)=>(t=qe(e)?t:{sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:e.type,source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:e.updatable,selectable:e.selectable,data:e.data,...t},Object.assign({id:e.id.toString()},e,t)),ii=(e,t,n)=>{if(!zt(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>se(a)&&a[o]===e.id).map(a=>se(a)&&a[n]);return t.filter(a=>i.includes(a.id))},Cl=(e,t)=>ii(e,t,"target"),Ml=(e,t)=>ii(e,t,"source"),Ot=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`,_n=(e,t)=>t.some(n=>se(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),$l=(e,t,n)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),t;let o;return se(e)?o={...e}:o={...e,id:Ot(e)},o=xn(o,n),_n(o,t)||t.push(o),t},Bl=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>se(a)&&a.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),n;const i={...e,id:Ot(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)},bn=({x:e,y:t},{x:n,y:o,zoom:i},a,[s,l])=>{const u={x:(e-n)/i,y:(t-o)/i};return a?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},ri=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ze=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),ai=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Rl=(e,t)=>ai(ri(ze(e),ze(t))),Pt=e=>{const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>ri(n,ze({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ai(t)},zl=({x:e,y:t},{x:n,y:o,zoom:i})=>({x:e*i+n,y:t*i+o}),kn=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1)=>{const s=ze({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter(l=>{if(!l||l.selectable===!1)return!1;const{computedPosition:u={x:0,y:0},dimensions:c={width:0,height:0}}=l,f=ze({...u,...c}),m=Math.max(0,Math.min(s.x2,f.x2)-Math.max(s.x,f.x)),v=Math.max(0,Math.min(s.y2,f.y2)-Math.max(s.y,f.y)),y=Math.ceil(m*v),d=typeof c.width=="undefined"||typeof c.height=="undefined"||c.width===0||c.height===0,g=a&&y>0,p=c.width*c.height;return d||g||y>=p})},j=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},un=(e,t,n,o,i,a=.1,s={x:0,y:0})=>{var g,p;const l=t/(e.width*(1+a)),u=n/(e.height*(1+a)),c=Math.min(l,u),f=_t(c,o,i),m=e.x+e.width/2,v=e.y+e.height/2,y=t/2-m*f+((g=s.x)!=null?g:0),d=n/2-v*f+((p=s.y)!=null?p:0);return{x:y,y:d,zoom:f}},Ol=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),si=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:si(n,t):!1},me=e=>typeof e=="undefined"?"":typeof e=="string"?e:Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&"),io=(e,t,n)=>{var l,u,c,f;const o=((l=n==null?void 0:n.x)!=null?l:0)+t.x,i=((u=n==null?void 0:n.y)!=null?u:0)+t.y,a=(c=n==null?void 0:n.width)!=null?c:t.width,s=(f=n==null?void 0:n.height)!=null?f:t.height;switch(e){case U.Top:return{x:o+a/2,y:i};case U.Right:return{x:o+a,y:i+s/2};case U.Bottom:return{x:o+a/2,y:i+s};case U.Left:return{x:o,y:i+s/2}}},ro=(e=[],t)=>{if(!e.length)return;let n;return!t&&e.length===1?n=e[0]:t&&(n=e.find(o=>o.id===t)),n||e[0]},Pl=(e,t,n,o,i,a)=>{const s=io(n,{...e.dimensions,...e.computedPosition},t),l=io(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Tl({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:s,height:l,viewport:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=ze({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:s/u.zoom,height:l/u.zoom}),m=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),v=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(m*v)>0}const Il=(e,t)=>{let n=-1;const o=e.reduce((i,a)=>{const s=t(a.source),l=t(a.target);if(!s||!l)return i;const u=a.z?a.z:Math.max(s.computedPosition.z||0,l.computedPosition.z||0);return i[u]?i[u].push(a):i[u]=[a],n=u>n?u:n,i},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([i,a])=>{const s=+i;return{edges:a,level:s,isMaxLevel:s===n}})},ao=(e,t,n)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-a.left)/n,y:(l.top-a.top)/n,...We(s)}})},li=(e,t,n,o,i)=>{i.value=!1,e.selected?e.selected&&t&&o({nodes:[e]}):n([e])};function so(e,t){var n,o;if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,a=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||a>0||e.position.x<0||e.position.y<0){if(t.style={...t.style},t.style.width=(n=t.style.width)!=null?n:t.dimensions.width,t.style.height=(o=t.style.height)!=null?o:t.dimensions.height,i>0)if(typeof t.style.width=="string"){const s=parseInt(t.style.width,10);t.style.width=`${s+i}px`}else t.style.width+=i;if(a>0)if(typeof t.style.height=="string"){const s=parseInt(t.style.height,10);t.style.height=`${s+a}px`}else t.style.height+=a;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof t.style.width=="string"){const l=parseInt(t.style.width,10);t.style.width=`${l+s}px`}else t.style.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof t.style.height=="string"){const l=parseInt(t.style.height,10);t.style.height=`${l+s}px`}else t.style.height+=s;e.position.y=0}}}}const Ke=(e,t)=>{let n=t.map(o=>o.id);return e.forEach(o=>{if(o.type==="add"){const s=o.item;return t.push(s)}const i=n.indexOf(o.id),a=t[i];switch(o.type){case"select":(ve(a)||qe(a))&&(a.selected=o.selected);break;case"position":if(ve(a)&&(typeof o.position!="undefined"&&(a.position=o.position),typeof o.computedPosition!="undefined"&&(a.computedPosition={...a.computedPosition,...o.computedPosition}),a.expandParent&&a.parentNode)){const s=t[n.indexOf(a.parentNode)];s&&ve(s)&&so(a,s)}break;case"dimensions":if(ve(a)&&(typeof o.dimensions!="undefined"&&(a.dimensions=o.dimensions),a.expandParent&&a.parentNode)){const s=t[n.indexOf(a.parentNode)];s&&ve(s)&&so(a,s)}break;case"remove":n.includes(o.id)&&(t.splice(i,1),n=t.map(s=>s.id));break}}),t},Dl=(e,t)=>Ke(e,t),Al=(e,t)=>Ke(e,t),bt=(e,t)=>({id:e,type:"select",selected:t}),lo=e=>({item:e,type:"add"}),Xt=e=>({id:e,type:"remove"}),uo=(e,t)=>e.reduce((n,o)=>{const i=t.includes(o.id);return!o.selected&&i?(o.selected=!0,n.push(bt(o.id,!0))):o.selected&&!i&&(o.selected=!1,n.push(bt(o.id,!1))),n},[]),Vl=e=>typeof e!="undefined",Hl=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return se(e)?n={...e}:n={...e,id:Ot(e)},n=xn(n),_n(n,t)?!1:n},Fl=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;const o=n.find(a=>qe(a)&&a.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;const i={...e,id:Ot(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),i},co=(e,t,n,o)=>{const i={},a=e.map(s=>{const l=r.shallowReactive(Sl(s,o,{...t(s.id),parentNode:s.parentNode}));return s.parentNode&&(i[s.parentNode]=!0),l});return a.forEach(s=>{const l=[...a,...n];if(s.parentNode&&!l.find(u=>u.id===s.parentNode)&&console.warn(`[vueflow]: Parent node ${s.parentNode} not found`),s.parentNode||i[s.id]){i[s.id]&&(s.isParent=!0);const u=s.parentNode?t(s.parentNode):void 0;u&&(u.isParent=!0)}}),a},Ll=["data-handleid","data-nodeid","data-handlepos"],Zl={name:"Handle"},je=r.defineComponent({...Zl,props:{id:null,type:{default:"source"},position:{default:()=>"top"},isValidConnection:null,connectable:{type:Boolean,default:!0}},setup(e){const t=K(),n=r.toRef(t,"connectionStartHandle"),o=r.toRef(t,"connectionMode"),i=r.toRef(t,"vueFlowRef"),{id:a,node:s,nodeEl:l}=yi(),u=r.ref(),c=r.computed(()=>{var g;return(g=e.id)!=null?g:o.value===_e.Strict?null:`${a}__handle-${e.position}`}),{onMouseDown:f,onClick:m}=$n(),v=g=>{f(g,c.value,a,e.type==="target",e.isValidConnection,void 0)},y=g=>{var p;m(g,(p=c.value)!=null?p:null,a,e.type,e.isValidConnection)},d=r.computed(()=>["vue-flow__handle",`vue-flow__handle-${e.position}`,`vue-flow__handle-${c.value}`,"nodrag",{source:e.type!=="target",target:e.type==="target",connectable:e.connectable,connecting:n.value&&n.value.nodeId===a&&n.value.handleId===c.value&&n.value.type===e.type}]);return r.onMounted(()=>{var S,z;const g=(S=s.handleBounds[e.type])==null?void 0:S.find(T=>T.id===c.value);if(!i.value||g)return;const p=i.value.querySelector(".vue-flow__transformationpane");if(!l||!u.value||!p)return;const x=l.value.getBoundingClientRect(),O=u.value.getBoundingClientRect(),E=window.getComputedStyle(p),{m22:w}=new window.DOMMatrixReadOnly(E.transform),C={id:c.value,position:e.position,x:(O.left-x.left)/w,y:(O.top-x.top)/w,...We(u.value)};s.handleBounds[e.type]=[...(z=s.handleBounds[e.type])!=null?z:[],C]}),(g,p)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:u,"data-handleid":c.value,"data-nodeid":r.unref(a),"data-handlepos":e.position,class:r.normalizeClass(r.unref(d)),onMousedown:v,onClick:y},[r.renderSlot(g.$slots,"default",{id:e.id})],42,Ll))}}),Nn=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,connectable:o=!1,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(je,{type:"target",position:t,isConnectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(je,{type:"source",position:e,isConnectable:o,isValidConnection:a})]};Nn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Nn.inheritAttrs=!1;const En=function({sourcePosition:e=U.Bottom,label:t,connectable:n=!1,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(je,{type:"source",position:e,isConnectable:n,isValidConnection:o})]};En.props=["sourcePosition","label","isValidSourcePos","connectable"];En.inheritAttrs=!1;const Sn=function({targetPosition:e=U.Top,label:t,connectable:n=!1,isValidTargetPos:o}){return[r.h(je,{type:"target",position:e,isConnectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};Sn.props=["targetPosition","label","isValidTargetPos","connectable"];Sn.inheritAttrs=!1;const Ul=["data-id"],Xl={name:"Node",inheritAttrs:!1},Yl=r.defineComponent({...Xl,props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null,type:{type:[null,Function,Object,Boolean]},name:null,node:null,resizeObserver:null},setup(e){const t=r.createPropsRestProxy(e,["id","type","name","draggable","selectable","connectable","snapGrid"]);r.provide(yn,e.id);const n=K();r.toRef(n,"nodeExtent");const o=r.toRef(n,"edges");r.toRef(n,"viewport");const i=r.toRef(n,"noPanClassName"),a=r.toRef(n,"selectNodesOnDrag"),s=r.toRef(n,"nodesSelectionActive"),l=r.toRef(n,"multiSelectionActive"),u=r.toRef(n,"emits"),c=r.toRef(n,"getNode"),f=r.toRef(n,"removeSelectedElements"),m=r.toRef(n,"addSelectedNodes"),v=r.toRef(n,"updateNodeDimensions"),y=r.toRef(n,"onUpdateNodeInternals"),d=lt(t,"node"),g=r.computed(()=>d.value.parentNode?c.value(d.value.parentNode):void 0),p=r.ref();r.provide(ti,p);const{emit:x,on:O}=bu(d.value,u.value),E=pi({id:e.id,el:p,disabled:r.computed(()=>!e.draggable),onStart(h,N,b){x.dragStart({event:h,node:N,nodes:b})},onDrag(h,N,b){x.drag({event:h,node:N,nodes:b})},onStop(h,N,b){x.dragStop({event:h,node:N,nodes:b})}}),w=(h,N)=>{N?d.value.computedPosition=Ol({x:N.x,y:N.y,z:N.z},h):d.value.computedPosition=h},C=()=>{p.value&&v.value([{id:e.id,nodeElement:p.value,forceUpdate:!0}]),w({x:d.value.position.x,y:d.value.position.y,z:d.value.computedPosition.z?d.value.computedPosition.z:d.value.selected?1e3:0},g.value?{...g.value.computedPosition}:void 0)};y.value(h=>{h.includes(e.id)&&C()}),w({x:d.value.position.x,y:d.value.position.y,z:d.value.computedPosition.z?d.value.computedPosition.z:d.value.selected?1e3:0},g.value?{...g.value.computedPosition}:void 0),r.onMounted(()=>{t.resizeObserver.observe(p.value)}),r.watch([()=>d.value.type,()=>d.value.sourcePosition,()=>d.value.targetPosition],()=>{v.value([{id:e.id,nodeElement:p.value,forceUpdate:!0}])},{flush:"post"}),r.watch([()=>d.value.position.x,()=>d.value.position.y,()=>{var h;return(h=g.value)==null?void 0:h.computedPosition.x},()=>{var h;return(h=g.value)==null?void 0:h.computedPosition.y},()=>{var h;return(h=g.value)==null?void 0:h.computedPosition.z},()=>d.value.selected,()=>d.value.dimensions,()=>{var h;return(h=g.value)==null?void 0:h.dimensions}],([h,N,b,B,A])=>{const V={x:h,y:N,z:d.value.selected?1e3:0};w(V,b&&B?{x:b,y:B,z:A}:void 0)},{flush:"post"}),r.onBeforeUnmount(()=>{t.resizeObserver.unobserve(p.value)});const S=h=>{E!=null&&E.value||x.mouseEnter({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},z=h=>{E!=null&&E.value||x.mouseMove({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},T=h=>{E!=null&&E.value||x.mouseLeave({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},H=h=>{x.contextMenu({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},X=h=>{x.doubleClick({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},L=h=>{e.selectable&&(!a.value||!e.draggable)&&li(d.value,l.value,m.value,f.value,s),x.click({event:h,node:d.value,connectedEdges:j([d.value],o.value)})},Y=r.computed(()=>d.value.class instanceof Function?d.value.class(d.value):d.value.class),I=r.computed(()=>{const h=(d.value.style instanceof Function?d.value.style(d.value):d.value.style)||{},N=d.value.width instanceof Function?d.value.width(d.value):d.value.width,b=d.value.height instanceof Function?d.value.height(d.value):d.value.height;return N&&(h.width=typeof N=="string"?N:`${N}px`),b&&(h.height=typeof b=="string"?b:`${b}px`),h});return(h,N)=>{var b;return r.openBlock(),r.createElementBlock("div",{ref_key:"nodeElement",ref:p,class:r.normalizeClass(["vue-flow__node",[`vue-flow__node-${e.name}`,i.value,{dragging:r.unref(E),selected:d.value.selected,selectable:e.selectable},r.unref(Y)]]),style:r.normalizeStyle({zIndex:(b=d.value.computedPosition.z)!=null?b:0,transform:`translate(${d.value.computedPosition.x}px,${d.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...r.unref(I)}),"data-id":d.value.id,onMouseenter:S,onMousemove:z,onMouseleave:T,onContextmenu:H,onClick:L,onDblclick:X},[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.type),{id:d.value.id,type:d.value.type,data:d.value.data,events:{...d.value.events,...r.unref(O)},selected:!!d.value.selected,connectable:e.connectable,position:d.value.position,dimensions:d.value.dimensions,"is-valid-target-pos":d.value.isValidTargetPos,"is-valid-source-pos":d.value.isValidSourcePos,"parent-node":d.value.parentNode,dragging:r.unref(E),"z-index":d.value.computedPosition.z,"target-position":d.value.targetPosition,"source-position":d.value.sourcePosition,label:d.value.label,"drag-handle":d.value.dragHandle,onUpdateNodeInternals:C},null,40,["id","type","data","events","selected","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle"]))],46,Ul)}}}),Gl=["transform"],Wl=["width","height","x","y","rx","ry"],ql=["y"],Kl={name:"EdgeText"},ui=r.defineComponent({...Kl,props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=r.ref();let n=r.ref({x:0,y:0,width:0,height:0});r.onMounted(()=>{n.value=t.value.getBBox()});const o=r.computed(()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`);return(i,a)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Wl)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(i.$attrs,{ref_key:"el",ref:t,class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(i.$slots,"default",{},()=>[typeof e.label!="string"&&typeof e.label?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0})):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64))])],16,ql)],8,Gl))}}),be=function({path:e,centerX:t,centerY:n,label:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:s,labelShowBg:l,labelStyle:u,markerStart:c,markerEnd:f,style:m}){return[r.h("path",{style:{...m},d:e,class:"vue-flow__edge-path","marker-end":f,"marker-start":c}),o?r.h(ui,{x:t,y:n,label:o,labelStyle:u,labelShowBg:l,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:i}):null]};be.props=["path","centerX","centerY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","style"];be.inheritAttrs=!1;function st(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function kt({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let s,l;switch(e){case U.Left:s=t-st(t-o,a),l=n;break;case U.Right:s=t+st(o-t,a),l=n;break;case U.Top:s=t,l=n-st(n-i,a);break;case U.Bottom:s=t,l=n+st(i-n,a);break}return[s,l]}function Cn({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,curvature:s=.25}){const[l,u]=kt({pos:n,x1:e,y1:t,x2:o,y2:i,c:s}),[c,f]=kt({pos:a,x1:o,y1:i,x2:e,y2:t,c:s});return`M${e},${t} C${l},${u} ${c},${f} ${o},${i}`}function ci({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,curvature:s=.25}){const[l,u]=kt({pos:n,x1:e,y1:t,x2:o,y2:i,c:s}),[c,f]=kt({pos:a,x1:o,y1:i,x2:e,y2:t,c:s}),m=e*.125+l*.375+c*.375+o*.125,v=t*.125+u*.375+f*.375+i*.125,y=Math.abs(m-e),d=Math.abs(v-t);return[m,v,y,d]}function Nt({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,s;switch(e){case U.Left:case U.Right:a=.5*(t+o),s=n;break;case U.Top:case U.Bottom:a=t,s=.5*(n+i);break}return[a,s]}function di({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top}){const[s,l]=Nt({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,c]=Nt({pos:a,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${s},${l} ${u},${c} ${o},${i}`}function fi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top}){const[s,l]=Nt({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,c]=Nt({pos:a,x1:o,y1:i,x2:e,y2:t}),f=e*.125+s*.375+u*.375+o*.125,m=t*.125+l*.375+c*.375+i*.125,v=Math.abs(f-e),y=Math.abs(m-t);return[f,m,v,y]}const fo=[U.Left,U.Right],Mn=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=U.Bottom,targetPosition:a=U.Top})=>{const s=fo.includes(i),l=fo.includes(a);if(s&&!l||l&&!s){const y=s?Math.abs(n-e):0,d=e>n?e-y:e+y,g=s?0:Math.abs(o-t),p=t<o?t+g:t-g;return[d,p,y,g]}const c=Math.abs(n-e)/2,f=n<e?n+c:n-c,m=Math.abs(o-t)/2,v=o<t?o+m:o-m;return[f,v,c,m]},ho={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},jl=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vo=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function Ql({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:i,offset:a}){const s=ho[t],l=ho[o],u={x:e.x+s.x*a,y:e.y+s.y*a},c={x:n.x+l.x*a,y:n.y+l.y*a},f=jl({source:u,sourcePosition:t,target:c}),m=f.x!==0?"x":"y",v=f[m];let y=[];if(s[m]*l[m]===-1){const d=[{x:i.x,y:u.y},{x:i.x,y:c.y}],g=[{x:u.x,y:i.y},{x:c.x,y:i.y}];s[m]===v?y=m==="x"?d:g:y=m==="x"?g:d}else{const d=[{x:u.x,y:c.y}],g=[{x:c.x,y:u.y}];if(m==="x"?y=s.x===v?g:d:y=s.y===v?d:g,t!==o){const p=m==="x"?"y":"x",x=s[m]===l[p],O=u[p]>c[p],E=u[p]<c[p];(s[m]===1&&(!x&&O||x&&E)||s[m]!==1&&(!x&&E||x&&O))&&(y=m==="x"?d:g)}}return[e,u,...y,c,n]}function Jl(e,t,n,o){const i=Math.min(vo(e,t)/2,vo(t,n)/2,o),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${a+i*c},${s}Q ${a},${s} ${a},${s+i*f}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${s+i*u}Q ${a},${s} ${a+i*l},${s}`}function Et({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}){const[f,m]=Mn({sourceX:e,sourceY:t,targetX:o,targetY:i}),d=Ql({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:typeof l!="undefined"?l:f,y:typeof u!="undefined"?u:m},offset:c});return d.reduce((g,p,x)=>{let O="";return x>0&&x<d.length-1?O=Jl(d[x-1],p,d[x+1],s):O=`${x===0?"M":"L"}${p.x} ${p.y}`,g+=O,g},"")}const Tt=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:f,targetY:m,curvature:v,markerEnd:y,markerStart:d,style:g}){const[p,x]=ci({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t,curvature:v}),O=Cn({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t,curvature:v});return r.h(be,{path:O,centerX:p,centerY:x,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:g,markerEnd:y,markerStart:d})};Tt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","style"];Tt.inheritAttrs=!1;const It=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:f,targetY:m,markerEnd:v,markerStart:y,style:d}){const[g,p]=fi({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t}),x=di({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t});return r.h(be,{path:x,centerX:g,centerY:p,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:d,markerEnd:v,markerStart:y})};It.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];It.inheritAttrs=!1;const tt=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:f,targetY:m,markerEnd:v,markerStart:y,borderRadius:d,offset:g,style:p}){const[x,O]=Mn({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t}),E=Et({sourceX:c,sourceY:u,targetX:f,targetY:m,sourcePosition:e,targetPosition:t,borderRadius:d,offset:g});return r.h(be,{path:E,centerX:x,centerY:O,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:p,markerEnd:v,markerStart:y})};tt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","offset","markerEnd","markerStart","style"];tt.inheritAttrs=!1;const Dt=function(e){return r.h(tt,{...e,borderRadius:0})};Dt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];Dt.inheritAttrs=!1;const At=function({label:e,labelStyle:t={},labelShowBg:n=!0,labelBgStyle:o={},labelBgPadding:i,labelBgBorderRadius:a,sourceY:s,sourceX:l,targetX:u,targetY:c,markerEnd:f,markerStart:m,style:v}){const y=r.computed(()=>{const g=Math.abs(c-s)/2;return c<s?c+g:c-g}),d=r.computed(()=>{const g=Math.abs(u-l)/2;return u<l?u+g:u-g});return r.h(be,{path:`M ${l},${s}L ${u},${c}`,centerX:d.value,centerY:y.value,label:e,labelStyle:t,labelShowBg:n,labelBgStyle:o,labelBgPadding:i,labelBgBorderRadius:a,style:v,markerEnd:f,markerStart:m})};At.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];At.inheritAttrs=!1;const eu=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,tu=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,cn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=U.Top}){const i=r.computed(()=>{const s=eu(t,e,o);return isNaN(s)?0:s}),a=r.computed(()=>{const s=tu(n,e,o);return isNaN(s)?0:s});return r.h("circle",{class:"vue-flow__edgeupdater",cx:i.value,cy:a.value,r:e,stroke:"transparent",fill:"transparent"})};cn.props=["radius","centerX","centerY","position"];const nu=r.defineComponent({props:["name","type","id","data","events","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","labelShowBg","style","animated","label","updatable","selectable","target","source","sourceNode","targetNode","sourceHandleId","targetHandleId","selected","markerEnd","markerStart","connectionMode","edgeUpdaterRadius","updating"],emits:["source-mousedown","target-mousedown"],setup(e,{emit:t}){let n=r.ref(!1);const o=r.ref();r.provide(ni,e.id),r.provide(oi,o);const i=()=>n.value=!0,a=()=>n.value=!1,s=u=>{t("source-mousedown",u)},l=u=>{t("target-mousedown",u)};return()=>{var O,E;if(!e.sourceNode||!e.targetNode)return null;let u;e.connectionMode===_e.Strict?u=e.sourceNode.handleBounds.source:u=(O=e.sourceNode.handleBounds.source)!=null?O:e.sourceNode.handleBounds.target;const c=ro(u,e.sourceHandleId);let f;e.connectionMode===_e.Strict?f=e.targetNode.handleBounds.target:f=(E=e.targetNode.handleBounds.target)!=null?E:e.targetNode.handleBounds.source;const m=ro(f,e.targetHandleId),v=c?c.position:U.Bottom,y=m?m.position:U.Top,{sourceX:d,sourceY:g,targetY:p,targetX:x}=Pl(e.sourceNode,c,v,e.targetNode,m,y);return r.h("g",{ref:o,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.name}`,{updating:n.value,selected:e.selected,animated:e.animated,inactive:!e.selectable}]},[e.updating?null:r.h(e.type,{id:e.id,sourceNode:e.sourceNode,targetNode:e.targetNode,source:e.source,target:e.target,updatable:e.updatable,selected:e.selected,animated:e.animated,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,data:e.data,events:e.events,style:e.style,markerStart:`url(#${me(e.markerStart)})`,markerEnd:`url(#${me(e.markerEnd)})`,sourcePosition:v,targetPosition:y,sourceX:d,sourceY:g,targetX:x,targetY:p,sourceHandleId:e.sourceHandleId,targetHandleId:e.targetHandleId}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:s,onMouseenter:i,onMouseout:a},r.h(cn,{position:v,centerX:d,centerY:g,radius:e.edgeUpdaterRadius,"data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:l,onMouseenter:i,onMouseout:a},r.h(cn,{position:y,centerX:x,centerY:p,radius:e.edgeUpdaterRadius,"data-type":"target"}))]:null]])}}}),ou={class:"vue-flow__connection"},iu=["d","marker-end","marker-start"],ru={name:"ConnectionLine"},au=r.defineComponent({...ru,props:{sourceNode:null},setup(e){var z,T,H;const t=K(),n=r.toRef(t,"getNodes"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionPosition"),a=r.toRef(t,"connectionLineType"),s=r.toRef(t,"connectionLineStyle"),l=r.toRef(t,"connectionLineOptions"),u=r.toRef(t,"viewport"),c=(z=r.inject(Rt))==null?void 0:z["connection-line"],f=c==null?void 0:c({}),m=o.value.handleId;o.value.nodeId;const v=o.value.type,y=m&&v?(T=e.sourceNode.handleBounds[v])==null?void 0:T.find(X=>X.id===m):v&&((H=e.sourceNode.handleBounds[v!=null?v:"source"])==null?void 0:H[0]),d=y?y.x+y.width/2:e.sourceNode.dimensions.width/2,g=y?y.y+y.height/2:e.sourceNode.dimensions.height,p=e.sourceNode.computedPosition.x+d,x=e.sourceNode.computedPosition.y+g,E=(y==null?void 0:y.position)===U.Left||(y==null?void 0:y.position)===U.Right?U.Left:U.Top,w=r.computed(()=>(i.value.x-u.value.x)/u.value.zoom),C=r.computed(()=>(i.value.y-u.value.y)/u.value.zoom),S=r.computed(()=>{let X=`M${p},${x} ${w.value},${C.value}`;switch(a.value||l.value.type){case we.Bezier:X=Cn({sourceX:p,sourceY:x,sourcePosition:y==null?void 0:y.position,targetX:w.value,targetY:C.value,targetPosition:E});break;case we.Step:X=Et({sourceX:p,sourceY:x,sourcePosition:y==null?void 0:y.position,targetX:w.value,targetY:C.value,targetPosition:E,borderRadius:0});break;case we.SmoothStep:X=Et({sourceX:p,sourceY:x,sourcePosition:y==null?void 0:y.position,targetX:w.value,targetY:C.value,targetPosition:E});break}return X});return(X,L)=>{var Y;return r.openBlock(),r.createElementBlock("g",ou,[r.unref(f)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(c)),r.normalizeProps(r.mergeProps({key:0},{sourceX:p,sourceY:x,sourcePosition:(Y=r.unref(y))==null?void 0:Y.position,targetX:w.value,targetY:C.value,targetPosition:r.unref(E),nodes:n.value,sourceNode:e.sourceNode,sourceHandle:r.unref(y),markerEnd:`url(#${r.unref(me)(l.value.markerEnd)})`,markerStart:`url(#${r.unref(me)(l.value.markerStart)})`})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(S),class:r.normalizeClass(["vue-flow__connection-path",l.value.class]),style:r.normalizeStyle(s.value||l.value.style||{}),"marker-end":`url(#${r.unref(me)(l.value.markerEnd)})`,"marker-start":`url(#${r.unref(me)(l.value.markerStart)})`},null,14,iu))])}}}),su={name:"NodesSelection"},lu=r.defineComponent({...su,setup(e){const t=K(),n=r.toRef(t,"emits");r.toRef(t,"setState");const o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes");r.toRef(t,"snapToGrid"),r.toRef(t,"snapGrid");const a=r.toRef(t,"noPanClassName"),s=r.ref();pi({el:s,onStart(f,m,v){n.value.selectionDragStart({event:f,node:m,nodes:v})},onDrag(f,m,v){n.value.selectionDrag({event:f,node:m,nodes:v})},onStop(f,m,v){n.value.selectionDragStop({event:f,node:m,nodes:v})}});const l=r.computed(()=>Pt(i.value)),u=r.computed(()=>({width:`${l.value.width}px`,height:`${l.value.height}px`,top:`${l.value.y}px`,left:`${l.value.x}px`})),c=f=>n.value.selectionContextMenu({event:f,nodes:i.value});return(f,m)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",a.value]),style:r.normalizeStyle({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:s,class:"vue-flow__nodesselection-rect",style:r.normalizeStyle(r.unref(u)),onContextmenu:c},null,36)],6))}}),uu={name:"SelectionRect"},cu=r.defineComponent({...uu,props:{width:null,height:null,x:null,y:null},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection",style:r.normalizeStyle({width:`${e.width}px`,height:`${e.height}px`,transform:`translate(${e.x}px, ${e.y}px)`})},null,4))}});function mo(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const du={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},fu={name:"UserSelection"},hu=r.defineComponent({...fu,setup(e){const{userSelectionActive:t,nodesSelectionActive:n,getNodes:o,getEdges:i,viewport:a,addSelectedEdges:s,addSelectedNodes:l}=K(),u=Eo("user-selection",null);let c=r.ref(0),f=r.ref(0);const m=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1});let v=r.ref(m());const y=()=>{v.value=m(),c.value=0,f.value=0,t.value=!1},d=O=>{const E=mo(O);!E||(v.value={width:0,height:0,startX:E.x,startY:E.y,x:E.x,y:E.y,draw:!0},t.value=!0,n.value=!0)},g=O=>{if(!t||!v.value.draw)return;const E=mo(O);if(!E)return;const w=v.value.startX,C=v.value.startY,S={...v.value,x:E.x<w?E.x:v.value.x,y:E.y<C?E.y:v.value.y,width:Math.abs(E.x-w),height:Math.abs(E.y-C)},z=kn(o.value,v.value,a.value),T=j(z,i.value);v.value=S,l(z),s(T),c.value=z.length,f.value=T.length},p=()=>{v.value=m(),n.value=c.value>0,t.value=!1},x=()=>{n.value=c.value>0,y()};return he(u,"mousedown",d),he(u,"mousemove",g),he(u,"click",p),he(u,"mouseup",p),he(u,"mouseleave",x),r.onBeforeUnmount(y),(O,E)=>(r.openBlock(),r.createElementBlock("div",du,[v.value.draw?(r.openBlock(),r.createBlock(cu,{key:0,width:v.value.width,height:v.value.height,x:v.value.x,y:v.value.y},null,8,["width","height","x","y"])):r.createCommentVNode("",!0)],512))}}),hi={input:En,default:Nn,output:Sn},vi={default:Tt,straight:At,step:Dt,smoothstep:tt,simplebezier:It},vu=e=>typeof e!="undefined",mu=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ge.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:we.Bezier,connectionLineOptions:{type:we.Bezier,style:{}},connectionMode:_e.Loose,connectionStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:Nl(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,vueFlowVersion:"0.4.40"});var mi=e=>{const t=mu();return e&&Object.keys(e).forEach(n=>{const o=e[n];vu(o)&&(t[n]=o)}),t},gu=(e,t)=>{const n=k=>{e.hooks.updateNodeInternals.trigger(k)},o=r.ref();e.hooks.paneReady.on(({id:k})=>{o.value=gi(k)});const i=async()=>new Promise(k=>{o.value?k(o.value):Fe(o).not.toBeUndefined().then(()=>k(o.value))}),a=(k,_,M)=>{const P=[];k.forEach($=>{var G,q,ie,ke;const D={id:$.id,type:"position",dragging:M,from:$.from};if(_&&(D.computedPosition=$.position,D.position=$.position,$.parentNode)){const Ne=t.getNode.value($.parentNode);D.position={x:D.position.x-((q=(G=Ne==null?void 0:Ne.computedPosition)==null?void 0:G.x)!=null?q:0),y:D.position.y-((ke=(ie=Ne==null?void 0:Ne.computedPosition)==null?void 0:ie.y)!=null?ke:0)}}P.push(D)}),P!=null&&P.length&&e.hooks.nodesChange.trigger(P)},s=k=>{if(!e.vueFlowRef)return;const _=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!_)return;const M=k.reduce((P,$)=>{const D=t.getNode.value($.id);if(D){const G=We($.nodeElement),q=window.getComputedStyle(_),{m22:ie}=new window.DOMMatrixReadOnly(q.transform);(!!(G.width&&G.height&&(D.dimensions.width!==G.width||D.dimensions.height!==G.height))||$.forceUpdate)&&(D.handleBounds.source=ao(".source",$.nodeElement,ie),D.handleBounds.target=ao(".target",$.nodeElement,ie),D.dimensions=G,P.push({id:D.id,type:"dimensions",dimensions:G}))}return P},[]);M.length&&e.hooks.nodesChange.trigger(M)},l=(k,_)=>{const M=k.map($=>$.id);let P;e.multiSelectionActive?P=M.map($=>bt($,_)):P=uo(e.nodes,M),P.length&&e.hooks.nodesChange.trigger(P)},u=(k,_)=>{const M=k.map($=>$.id);let P;e.multiSelectionActive?P=M.map($=>bt($,_)):P=uo(e.edges,M),P.length&&e.hooks.edgesChange.trigger(P)},c=k=>{l(k,!0)},f=k=>{u(k,!0)},m=k=>{c(k.filter(ve)),f(k.filter(qe))},v=k=>{l(k,!1)},y=k=>{u(k,!1)},d=k=>{k?(k.nodes&&v(k.nodes.filter(ve)),k.edges&&y(k.edges.filter(qe))):(v([]),y([]))},g=k=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([k,e.maxZoom]),e.minZoom=k},p=k=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([e.minZoom,k]),e.maxZoom=k},x=k=>{var _;(_=e.d3Zoom)==null||_.translateExtent(k),e.translateExtent=k},O=async k=>{if(e.nodeExtent=k,o.value){const _=t.getNodes.value.map(M=>M.id);n(_)}},E=k=>{e.nodesDraggable=k,e.nodesConnectable=k,e.elementsSelectable=k},w=(k,_)=>{if(!e.initialized&&!k.length)return;e.nodes||(e.nodes=[]);const M=k instanceof Function?k(e.nodes):k;e.nodes=co(M,t.getNode.value,e.nodes,_!=null?_:e.nodeExtent)},C=k=>{if(!e.initialized&&!k.length)return;const _=k instanceof Function?k(e.edges):k;e.edges=_.reduce((M,P)=>{const $=t.getNode.value(P.source),D=t.getNode.value(P.target),G=!$||typeof $=="undefined",q=!D||typeof D=="undefined";if(G&&console.warn(`[vue-flow]: Couldn't create edge for source id: ${P.source}; edge id: ${P.id}`),q&&console.warn(`[vue-flow]: Couldn't create edge for target id: ${P.target}; edge id: ${P.id}`),G||q)return M;const ie=t.getEdge.value(P.id);return M.push(r.shallowReactive({...xn(P,Object.assign({},ie,e.defaultEdgeOptions)),sourceNode:$,targetNode:D})),M},[])},S=(k,_)=>{if(!e.initialized&&!k.length||!k)return;const M=k instanceof Function?k([...e.nodes,...e.edges]):k;w(M.filter(zt),_),C(M.filter(se))},z=(k,_)=>{const M=k instanceof Function?k(e.nodes):k,$=co(M,t.getNode.value,e.nodes,_!=null?_:e.nodeExtent).map(lo);$.length&&e.hooks.nodesChange.trigger($)},T=k=>{const M=(k instanceof Function?k(e.edges):k).reduce((P,$)=>{const D=Hl({...$,...e.defaultEdgeOptions},e.edges);if(D){const G=t.getNode.value(D.source),q=t.getNode.value(D.target),ie=!G||typeof G=="undefined",ke=!q||typeof q=="undefined";if(ie&&console.warn(`[vueflow]: Couldn't create edge for source id: ${D.source}; edge id: ${D.id}`),ke&&console.warn(`[vueflow]: Couldn't create edge for target id: ${D.target}; edge id: ${D.id}`),ke||ie)return P;P.push(lo(r.shallowReactive({...D,sourceNode:G,targetNode:q})))}return P},[]);M.length&&e.hooks.edgesChange.trigger(M)},H=(k,_=!0)=>{const M=k instanceof Function?k(e.nodes):k,P=[],$=[];M.forEach(D=>{if(P.push(Xt(typeof D=="string"?D:D.id)),_){const G=j([typeof D=="string"?{id:D}:D],e.edges);$.push(...G.map(q=>Xt(q.id)))}}),P.length&&e.hooks.nodesChange.trigger(P),$.length&&e.hooks.edgesChange.trigger($)},X=k=>{const _=k instanceof Function?k(e.edges):k,M=[];_.forEach(P=>{M.push(Xt(typeof P=="string"?P:P.id))}),e.hooks.edgesChange.trigger(M)},L=r.computed(()=>e.nodes.map(k=>k.id)),Y=r.computed(()=>e.edges.map(k=>k.id)),I=k=>e.nodes&&!L.value.length?e.nodes.find(_=>_.id===k):e.nodes[L.value.indexOf(k)],h=k=>e.edges&&!Y.value.length?e.edges.find(_=>_.id===k):e.edges[Y.value.indexOf(k)],N=(k,_)=>Fl(k,_,e.edges),b=k=>Ke(k,e.nodes),B=k=>Ke(k,e.edges),A=(k,_,M)=>{e.connectionStartHandle=k,_&&(e.connectionPosition=_),e.hooks.connectStart.trigger({event:M,nodeId:k.nodeId,handleId:k.handleId,handleType:k.type})},V=k=>{e.connectionPosition=k},R=k=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStartHandle=null,e.hooks.connectEnd.trigger(k)},Z=k=>{var $,D;const _=k instanceof Function?k(e):k,M=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"];typeof _.modelValue!="undefined"&&S(_.modelValue,($=_.nodeExtent)!=null?$:e.nodeExtent),typeof _.nodes!="undefined"&&w(_.nodes,(D=_.nodeExtent)!=null?D:e.nodeExtent),typeof _.edges!="undefined"&&C(_.edges);const P=()=>{typeof _.maxZoom!="undefined"&&p(_.maxZoom),typeof _.minZoom!="undefined"&&g(_.minZoom),typeof _.translateExtent!="undefined"&&x(_.translateExtent),typeof _.nodeExtent!="undefined"&&O(_.nodeExtent)};Object.keys(_).forEach(G=>{const q=_[G];!M.includes(G)&&Vl(q)&&(e[G]=q)}),e.d3Zoom?P():Fe(()=>e.d3Zoom).not.toBeUndefined().then(P),e.initialized||(e.initialized=!0)};return{updateNodePositions:a,updateNodeDimensions:s,setElements:S,setNodes:w,setEdges:C,addNodes:z,addEdges:T,removeNodes:H,removeEdges:X,findNode:I,findEdge:h,updateEdge:N,applyEdgeChanges:B,applyNodeChanges:b,addSelectedElements:m,addSelectedNodes:c,addSelectedEdges:f,setMinZoom:g,setMaxZoom:p,setTranslateExtent:x,setNodeExtent:O,removeSelectedElements:d,removeSelectedNodes:v,removeSelectedEdges:y,startConnection:A,updateConnection:V,endConnection:R,setInteractive:E,setState:Z,fitView:async(k={padding:.1})=>{const{fitView:_}=await i();_(k)},zoomIn:async k=>{const{zoomIn:_}=await i();_(k)},zoomOut:async k=>{const{zoomOut:_}=await i();_(k)},zoomTo:async(k,_)=>{const{zoomTo:M}=await i();M(k,_)},setTransform:async(k,_)=>{const{setTransform:M}=await i();M(k,_)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(k,_,M)=>{const{setCenter:P}=await i();P(k,_,M)},fitBounds:async(k,_)=>{const{fitBounds:M}=await i();M(k,_)},project:k=>bn(k,e.viewport,e.snapToGrid,e.snapGrid),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:n,$reset:()=>{Z(mi())},$destroy:()=>{}}},pu=e=>{const t=r.computed(()=>e.nodes.map(d=>d.id)),n=r.computed(()=>e.edges.map(d=>d.id)),o=r.computed(()=>d=>e.nodes&&!t.value.length?e.nodes.find(g=>g.id===d):e.nodes[t.value.indexOf(d)]),i=r.computed(()=>d=>e.edges&&!n.value.length?e.edges.find(g=>g.id===d):e.edges[n.value.indexOf(d)]),a=r.computed(()=>{var p;const d={...vi,...e.edgeTypes},g=Object.keys(d);return(p=e.edges)==null||p.forEach(x=>x.type&&!g.includes(x.type)&&(d[x.type]=x.type)),d}),s=r.computed(()=>{var p;const d={...hi,...e.nodeTypes},g=Object.keys(d);return(p=e.nodes)==null||p.forEach(x=>x.type&&!g.includes(x.type)&&(d[x.type]=x.type)),d}),l=r.computed(()=>{const d=e.nodes.filter(g=>!g.hidden);return e.onlyRenderVisibleElements?d&&kn(d,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):d!=null?d:[]}),u=(d,g,p)=>{if(g=g!=null?g:o.value(d.source),p=p!=null?p:o.value(d.target),!g||!p){e.edges=e.edges.filter(x=>x.id!==d.id),console.warn(`[vue-flow]: Orphaned edge ${d.id} removed.`);return}return!d.hidden&&p&&!p.hidden&&g&&!g.hidden&&g.dimensions.width&&g.dimensions.height&&p.dimensions.width&&p.dimensions.height},c=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(d=>{const g=o.value(d.source),p=o.value(d.target);return u(d,g,p)&&Tl({sourcePos:g.computedPosition||{x:0,y:0},targetPos:p.computedPosition||{x:0,y:0},sourceWidth:g.dimensions.width,sourceHeight:g.dimensions.height,targetWidth:p.dimensions.width,targetHeight:p.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(d=>u(d))),f=r.computed(()=>[...l.value,...c.value]),m=r.computed(()=>e.nodes.filter(d=>d.selected)),v=r.computed(()=>e.edges.filter(d=>d.selected)),y=r.computed(()=>{var d,g;return[...(d=m.value)!=null?d:[],...(g=v.value)!=null?g:[]]});return{getNode:o,getEdge:i,getElements:f,getEdgeTypes:a,getNodeTypes:s,getEdges:c,getNodes:l,getSelectedElements:y,getSelectedNodes:m,getSelectedEdges:v}};class pe{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return pe.instance||(pe.instance=new pe),pe.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=mi(n),i=r.reactive(o),a=pu(i),s=gu(i,a),l={};Object.entries(i.hooks).forEach(([f,m])=>{const v=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;l[v]=m.on});const u={};Object.entries(i.hooks).forEach(([f,m])=>{u[f]=m.trigger}),s.setState(i),n&&(n.modelValue&&s.setElements(n.modelValue),n.nodes&&s.setNodes(n.nodes),n.edges&&s.setEdges(n.edges));const c={...l,...a,...s,...r.toRefs(i),emits:u,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,c),c}getId(){return`vue-flow-${this.currentId++}`}}var K=e=>{const t=pe.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,s=!1;if(n){const l=r.inject(ln,null);typeof l!="undefined"&&l!==null&&(a=l)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const l=o!=null?o:t.getId();a=t.create(l,e),n&&(s=!0)}else e&&a.setState(e);if(!a)throw new Error("[vueflow]: store instance not found.");return n&&(r.provide(ln,a),n.vueFlowId=a.id,s&&Qe(()=>{t.get(a.id)&&a.$destroy(),a=null})),a};const Yt=(e,t,n,o,i,a,s,l,u)=>{var y,d;const c=s.elementFromPoint(e.clientX,e.clientY),f=(c==null?void 0:c.classList.contains("target"))||!1,m=(c==null?void 0:c.classList.contains("source"))||!1,v={elementBelow:c,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(f||m)&&(v.isHoveringHandle=!0,t===_e.Strict?n&&m||!n&&f:!0)){const p=(y=c.getAttribute("data-nodeid"))!=null?y:"",x=(d=c.getAttribute("data-handleid"))!=null?d:"",O=n?p:o,E=n?x:i,w=n?o:p,S={source:O,sourceHandle:E,target:w,targetHandle:n?i:x};v.connection=S,v.isValid=(He(a)?a(S,{edges:l,sourceNode:u(O),targetNode:u(w)}):!0)||!v.connection.target||!v.connection.source}return v},go=e=>{e==null||e.classList.remove("vue-flow__handle-valid"),e==null||e.classList.remove("vue-flow__handle-connecting")};var $n=()=>{const e=K(),t=r.toRef(e,"edges"),n=r.toRef(e,"connectOnClick"),o=r.toRef(e,"nodesConnectable"),i=r.toRef(e,"connectionStartHandle"),a=r.toRef(e,"connectionMode"),s=r.toRef(e,"emits"),l=r.toRef(e,"startConnection"),u=r.toRef(e,"updateConnection"),c=r.toRef(e,"endConnection"),f=r.toRef(e,"getNode"),m=r.toRef(e,"vueFlowRef");let v;return{onMouseDown:(g,p,x,O,E,w,C,S)=>{const z=oo(g.target);if(!z)return;let T=E;const H=f.value(x);if(H&&(typeof H.connectable=="undefined"?o.value:H.connectable)===!1)return;E||H&&(T=O?H.isValidSourcePos:H.isValidTargetPos);const X=z.elementFromPoint(g.clientX,g.clientY),L=X==null?void 0:X.classList.contains("target"),Y=X==null?void 0:X.classList.contains("source");if(!m.value||!L&&!Y&&!w)return;const I=w!=null?w:L?"target":"source",h=m.value.getBoundingClientRect();l.value({nodeId:x,handleId:p,type:I},{x:g.clientX-h.left,y:g.clientY-h.top},g);function N(B){u.value({x:B.clientX-h.left,y:B.clientY-h.top});const{connection:A,elementBelow:V,isValid:R,isHoveringHandle:Z}=Yt(B,a.value,O,x,p,T,z,t.value,f.value);if(!Z)return go(v);!(A.source===A.target)&&V&&(v=V,V.classList.add("vue-flow__handle-connecting"),V.classList.toggle("vue-flow__handle-valid",R))}function b(B){const{connection:A,isValid:V}=Yt(B,a.value,O,x,p,T,z,t.value,f.value),R=A.source===A.target;V&&!R&&(C?C(A):s.value.connect(A)),w&&(S==null||S()),go(v),c.value(B),z.removeEventListener("mousemove",N),z.removeEventListener("mouseup",b)}z.addEventListener("mousemove",N),z.addEventListener("mouseup",b)},onClick:(g,p,x,O,E)=>{var w;if(!!n.value)if(!i.value)l.value({nodeId:x,type:O,handleId:p},void 0,g);else{let C=E!=null?E:()=>!0;const S=f.value(x);if(S&&(typeof S.connectable=="undefined"?o.value:S.connectable)===!1)return;E||S&&(C=(w=O!=="target"?S.isValidTargetPos:S.isValidSourcePos)!=null?w:()=>!0);const z=oo(g.target),{connection:T,isValid:H}=Yt(g,a.value,i.value.type==="target",i.value.nodeId,i.value.handleId||null,C,z,t.value,f.value),X=T.source===T.target;H&&!X&&s.value.connect(T),c.value(g)}}}},Oe=()=>typeof window!="undefined"?window:{chrome:!1};function po(e){const t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}var Ve=(e,t)=>{const n=Oe();let o=r.ref(!1);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),Pn(r.unref(e),i=>{po(i)||(i.preventDefault(),o.value=!0)},{eventName:"keydown"}),Pn(r.unref(e),i=>{po(i)||(i.preventDefault(),o.value=!1)},{eventName:"keyup"}),typeof n.addEventListener!="undefined"&&he(n,"blur",()=>{o.value=!1}),t&&typeof t=="function"&&t(o.value),o};const Gt=.1,Wt=(e,t=0)=>e.transition().duration(t),Se=async(e,t)=>{const n=Oe();return"screen"in n&&(await Fe(e).toMatch(({height:o,width:i})=>!isNaN(i)&&i>0&&!isNaN(o)&&o>0),t.length>0&&await Fe(t).toMatch(o=>!!o.filter(({dimensions:{width:i,height:a}})=>!isNaN(i)&&i>0&&!isNaN(a)&&a>0).length)),!0};var gi=e=>{const t=K({id:e}),n=r.toRef(t,"onPaneReady"),o=r.toRef(t,"nodes"),i=r.toRef(t,"d3Zoom"),a=r.toRef(t,"d3Selection"),s=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),u=r.toRef(t,"minZoom"),c=r.toRef(t,"maxZoom"),f=r.toRef(t,"viewport"),m=r.toRef(t,"snapToGrid"),v=r.toRef(t,"snapGrid"),y=r.toRef(t,"getNodes");let d=r.ref(!1);n.value(()=>d.value=!0);const g=async(w,C)=>{d.value||await Se(s.value,y.value),a.value&&i.value&&i.value.scaleTo(Wt(a.value,C==null?void 0:C.duration),w)},p=async(w,C)=>{d.value||await Se(s.value,y.value),a.value&&i.value&&i.value.scaleBy(Wt(a.value,C),w)},x=async w=>{await p(1.2,w==null?void 0:w.duration)},O=async w=>{await p(1/1.2,w==null?void 0:w.duration)},E=(w,C,S,z)=>{const{x:T,y:H}=wn({x:-w,y:-C},l.value),X=Bt.translate(-T,-H).scale(S);a.value&&i.value&&i.value.transform(Wt(a.value,z),X)};return{zoomIn:x,zoomOut:O,zoomTo:g,setTransform:async(w,C)=>{d.value||await Se(s.value,y.value),E(w.x,w.y,w.zoom,C==null?void 0:C.duration)},getTransform:()=>({x:f.value.x,y:f.value.y,zoom:f.value.zoom}),fitView:async(w={padding:Gt,includeHiddenNodes:!1,duration:0})=>{var X,L,Y;if(d.value||await Se(s.value,y.value),!y.value.length)return;let C=[];w.nodes&&(C=o.value.filter(I=>{var h;return(h=w.nodes)==null?void 0:h.includes(I.id)})),(!C||!C.length)&&(C=w.includeHiddenNodes?C:y.value);const S=Pt(C),{x:z,y:T,zoom:H}=un(S,s.value.width,s.value.height,(X=w.minZoom)!=null?X:u.value,(L=w.maxZoom)!=null?L:c.value,(Y=w.padding)!=null?Y:Gt,w.offset);E(z,T,H,w==null?void 0:w.duration)},setCenter:async(w,C,S)=>{d.value||await Se(s.value,y.value);const z=typeof(S==null?void 0:S.zoom)!="undefined"?S.zoom:c.value,T=s.value.width/2-w*z,H=s.value.height/2-C*z;E(T,H,z,S==null?void 0:S.duration)},fitBounds:async(w,C={padding:Gt})=>{d.value||await Se(s.value,y.value);const{x:S,y:z,zoom:T}=un(w,s.value.width,s.value.height,u.value,c.value,C.padding);E(S,z,T,C==null?void 0:C.duration)},project:w=>bn(w,f.value,m.value,v.value)}};function yo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function yu(e,t,n,o){return e.filter(i=>(i.selected||i.id===o)&&(!i.parentNode||!si(i,n))).map(i=>{var a,s;return r.markRaw({id:i.id,position:i.computedPosition||{x:0,y:0,z:0},distance:{x:t.x-((a=i.computedPosition)==null?void 0:a.x)||0,y:t.y-((s=i.computedPosition)==null?void 0:s.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function qt({id:e,dragItems:t,getNode:n}){const o=t.map(i=>({...n.value(i.id)}));return[e?o.find(i=>i.id===e):o[0],o]}function wu(e,t,n,o,i,a){const s={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&o){const[u,c]=o;s.x=u*Math.round(s.x/u),s.y=c*Math.round(s.y/c)}const l=xu(e,a,i);return e.position=l?wn(s,l):s,e}function xu(e,t,n){var i,a,s,l;let o=e.extent||t;if(e.extent==="parent"&&n)e.parentNode&&e.dimensions.width&&e.dimensions.height&&(o=n.computedPosition&&n.dimensions.width&&n.dimensions.height?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:o);else if(e.extent&&e.parentNode){const u=e.extent,c=(a=(i=n==null?void 0:n.computedPosition)==null?void 0:i.x)!=null?a:0,f=(l=(s=n==null?void 0:n.computedPosition)==null?void 0:s.y)!=null?l:0;o=[[u[0][0]+c,u[0][1]+f],[u[1][0]+c,u[1][1]+f]]}return o}function pi(e){const t=r.effectScope(),n=t.run(()=>{const o=K(),i=r.toRef(o,"viewport"),a=r.toRef(o,"snapToGrid"),s=r.toRef(o,"snapGrid"),l=r.toRef(o,"noDragClassName"),u=r.toRef(o,"nodes"),c=r.toRef(o,"nodeExtent"),f=r.toRef(o,"getNode"),m=r.toRef(o,"multiSelectionActive"),v=r.toRef(o,"nodesSelectionActive"),y=r.toRef(o,"selectNodesOnDrag"),d=r.toRef(o,"removeSelectedElements"),g=r.toRef(o,"addSelectedNodes"),p=r.toRef(o,"updateNodePositions"),x=e,O=r.toRef(x,"onStart"),E=r.toRef(x,"onDrag"),w=r.toRef(x,"onStop"),C=r.toRef(x,"el"),S=r.toRef(x,"disabled",!1),z=r.toRef(x,"id"),T=r.ref(!1);let H=r.ref(),X=r.ref({x:void 0,y:void 0}),L=r.ref();const Y=h=>(h!=null?h:a.value)?s.value:void 0,I=(h,N)=>{const b=h.sourceEvent.touches?h.sourceEvent.touches[0].clientX:h.sourceEvent.clientX,B=h.sourceEvent.touches?h.sourceEvent.touches[0].clientY:h.sourceEvent.clientY;return bn({x:b,y:B},i.value,!!N,N!=null?N:s.value)};return r.watch([()=>S.value,()=>C.value],()=>{if(C.value){const h=te(C.value),N=z.value?f.value(z.value):void 0;S.value?h.on(".drag",null):(L.value=Oa().on("start",b=>{!y.value&&!m.value&&z.value&&(N!=null&&N.selected||d.value()),N&&!S.value&&y.value&&li(N,m.value,g.value,d.value,v);const B=I(b,Y(N==null?void 0:N.snapGrid));if(H.value=yu(u.value,B,f.value,z.value),O.value&&H.value){const[A,V]=qt({id:z.value,dragItems:H.value,getNode:f});O.value(b.sourceEvent,A,V)}}).on("drag",b=>{const B=Y(N==null?void 0:N.snapGrid),A=I(b,B);if((X.value.x!==A.x||X.value.y!==A.y)&&H.value&&(X.value=A,H.value=H.value.map(V=>wu(V,A,!!B,B!=null?B:s.value,V.parentNode?f.value(V.parentNode):void 0,c.value)),p.value(H.value,!0,!0),T.value=!0,E.value)){const[V,R]=qt({id:z.value,dragItems:H.value,getNode:f});E.value(b.sourceEvent,V,R)}b.on("end",V=>{if(T.value=!1,w.value&&H.value){p.value(H.value,!1,!1);const[R,Z]=qt({id:z.value,dragItems:H.value,getNode:f});w.value(V.sourceEvent,R,Z)}})}).filter(b=>{const B=b.target;return!b.button&&(!l.value||!yo(B,`.${l.value}`,C)&&(!(N!=null&&N.dragHandle)||yo(B,N.dragHandle,C)))}),h.call(L.value))}}),T});return Qe(()=>t.stop()),n}const _u=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()});function bu(e,t){const n=_u();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const ku=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()});function Nu(e,t){const n=ku();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Eu(e){const t=e!=null?e:r.inject(ni,""),n=r.inject(oi,null),{findEdge:o}=K(),i=o(t);if(!i)throw new Error(`[vue-flow]: useEdge - Edge with id ${t} not found!`);return{id:t,edge:i,edgeEl:n}}function yi(e){const t=e!=null?e:r.inject(yn,""),n=r.inject(ti,null),{findNode:o,getEdges:i}=K(),a=o(t);if(!a)throw new Error(`[vue-flow]: useNode - Node with id ${t} not found!`);return{id:t,node:a,nodeEl:n,parentNode:a.parentNode?o(a.parentNode):void 0,connectedEdges:r.computed(()=>j([a],i.value))}}const Su={name:"SelectionPane",inheritAttrs:!1},Cu=r.defineComponent({...Su,setup(e){const{id:t,deleteKeyCode:n,selectionKeyCode:o,multiSelectionKeyCode:i,emits:a,nodesSelectionActive:s,userSelectionActive:l,multiSelectionActive:u,elementsSelectable:c,getNodes:f,getSelectedEdges:m,removeSelectedElements:v,removeNodes:y,removeEdges:d}=K(),g=S=>{a.paneClick(S),s.value=!1,v()},p=S=>a.paneContextMenu(S),x=S=>a.paneScroll(S),O=S=>a.paneMouseEnter(S),E=S=>a.paneMouseLeave(S),w=S=>a.paneMouseMove(S);Ve(n,S=>{if(!S)return;const z=f.value.reduce((T,H)=>((!H.selected&&H.parentNode&&T.find(X=>X.id===H.parentNode)||H.selected)&&T.push(H),T),[]);(z||m.value)&&(m.value.length>0&&d(m.value),z.length>0&&y(z),s.value=!1,v())}),Ve(i,S=>{u.value=S});const C=Ve(o,S=>{l.value&&S||(l.value=S&&c.value)});return(S,z)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.unref(C)?(r.openBlock(),r.createBlock(r.unref(hu),{key:`user-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),r.unref(s)?(r.openBlock(),r.createBlock(r.unref(lu),{key:`nodes-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),(r.openBlock(),r.createElementBlock("div",{key:`pane-${r.unref(t)}`,class:"vue-flow__pane vue-flow__container",onClick:g,onContextmenu:p,onWheel:x,onMouseenter:O,onMousemove:w,onMouseleave:E},null,32))],64))}}),Mu={class:"vue-flow__nodes vue-flow__container"},$u={name:"Nodes"},Bu=r.defineComponent({...$u,setup(e){const t=r.inject(Rt),n=K(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"elementsSelectable"),a=r.toRef(n,"nodesConnectable");r.toRef(n,"noPanClassName"),r.toRef(n,"snapToGrid"),r.toRef(n,"snapGrid"),r.toRef(n,"getNode");const s=r.toRef(n,"getNodes"),l=r.toRef(n,"getNodeTypes"),u=r.toRef(n,"updateNodeDimensions"),c=d=>typeof d=="undefined"?o.value:d,f=d=>typeof d=="undefined"?i.value:d,m=d=>typeof d=="undefined"?a.value:d,v=r.ref();r.onMounted(()=>{v.value=new ResizeObserver(d=>{const g=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));u.value(g)})}),r.onBeforeUnmount(()=>{var d;return(d=v.value)==null?void 0:d.disconnect()});const y=(d,g)=>{const p=d||"default";let x=g!=null?g:l.value[p];const O=r.getCurrentInstance();if(typeof x=="string"&&O){const w=Object.keys(O.appContext.components);w&&w.includes(p)&&(x=r.resolveComponent(p,!1))}if(typeof x!="string")return x;const E=t==null?void 0:t[`node-${p}`];return E!=null&&E({})?E:(console.warn(`[vueflow]: Node type "${d}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(d,g)=>(r.openBlock(),r.createElementBlock("div",Mu,[v.value?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(s.value,p=>(r.openBlock(),r.createBlock(r.unref(Yl),{id:p.id,key:p.id,"resize-observer":v.value,type:y(p.type,p.template),name:p.type||"default",draggable:c(p.draggable),selectable:f(p.selectable),connectable:m(p.connectable),node:p},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","node"]))),128)):r.createCommentVNode("",!0)]))}}),Ru=["id","markerWidth","markerHeight","markerUnits","orient"],zu=["stroke","stroke-width","fill"],Ou=["stroke","stroke-width"],Pu={name:"MarkerType"},Tu=r.defineComponent({...Pu,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type==="arrowclosed"?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,zu)):r.createCommentVNode("",!0),e.type==="arrow"?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Ou)):r.createCommentVNode("",!0)],8,Ru))}}),Iu={name:"MarkerDefinitions"},Du=r.defineComponent({...Iu,setup(e){const t=K(),n=r.toRef(t,"edges"),o=r.toRef(t,"connectionLineOptions"),i=r.toRef(t,"defaultMarkerColor"),a=r.computed(()=>{const s=[],l=[],u=c=>{if(c){const f=me(c);s.includes(f)||(typeof c=="object"?l.push({...c,id:f,color:c.color||i.value}):l.push({id:f,color:i.value,type:c}),s.push(f))}};return[o.value.markerEnd,o.value.markerStart].forEach(u),n.value.reduce((c,f)=>([f.markerStart,f.markerEnd].forEach(u),c.sort((m,v)=>m.id.localeCompare(v.id))),l),l});return(s,l)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(a),u=>(r.openBlock(),r.createBlock(Tu,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Au={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Vu={name:"Edges"},Hu=r.defineComponent({...Vu,setup(e){const t=r.inject(Rt),n=K(),o=r.toRef(n,"emits"),i=r.toRef(n,"connectionMode"),a=r.toRef(n,"edgeUpdaterRadius"),s=r.toRef(n,"onPaneReady"),l=r.toRef(n,"connectionStartHandle"),u=r.toRef(n,"nodesConnectable"),c=r.toRef(n,"edgesUpdatable"),f=r.toRef(n,"elementsSelectable"),m=r.toRef(n,"getSelectedNodes"),v=r.toRef(n,"nodesSelectionActive"),y=r.toRef(n,"getNode");r.toRef(n,"getNodes");const d=r.toRef(n,"getEdges"),g=r.toRef(n,"getEdgeTypes"),p=r.toRef(n,"addSelectedEdges"),x=r.toRef(n,"noPanClassName"),O=r.toRef(n,"elevateEdgesOnSelect"),E=_=>typeof _=="undefined"?f.value:_,w=_=>typeof _=="undefined"?c.value:_,C=r.ref(),S=ht(()=>{var _;return(_=l.value)==null?void 0:_.nodeId},()=>{var _;return(_=l.value)!=null&&_.nodeId?y.value(l.value.nodeId):!1}),z=ht(()=>{var _;return(_=l.value)==null?void 0:_.nodeId},()=>{var _,M;return!!(S.value&&(typeof S.value.connectable=="undefined"?u.value:S.value.connectable)&&((_=l.value)==null?void 0:_.nodeId)&&((M=l.value)==null?void 0:M.type))}),T=r.ref({});let H=r.ref([]),X=r.effectScope();s.value(()=>{X||(X=r.effectScope()),X.run(()=>{r.watch([m,d],()=>{d.value.forEach(_=>{T.value[_.id]||(T.value[_.id]=Nu(_,o.value))}),O.value?r.nextTick(()=>H.value=Il(d.value,y.value)):H.value=[{isMaxLevel:!0,edges:d.value,level:0}]},{immediate:!0})})}),r.onBeforeUnmount(()=>{X==null||X.stop(),X=null});const L=(_,M)=>{const P=_||"default";let $=M!=null?M:g.value[P];const D=r.getCurrentInstance();if(typeof $=="string"&&D){const q=Object.keys(D.appContext.components);q&&q.includes(P)&&($=r.resolveComponent(P,!1))}if($&&typeof $!="string")return $;const G=t==null?void 0:t[`edge-${P}`];return G!=null&&G({})?G:(console.warn(`[vueflow]: Edge type "${_}" not found and no edge-slot detected. Using fallback type "default".`),!1)},Y=(_,M)=>{const P={event:_,edge:M};E(M.selectable)&&(v.value=!1,p.value([M])),T.value[M.id].emit.click(P)},I=(_,M)=>T.value[M.id].emit.contextMenu({event:_,edge:M}),h=(_,M)=>T.value[M.id].emit.doubleClick({event:_,edge:M}),N=(_,M)=>T.value[M.id].emit.mouseEnter({event:_,edge:M}),b=(_,M)=>T.value[M.id].emit.mouseMove({event:_,edge:M}),B=(_,M)=>T.value[M.id].emit.mouseLeave({event:_,edge:M}),A=(_,M)=>{C.value=M.id,Z(_,M,!0)},V=(_,M)=>{C.value=M.id,Z(_,M,!1)},{onMouseDown:R}=$n(),Z=(_,M,P)=>{var G;const $=P?M.target:M.source,D=(G=P?M.targetHandle:M.sourceHandle)!=null?G:"";T.value[M.id].emit.updateStart({event:_,edge:M}),R(_,D,$,P,void 0,P?"target":"source",q=>{_n(q,d.value)||T.value[M.id].emit.update({edge:M,connection:q})},()=>{T.value[M.id].emit.updateEnd({event:_,edge:M}),C.value=""})},W=_=>{const M=_.class instanceof Function?_.class(_):_.class;return[x.value,M]},k=_=>_.style instanceof Function?_.style(_):_.style;return(_,M)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(H.value,P=>(r.openBlock(),r.createElementBlock("svg",{key:P.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${P.level}`)},[P.isMaxLevel?(r.openBlock(),r.createBlock(Du,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(P.edges,$=>(r.openBlock(),r.createBlock(r.unref(nu),{id:$.id,key:$.id,type:L($.type,$.template),name:$.type||"default",source:$.source,target:$.target,"target-handle-id":$.targetHandle,"source-handle-id":$.sourceHandle,"source-node":y.value($.source),"target-node":y.value($.target),label:$.label,data:$.data,events:{...$.events,...T.value[$.id].on},animated:$.animated,selectable:E($.selectable),selected:$.selected,updatable:w($.updatable),updating:$.id===C.value,"label-style":$.labelStyle,"label-show-bg":$.labelShowBg,"label-bg-style":$.labelBgStyle,"label-bg-padding":$.labelBgPadding,"label-bg-border-radius":$.labelBgBorderRadius,"connection-mode":i.value,"edge-updater-radius":a.value,"marker-end":$.markerEnd,"marker-start":$.markerStart,style:r.normalizeStyle(k($)),class:r.normalizeClass(W($)),onClick:D=>Y(D,$),onDblclick:D=>h(D,$),onContextmenu:D=>I(D,$),onMouseenter:D=>N(D,$),onMousemove:D=>b(D,$),onMouseleave:D=>B(D,$),onSourceMousedown:D=>A(D,$),onTargetMousedown:D=>V(D,$)},null,8,["id","type","name","source","target","target-handle-id","source-handle-id","source-node","target-node","label","data","events","animated","selectable","selected","updatable","updating","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","connection-mode","edge-updater-radius","marker-end","marker-start","style","class","onClick","onDblclick","onContextmenu","onMouseenter","onMousemove","onMouseleave","onSourceMousedown","onTargetMousedown"]))),128))])],4))),128)),z.value&&!!S.value?(r.openBlock(),r.createElementBlock("svg",Au,[r.createVNode(au,{"source-node":S.value},null,8,["source-node"])])):r.createCommentVNode("",!0)],64))}}),Fu={name:"Transform"},Lu=r.defineComponent({...Fu,setup(e){const{id:t,viewport:n,dimensions:o,fitViewOnInit:i,emits:a,fitView:s,...l}=K(),u=async f=>{const m=Oe();return"screen"in m&&await Fe(f).toMatch(({height:v,width:y})=>!isNaN(y)&&y>0&&!isNaN(v)&&v>0),!0};let c=r.ref(!1);return r.onMounted(async()=>{await u(o.value),c.value=!0,a.paneReady({id:t,viewport:n,dimensions:o,fitViewOnInit:i,fitView:s,emits:a,...l}),i!=null&&i.value&&s()}),(f,m)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:c.value?void 0:0})},[r.createVNode(Hu),r.createVNode(Bu),r.renderSlot(f.$slots,"default")],4))}}),Zu={name:"Viewport"},Uu=r.defineComponent({...Zu,setup(e){const t=K(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultZoom"),s=r.toRef(t,"defaultPosition"),l=r.toRef(t,"translateExtent"),u=r.toRef(t,"dimensions"),c=r.toRef(t,"zoomActivationKeyCode"),f=r.toRef(t,"selectionKeyCode"),m=r.toRef(t,"panOnScroll"),v=r.toRef(t,"panOnScrollMode"),y=r.toRef(t,"panOnScrollSpeed"),d=r.toRef(t,"panOnDrag"),g=r.toRef(t,"zoomOnDoubleClick"),p=r.toRef(t,"zoomOnPinch"),x=r.toRef(t,"zoomOnScroll"),O=r.toRef(t,"preventScrolling"),E=r.toRef(t,"noWheelClassName"),w=r.toRef(t,"noPanClassName"),C=r.toRef(t,"setState"),S=r.toRef(t,"emits"),z=Eo("viewport",null);let T=r.ref(!1);const H=(h,N)=>h.x!==N.x&&!isNaN(N.x)||h.y!==N.y&&!isNaN(N.y)||h.zoom!==N.k&&!isNaN(N.k),X=h=>({x:h.x,y:h.y,zoom:h.k}),L=(h,N)=>h.target.closest(`.${N}`),Y=_t(a.value,o.value,i.value);let I=r.ref({...wn({x:s.value[0],y:s.value[1]},l.value),zoom:Y});return r.onMounted(()=>{Hi(z,()=>{if(!z.value)return;const{width:N,height:b}=We(z.value);u.value.width=N,u.value.height=b});const h=Oe();he(h,"resize",()=>{if(!z.value)return;const{width:N,height:b}=We(z.value);u.value.width=N,u.value.height=b})}),r.onMounted(()=>{const h=kl().scaleExtent([o.value,i.value]).translateExtent(l.value),N=te(z.value).call(h),b=N.on("wheel.zoom"),B=Bt.translate(I.value.x,I.value.y).scale(I.value.zoom);h.transform(N,B),C.value({d3Zoom:h,d3Selection:N,d3ZoomHandler:b,viewport:{x:B.x,y:B.y,zoom:B.k},viewportRef:z.value});const A=Ve(f.value,R=>{R&&!T.value?h.on("zoom",null):R||h.on("zoom",Z=>{C.value({viewport:{x:Z.transform.x,y:Z.transform.y,zoom:Z.transform.k}});const W=X(Z.transform);S.value.move({event:Z,flowTransform:W})})}),V=Ve(c.value);h.on("start",R=>{T.value=!0;const Z=X(R.transform);I.value=Z,S.value.moveStart({event:R,flowTransform:Z})}),h.on("end",R=>{if(T.value=!1,H(I.value,R.transform)){const Z=X(R.transform);I.value=Z,S.value.moveEnd({event:R,flowTransform:Z})}}),r.watchEffect(()=>{m.value&&!V.value?N.on("wheel",R=>{var M;if(L(R,(M=E.value)==null?void 0:M.value))return!1;R.preventDefault(),R.stopImmediatePropagation();const Z=N.property("__zoom").k||1;if(R.ctrlKey&&p.value){const P=re(R),$=-R.deltaY*(R.deltaMode===1?.05:R.deltaMode?1:.002)*10,D=Z*2**$;h.scaleTo(N,D,P);return}const W=R.deltaMode===1?20:1,k=v.value===Ge.Vertical?0:R.deltaX*W,_=v.value===Ge.Horizontal?0:R.deltaY*W;h.translateBy(N,-(k/Z)*y.value,-(_/Z)*y.value)}).on("wheel.zoom",null):typeof b!="undefined"&&N.on("wheel",R=>{var Z;if(!O.value||L(R,(Z=E.value)==null?void 0:Z.value))return null;R.preventDefault()}).on("wheel.zoom",b)}),h.filter(R=>{const Z=V.value||x.value,W=p.value&&R.ctrlKey;return!d.value&&!Z&&!m.value&&!g.value&&!p.value||A.value||!g.value&&R.type==="dblclick"||L(R,E.value)&&R.type==="wheel"||L(R,w.value)&&R.type!=="wheel"||!p.value&&R.ctrlKey&&R.type==="wheel"||!Z&&!m.value&&!W&&R.type==="wheel"||!d.value&&(R.type==="mousedown"||R.type==="touchstart")?!1:(!R.ctrlKey||R.type==="wheel")&&!R.button})}),(h,N)=>(r.openBlock(),r.createElementBlock("div",{ref:"viewport",key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(Lu,null,{default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Cu)]))}}),Q=e=>typeof r.unref(e)!="undefined";var Xu=(e,t,n)=>{const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let d,g;d=Ee([e.modelValue,()=>{var p,x;return(x=(p=e.modelValue)==null?void 0:p.value)==null?void 0:x.length}],([p])=>{p&&Array.isArray(p)&&(g&&g.pause(),d&&d.pause(),n.setElements(p),g=Ee([n.edges,n.nodes,()=>n.edges.value.length,()=>n.nodes.value.length],([x,O])=>{d&&d.pause();const E=[...O,...x];E.length&&(e.modelValue.value=E),r.nextTick(()=>{d&&d.resume()})},{immediate:!0}),r.nextTick(()=>{g&&g.resume(),d&&d.resume()}))},{immediate:!!(e.modelValue&&e.modelValue.value)})})},()=>{o.run(()=>{let d,g;d=Ee([e.nodes,()=>{var p,x;return(x=(p=e.nodes)==null?void 0:p.value)==null?void 0:x.length}],async([p])=>{p&&Array.isArray(p)&&(g&&g.pause(),d&&d.pause(),n.setNodes(p),g=Ee(()=>n.nodes.value.length,()=>{n.nodes.value.length&&(e.nodes.value=[...n.nodes.value])},{immediate:!0}),r.nextTick(()=>{g&&g.resume(),d&&d.resume()}))},{immediate:!!(e.nodes&&e.nodes.value)})})},()=>{o.run(()=>{let d,g;d=Ee([e.edges,()=>{var p,x;return(x=(p=e.edges)==null?void 0:p.value)==null?void 0:x.length}],async([p])=>{p&&Array.isArray(p)&&(g&&g.pause(),d&&d.pause(),n.setEdges(p),g=Ee(()=>n.edges.value.length,()=>{n.edges.value.length&&(e.edges.value=[...n.edges.value])},{immediate:!0}),r.nextTick(()=>{g&&g.resume(),d&&d.resume()}))},{immediate:!!(e.edges&&e.edges.value)})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&Q(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:Q(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&Q(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:Q(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&Q(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:Q(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&Q(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:Q(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{Q(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:Q(t.applyDefault)}),r.watch(n.applyDefault,(d,g,p)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),p(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const d=async g=>{let p=g;He(t.autoConnect)&&(p=await t.autoConnect(g)),p!==!1&&n.addEdges([p])};r.watch(()=>t.autoConnect,()=>{Q(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:Q(t.autoConnect)}),r.watch(n.autoConnect,(g,p,x)=>{g?n.onConnect(d):n.hooks.value.connect.off(d),x(()=>{n.hooks.value.connect.off(d)})},{immediate:!0})})},()=>{const d=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(g=>{if(!d.includes(g)){const p=r.toRef(t,g),x=n[g];o.run(()=>{r.watch(p,()=>{Q(p)&&(x.value=p.value)},{immediate:Q(p)})})}})}].forEach(d=>d())}),()=>o.stop()};const Yu={name:"VueFlow"},Gu=r.defineComponent({...Yu,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=lt(o,"modelValue",n),a=lt(o,"nodes",n),s=lt(o,"edges",n),{vueFlowRef:l,id:u,hooks:c,getNodeTypes:f,getEdgeTypes:m,$reset:v,...y}=K({id:o.id}),d=Xu({modelValue:i,nodes:a,edges:s},o,{vueFlowRef:l,id:u,hooks:c,getNodeTypes:f,getEdgeTypes:m,$reset:v,...y}),g=r.ref();return r.onUnmounted(()=>{d()}),r.onMounted(()=>{l.value=g.value}),El(n,c),r.provide(Rt,r.useSlots()),t({vueFlowRef:l,id:u,hooks:c,getNodeTypes:f,getEdgeTypes:m,$reset:v,...y}),(p,x)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:g,class:"vue-flow"},[r.createVNode(Uu,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(f)),O=>r.renderSlot(p.$slots,`node-${O}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(m)),O=>r.renderSlot(p.$slots,`edge-${O}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(p.$slots,"connection-line")]),default:r.withCtx(()=>[r.renderSlot(p.$slots,"zoom-pane")]),_:3}),r.renderSlot(p.$slots,"default")],512))}}),Vt=function({position:{x:e,y:t},dimensions:{height:n,width:o},strokeWidth:i,strokeColor:a,borderRadius:s,color:l,shapeRendering:u="geometricPrecision"},{attrs:c,emit:f,slots:m}){var y,d;const v=(y=c.style)!=null?y:{};return[r.h("rect",{class:["vue-flow__minimap-node",c.class].join(" "),style:v,x:e,y:t,rx:s,ry:s,width:o,height:n,fill:l||v.background||v.backgroundColor,stroke:a,strokeWidth:i,shapeRendering:u,onClick:g=>f("click",g),onDblClick:g=>f("dblclick",g),onMouseenter:g=>f("mouseenter",g),onMousemove:g=>f("mousemove",g),onMouseleave:g=>f("mouseleave",g)}),(d=m==null?void 0:m.default)==null?void 0:d.call(m)]};Vt.props=["position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering"];Vt.emits=["click","dblclick","mouseenter","mousemove","mouseleave"];const Wu=["width","height","viewBox"],qu=["d","fill"],Ku={name:"MiniMap"},ju=r.defineComponent({...Ku,props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:null,nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"},width:null,height:null},emits:["nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=r.useAttrs(),o=Oe(),i=200,a=150,s=K(),l=r.toRef(s,"edges"),u=r.toRef(s,"viewport"),c=r.toRef(s,"dimensions"),f=r.toRef(s,"emits"),m=r.toRef(s,"getNodes"),v=r.computed(()=>{var L,Y,I;return(I=(Y=e.width)!=null?Y:(L=n.style)==null?void 0:L.width)!=null?I:i}),y=r.computed(()=>{var L,Y,I;return(I=(Y=e.height)!=null?Y:(L=n.style)==null?void 0:L.height)!=null?I:a}),d=e.nodeColor instanceof Function?e.nodeColor:()=>e.nodeColor,g=e.nodeStrokeColor instanceof Function?e.nodeStrokeColor:()=>e.nodeStrokeColor,p=e.nodeClassName instanceof Function?e.nodeClassName:()=>e.nodeClassName,x=typeof o=="undefined"||!!o.chrome?"crispEdges":"geometricPrecision",O=r.computed(()=>Pt(m.value)),E=r.computed(()=>({x:-u.value.x/u.value.zoom,y:-u.value.y/u.value.zoom,width:c.value.width/u.value.zoom,height:c.value.height/u.value.zoom})),w=ht(E,()=>{const L=m.value&&m.value.length?Rl(O.value,E.value):E.value,Y=L.width/v.value,I=L.height/y.value,h=Math.max(Y,I),N=h*v.value,b=h*y.value,B=5*h;return{offset:B,x:L.x-(N-L.width)/2-B,y:L.y-(b-L.height)/2-B,width:N+B*2,height:b+B*2}}),C=ht(w,()=>w.value.x&&w.value.y?`
    M${w.value.x-w.value.offset},${w.value.y-w.value.offset}
    h${w.value.width+w.value.offset*2}
    v${w.value.height+w.value.offset*2}
    h${-w.value.width-w.value.offset*2}z
    M${E.value.x},${E.value.y}
    h${E.value.width}
    v${E.value.height}
    h${-E.value.width}z`:""),S=(L,Y)=>{const I={event:L,node:Y,connectedEdges:j([Y],l.value)};f.value.miniMapNodeClick(I),t("nodeClick",I)},z=(L,Y)=>{const I={event:L,node:Y,connectedEdges:j([Y],l.value)};f.value.miniMapNodeDoubleClick(I),t("nodeDblclick",I)},T=(L,Y)=>{const I={event:L,node:Y,connectedEdges:j([Y],l.value)};f.value.miniMapNodeMouseEnter(I),t("nodeMouseenter",I)},H=(L,Y)=>{const I={event:L,node:Y,connectedEdges:j([Y],l.value)};f.value.miniMapNodeMouseMove(I),t("nodeMousemove",I)},X=(L,Y)=>{const I={event:L,node:Y,connectedEdges:j([Y],l.value)};f.value.miniMapNodeMouseLeave(I),t("nodeMouseleave",I)};return(L,Y)=>(r.openBlock(),r.createElementBlock("svg",{width:v.value,height:y.value,viewBox:[w.value.x,w.value.y,w.value.width,w.value.height].join(" "),class:"vue-flow__minimap"},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(m.value,I=>(r.openBlock(),r.createBlock(r.unref(Vt),{id:I.id,key:I.id,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(p)(I)),color:r.unref(d)(I),"border-radius":e.nodeBorderRadius,"stroke-color":r.unref(g)(I),"stroke-width":e.nodeStrokeWidth,"shape-rendering":r.unref(x),onClick:h=>S(h,I),onDblclick:h=>z(h,I),onMouseenter:h=>T(h,I),onMousemove:h=>H(h,I),onMouseleave:h=>X(h,I)},{default:r.withCtx(()=>[r.renderSlot(L.$slots,`node-${I.type}`,{id:I.id,parentNode:I.parentNode,selected:I.selected,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(p)(I)),color:r.unref(d)(I),borderRadius:e.nodeBorderRadius,strokeColor:r.unref(g)(I),strokeWidth:e.nodeStrokeWidth,shapeRendering:r.unref(x)})]),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),r.createElementVNode("path",{class:"vue-flow__minimap-mask",d:r.unref(C),fill:e.maskColor,"fill-rule":"evenodd"},null,8,qu)],8,Wu))}});var Qu=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const Ju={name:"ControlButton"},ec={class:"vue-flow__controls-button"};function tc(e,t,n,o,i,a){return r.openBlock(),r.createElementBlock("button",ec,[r.renderSlot(e.$slots,"default")])}var Ae=Qu(Ju,[["render",tc]]);const nc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},oc=r.createElementVNode("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),ic=[oc];function rc(e,t){return r.openBlock(),r.createElementBlock("svg",nc,ic)}var ac={render:rc};const sc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lc=r.createElementVNode("path",{d:"M0 0h32v4.2H0z"},null,-1),uc=[lc];function cc(e,t){return r.openBlock(),r.createElementBlock("svg",sc,uc)}var dc={render:cc};const fc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},hc=r.createElementVNode("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),vc=[hc];function mc(e,t){return r.openBlock(),r.createElementBlock("svg",fc,vc)}var gc={render:mc};const pc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},yc=r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),wc=[yc];function xc(e,t){return r.openBlock(),r.createElementBlock("svg",pc,wc)}var _c={render:xc};const bc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},kc=r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Nc=[kc];function Ec(e,t){return r.openBlock(),r.createElementBlock("svg",bc,Nc)}var Sc={render:Ec};const Cc={class:"vue-flow__controls"},Mc={name:"Controls"},$c=r.defineComponent({...Mc,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=K(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"elementsSelectable"),s=r.toRef(n,"setInteractive"),l=r.toRef(n,"zoomIn"),u=r.toRef(n,"zoomOut"),c=r.toRef(n,"fitView"),f=r.computed(()=>o.value&&i.value&&a.value),m=()=>{l.value(),t("zoomIn")},v=()=>{u.value(),t("zoomOut")},y=()=>{c.value(e.fitViewParams),t("fitView")},d=()=>{s.value(!f.value),t("interactionChange",!f.value)};return(g,p)=>(r.openBlock(),r.createElementBlock("div",Cc,[r.renderSlot(g.$slots,"top"),e.showZoom?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.renderSlot(g.$slots,"control-zoom-in",{},()=>[r.createVNode(Ae,{class:"vue-flow__controls-zoomin",onClick:m},{default:r.withCtx(()=>[r.renderSlot(g.$slots,"icon-zoom-in",{},()=>[r.createVNode(r.unref(ac))])]),_:3})]),r.renderSlot(g.$slots,"control-zoom-out",{},()=>[r.createVNode(Ae,{class:"vue-flow__controls-zoomout",onClick:v},{default:r.withCtx(()=>[r.renderSlot(g.$slots,"icon-zoom-out",{},()=>[r.createVNode(r.unref(dc))])]),_:3})])],64)):r.createCommentVNode("",!0),e.showFitView?r.renderSlot(g.$slots,"control-fit-view",{key:1},()=>[r.createVNode(Ae,{class:"vue-flow__controls-fitview",onClick:y},{default:r.withCtx(()=>[r.renderSlot(g.$slots,"icon-fit-view",{},()=>[r.createVNode(r.unref(gc))])]),_:3})]):r.createCommentVNode("",!0),e.showInteractive?r.renderSlot(g.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(r.openBlock(),r.createBlock(Ae,{key:0,class:"vue-flow__controls-interactive",onClick:d},{default:r.withCtx(()=>[r.unref(f)?r.renderSlot(g.$slots,"icon-unlock",{key:0},()=>[r.createVNode(r.unref(Sc))]):r.createCommentVNode("",!0),r.unref(f)?r.createCommentVNode("",!0):r.renderSlot(g.$slots,"icon-lock",{key:1},()=>[r.createVNode(r.unref(_c))])]),_:3})):r.createCommentVNode("",!0)]):r.createCommentVNode("",!0),r.renderSlot(g.$slots,"default")]))}}),Bc=["x","y","width","height"],Rc=["stroke","stroke-width","d"],zc=["cx","cy","r","fill"],Oc={key:2,height:"100",width:"100"},Pc=["fill"],Tc=["x","y","fill"],Ic={name:"Background"},Dc=r.defineComponent({...Ic,props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},n=K(),o=r.toRef(n,"viewport"),i=r.computed(()=>{const u=e.gap&&e.gap*o.value.zoom,c=u&&o.value.x%u,f=u&&o.value.y%u,m=e.size*o.value.zoom;return{scaledGap:u,xOffset:c,yOffset:f,size:m}}),a=`pattern-${Math.floor(Math.random()*1e5)}`,s=r.computed(()=>e.patternColor||t[e.variant||"dots"]),l=r.computed(()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`);return(u,c)=>(r.openBlock(),r.createElementBlock("svg",{class:"vue-flow__background",style:r.normalizeStyle({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[r.renderSlot(u.$slots,"pattern-container",{id:a},()=>[r.createElementVNode("pattern",{id:a,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[r.renderSlot(u.$slots,"pattern",{},()=>[e.variant==="lines"?(r.openBlock(),r.createElementBlock("path",{key:0,stroke:r.unref(s),"stroke-width":e.size,d:r.unref(l)},null,8,Rc)):e.variant==="dots"?(r.openBlock(),r.createElementBlock("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:r.unref(s)},null,8,zc)):r.createCommentVNode("",!0),e.bgColor?(r.openBlock(),r.createElementBlock("svg",Oc,[r.createElementVNode("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,Pc)])):r.createCommentVNode("",!0)])],8,Bc)]),r.createElementVNode("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${a})`},null,8,Tc),r.renderSlot(u.$slots,"default",{id:a})],4))}});exports.Background=Dc;exports.BackgroundVariant=Jo;exports.BaseEdge=be;exports.BezierEdge=Tt;exports.ConnectionLineType=we;exports.ConnectionMode=_e;exports.ControlButton=Ae;exports.Controls=$c;exports.EdgeText=ui;exports.GlobalVueFlowStorage=pe;exports.Handle=je;exports.MarkerType=ei;exports.MiniMap=ju;exports.MiniMapNode=Vt;exports.NodeIdInjection=yn;exports.PanOnScrollMode=Ge;exports.Position=U;exports.SimpleBezierEdge=It;exports.SmoothStepEdge=tt;exports.StepEdge=Dt;exports.StraightEdge=At;exports.VueFlow=Gu;exports.VueFlowInjection=ln;exports.addEdge=$l;exports.applyChanges=Ke;exports.applyEdgeChanges=Dl;exports.applyNodeChanges=Al;exports.defaultEdgeTypes=vi;exports.defaultNodeTypes=hi;exports.getBezierCenter=ci;exports.getBezierPath=Cn;exports.getConnectedEdges=j;exports.getEdgeCenter=Mn;exports.getIncomers=Ml;exports.getMarkerId=me;exports.getNodesInside=kn;exports.getOutgoers=Cl;exports.getRectOfNodes=Pt;exports.getSimpleBezierCenter=fi;exports.getSimpleBezierPath=di;exports.getSmoothStepPath=Et;exports.getTransformForBounds=un;exports.graphPosToZoomedPos=zl;exports.isEdge=se;exports.isNode=zt;exports.updateEdge=Bl;exports.useEdge=Eu;exports.useHandle=$n;exports.useNode=yi;exports.useVueFlow=K;exports.useZoomPanHelper=gi;
