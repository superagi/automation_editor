var vueFlow=function(Y,r){"use strict";var Rn;const zn=typeof window!="undefined",xi=e=>typeof e!="undefined",Te=e=>typeof e=="function",_i=e=>typeof e=="string",Ft=()=>{};zn&&((Rn=window==null?void 0:window.navigator)==null?void 0:Rn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ne(e){return typeof e=="function"?e():r.unref(e)}function bi(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}const On=e=>e();function ki(e=On){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...a)=>{t.value&&e(...a)}}}function Pn(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Ni(e){return e}function ot(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const s=Te(t)?t:t.get,c=Te(t)?void 0:t.set,u=r.customRef((f,g)=>(o=f,i=g,{get(){return a.value&&(n=s(),a.value=!1),o(),n},set(m){c==null||c(m)}}));return Object.isExtensible(u)&&(u.trigger=l),u}function F(){const e=[],t=i=>{const a=e.indexOf(i);a!==-1&&e.splice(a,1)};return{on:i=>(e.push(i),{off:()=>t(i)}),off:t,trigger:i=>{e.forEach(a=>a(i))}}}function Ie(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function Tn(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function Lt(e,t=!1){function n(g,{flush:m="sync",deep:w=!1,timeout:d,throwOnTimeout:p}={}){let y=null;const O=[new Promise(E=>{y=r.watch(e,v=>{g(v)!==t&&(y==null||y(),E(v))},{flush:m,deep:w,immediate:!0})})];return d!=null&&O.push(Pn(d,p).then(()=>Ne(e)).finally(()=>y==null?void 0:y())),Promise.race(O)}function o(g,m){if(!r.isRef(g))return n(v=>v===g,m);const{flush:w="sync",deep:d=!1,timeout:p,throwOnTimeout:y}=m!=null?m:{};let x=null;const E=[new Promise(v=>{x=r.watch([e,g],([C,S])=>{t!==(C===S)&&(x==null||x(),v(C))},{flush:w,deep:d,immediate:!0})})];return p!=null&&E.push(Pn(p,y).then(()=>Ne(e)).finally(()=>(x==null||x(),Ne(e)))),Promise.race(E)}function i(g){return n(m=>Boolean(m),g)}function a(g){return o(null,g)}function l(g){return o(void 0,g)}function s(g){return n(Number.isNaN,g)}function c(g,m){return n(w=>{const d=Array.from(w);return d.includes(g)||d.includes(Ne(g))},m)}function u(g){return f(1,g)}function f(g=1,m){let w=-1;return n(()=>(w+=1,w>=g),m)}return Array.isArray(Ne(e))?{toMatch:n,toContains:c,changed:u,changedTimes:f,get not(){return Lt(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:u,changedTimes:f,get not(){return Lt(e,!t)}}}function De(e){return Lt(e)}var In=Object.getOwnPropertySymbols,Ei=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,Ci=(e,t)=>{var n={};for(var o in e)Ei.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&In)for(var o of In(e))t.indexOf(o)<0&&Si.call(e,o)&&(n[o]=e[o]);return n};function Mi(e,t,n={}){const o=n,{eventFilter:i=On}=o,a=Ci(o,["eventFilter"]);return r.watch(e,bi(i,t),a)}var $i=Object.defineProperty,Bi=Object.defineProperties,Ri=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,Dn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,Vn=(e,t,n)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zi=(e,t)=>{for(var n in t||(t={}))Dn.call(t,n)&&Vn(e,n,t[n]);if(it)for(var n of it(t))An.call(t,n)&&Vn(e,n,t[n]);return e},Oi=(e,t)=>Bi(e,Ri(t)),Pi=(e,t)=>{var n={};for(var o in e)Dn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&it)for(var o of it(e))t.indexOf(o)<0&&An.call(e,o)&&(n[o]=e[o]);return n};function Ee(e,t,n={}){const o=n,{eventFilter:i}=o,a=Pi(o,["eventFilter"]),{eventFilter:l,pause:s,resume:c,isActive:u}=ki(i);return{stop:Mi(e,t,Oi(zi({},a),{eventFilter:l})),pause:s,resume:c,isActive:u}}function Hn(e){var t;const n=Ne(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Zt=zn?window:void 0;function he(...e){let t,n,o,i;if(_i(e[0])?([n,o,i]=e,t=Zt):[t,n,o,i]=e,!t)return Ft;let a=Ft;const l=r.watch(()=>Hn(t),c=>{a(),c&&(c.addEventListener(n,o,i),a=()=>{c.removeEventListener(n,o,i),a=Ft})},{immediate:!0,flush:"post"}),s=()=>{l(),a()};return Ie(s),s}const Ti=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function Fn(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Zt,eventName:a="keydown",passive:l=!1}=o,s=Ti(t);return he(i,a,u=>{s(u)&&n(u)},l)}function Ln(e,t=null){const n=r.getCurrentInstance();let o=()=>{};const i=r.customRef((a,l)=>(o=l,{get(){var s,c;return a(),(c=(s=n==null?void 0:n.proxy)==null?void 0:s.$refs[e])!=null?c:t},set(){}}));return Tn(o),r.onUpdated(o),i}function Ii(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),Tn(o,t),n}function Di(e){return JSON.parse(JSON.stringify(e))}const Ut=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Xt="__vueuse_ssr_handlers__";Ut[Xt]=Ut[Xt]||{},Ut[Xt];var Zn=Object.getOwnPropertySymbols,Ai=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,Hi=(e,t)=>{var n={};for(var o in e)Ai.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Zn)for(var o of Zn(e))t.indexOf(o)<0&&Vi.call(e,o)&&(n[o]=e[o]);return n};function Fi(e,t,n={}){const o=n,{window:i=Zt}=o,a=Hi(o,["window"]);let l;const s=Ii(()=>i&&"ResizeObserver"in i),c=()=>{l&&(l.disconnect(),l=void 0)},u=r.watch(()=>Hn(e),g=>{c(),s.value&&i&&g&&(l=new ResizeObserver(t),l.observe(g,a))},{immediate:!0,flush:"post"}),f=()=>{c(),u()};return Ie(f),{isSupported:s,stop:f}}var Un;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Un||(Un={}));var Li=Object.defineProperty,Xn=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Ui=Object.prototype.propertyIsEnumerable,Yn=(e,t,n)=>t in e?Li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xi=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&Yn(e,n,t[n]);if(Xn)for(var n of Xn(t))Ui.call(t,n)&&Yn(e,n,t[n]);return e};Xi({linear:Ni},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function rt(e,t,n,o={}){var i,a,l;const{clone:s=!1,passive:c=!1,eventName:u,deep:f=!1,defaultValue:g}=o,m=r.getCurrentInstance(),w=n||(m==null?void 0:m.emit)||((i=m==null?void 0:m.$emit)==null?void 0:i.bind(m))||((l=(a=m==null?void 0:m.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(m==null?void 0:m.proxy));let d=u;t||(t="modelValue"),d=u||d||`update:${t.toString()}`;const p=x=>s?Te(s)?s(x):Di(x):x,y=()=>xi(e[t])?p(e[t]):g;if(c){const x=y(),O=r.ref(x);return r.watch(()=>e[t],E=>O.value=p(E)),r.watch(O,E=>{(E!==e[t]||f)&&w(d,E)},{deep:f}),O}else return r.computed({get(){return y()},set(x){w(d,x)}})}var Yi={value:()=>{}};function at(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new lt(n)}function lt(e){this._=e}function Gi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}lt.prototype=at.prototype={constructor:lt,on:function(e,t){var n=this._,o=Gi(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=Wi(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=Gn(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Gn(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Wi(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Gn(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Yi,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yt="http://www.w3.org/1999/xhtml",Wn={svg:"http://www.w3.org/2000/svg",xhtml:Yt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function st(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wn.hasOwnProperty(t)?{space:Wn[t],local:e}:e}function qi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yt&&t.documentElement.namespaceURI===Yt?t.createElement(e):t.createElementNS(n,e)}}function Ki(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qn(e){var t=st(e);return(t.local?Ki:qi)(t)}function ji(){}function Gt(e){return e==null?ji:function(){return this.querySelector(e)}}function Qi(e){typeof e!="function"&&(e=Gt(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=new Array(l),c,u,f=0;f<l;++f)(c=a[f])&&(u=e.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new te(o,this._parents)}function Ji(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function er(){return[]}function Kn(e){return e==null?er:function(){return this.querySelectorAll(e)}}function tr(e){return function(){return Ji(e.apply(this,arguments))}}function nr(e){typeof e=="function"?e=tr(e):e=Kn(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&(o.push(e.call(c,c.__data__,u,l)),i.push(c));return new te(o,i)}function jn(e){return function(){return this.matches(e)}}function Qn(e){return function(t){return t.matches(e)}}var or=Array.prototype.find;function ir(e){return function(){return or.call(this.children,e)}}function rr(){return this.firstElementChild}function ar(e){return this.select(e==null?rr:ir(typeof e=="function"?e:Qn(e)))}var lr=Array.prototype.filter;function sr(){return Array.from(this.children)}function cr(e){return function(){return lr.call(this.children,e)}}function ur(e){return this.selectAll(e==null?sr:cr(typeof e=="function"?e:Qn(e)))}function dr(e){typeof e!="function"&&(e=jn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new te(o,this._parents)}function Jn(e){return new Array(e.length)}function fr(){return new te(this._enter||this._groups.map(Jn),this._parents)}function ct(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ct.prototype={constructor:ct,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hr(e){return function(){return e}}function mr(e,t,n,o,i,a){for(var l=0,s,c=t.length,u=a.length;l<u;++l)(s=t[l])?(s.__data__=a[l],o[l]=s):n[l]=new ct(e,a[l]);for(;l<c;++l)(s=t[l])&&(i[l]=s)}function gr(e,t,n,o,i,a,l){var s,c,u=new Map,f=t.length,g=a.length,m=new Array(f),w;for(s=0;s<f;++s)(c=t[s])&&(m[s]=w=l.call(c,c.__data__,s,t)+"",u.has(w)?i[s]=c:u.set(w,c));for(s=0;s<g;++s)w=l.call(e,a[s],s,a)+"",(c=u.get(w))?(o[s]=c,c.__data__=a[s],u.delete(w)):n[s]=new ct(e,a[s]);for(s=0;s<f;++s)(c=t[s])&&u.get(m[s])===c&&(i[s]=c)}function pr(e){return e.__data__}function yr(e,t){if(!arguments.length)return Array.from(this,pr);var n=t?gr:mr,o=this._parents,i=this._groups;typeof e!="function"&&(e=hr(e));for(var a=i.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=o[u],g=i[u],m=g.length,w=wr(e.call(f,f&&f.__data__,u,o)),d=w.length,p=s[u]=new Array(d),y=l[u]=new Array(d),x=c[u]=new Array(m);n(f,g,p,y,x,w,t);for(var O=0,E=0,v,C;O<d;++O)if(v=p[O]){for(O>=E&&(E=O+1);!(C=y[E])&&++E<d;);v._next=C||null}}return l=new te(l,o),l._enter=s,l._exit=c,l}function wr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vr(){return new te(this._exit||this._groups.map(Jn),this._parents)}function xr(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function _r(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),s=new Array(i),c=0;c<l;++c)for(var u=n[c],f=o[c],g=u.length,m=s[c]=new Array(g),w,d=0;d<g;++d)(w=u[d]||f[d])&&(m[d]=w);for(;c<i;++c)s[c]=n[c];return new te(s,this._parents)}function br(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function kr(e){e||(e=Nr);function t(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],s=l.length,c=i[a]=new Array(s),u,f=0;f<s;++f)(u=l[f])&&(c[f]=u);c.sort(t)}return new te(i,this._parents).order()}function Nr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Er(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Sr(){return Array.from(this)}function Cr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function Mr(){let e=0;for(const t of this)++e;return e}function $r(){return!this.node()}function Br(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,s;a<l;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Rr(e){return function(){this.removeAttribute(e)}}function zr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Or(e,t){return function(){this.setAttribute(e,t)}}function Pr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ir(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dr(e,t){var n=st(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?zr:Rr:typeof t=="function"?n.local?Ir:Tr:n.local?Pr:Or)(n,t))}function eo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ar(e){return function(){this.style.removeProperty(e)}}function Vr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hr(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Fr(e,t,n){return arguments.length>1?this.each((t==null?Ar:typeof t=="function"?Hr:Vr)(e,t,n==null?"":n)):Se(this.node(),e)}function Se(e,t){return e.style.getPropertyValue(t)||eo(e).getComputedStyle(e,null).getPropertyValue(t)}function Lr(e){return function(){delete this[e]}}function Zr(e,t){return function(){this[e]=t}}function Ur(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Xr(e,t){return arguments.length>1?this.each((t==null?Lr:typeof t=="function"?Ur:Zr)(e,t)):this.node()[e]}function to(e){return e.trim().split(/^|\s+/)}function Wt(e){return e.classList||new no(e)}function no(e){this._node=e,this._names=to(e.getAttribute("class")||"")}no.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oo(e,t){for(var n=Wt(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function io(e,t){for(var n=Wt(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Yr(e){return function(){oo(this,e)}}function Gr(e){return function(){io(this,e)}}function Wr(e,t){return function(){(t.apply(this,arguments)?oo:io)(this,e)}}function qr(e,t){var n=to(e+"");if(arguments.length<2){for(var o=Wt(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wr:t?Yr:Gr)(n,t))}function Kr(){this.textContent=""}function jr(e){return function(){this.textContent=e}}function Qr(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Jr(e){return arguments.length?this.each(e==null?Kr:(typeof e=="function"?Qr:jr)(e)):this.node().textContent}function ea(){this.innerHTML=""}function ta(e){return function(){this.innerHTML=e}}function na(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function oa(e){return arguments.length?this.each(e==null?ea:(typeof e=="function"?na:ta)(e)):this.node().innerHTML}function ia(){this.nextSibling&&this.parentNode.appendChild(this)}function ra(){return this.each(ia)}function aa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function la(){return this.each(aa)}function sa(e){var t=typeof e=="function"?e:qn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ca(){return null}function ua(e,t){var n=typeof e=="function"?e:qn(e),o=t==null?ca:typeof t=="function"?t:Gt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function da(){var e=this.parentNode;e&&e.removeChild(this)}function fa(){return this.each(da)}function ha(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ma(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ga(e){return this.select(e?ma:ha)}function pa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ya(e){return function(t){e.call(this,t,this.__data__)}}function wa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function va(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function xa(e,t,n){return function(){var o=this.__on,i,a=ya(t);if(o){for(var l=0,s=o.length;l<s;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function _a(e,t,n){var o=wa(e+""),i,a=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<a;++i)if((l=o[i]).type===f.type&&l.name===f.name)return f.value}return}for(s=t?xa:va,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function ro(e,t,n){var o=eo(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ba(e,t){return function(){return ro(this,e,t)}}function ka(e,t){return function(){return ro(this,e,t.apply(this,arguments))}}function Na(e,t){return this.each((typeof t=="function"?ka:ba)(e,t))}function*Ea(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var ao=[null];function te(e,t){this._groups=e,this._parents=t}function Ae(){return new te([[document.documentElement]],ao)}function Sa(){return this}te.prototype=Ae.prototype={constructor:te,select:Qi,selectAll:nr,selectChild:ar,selectChildren:ur,filter:dr,data:yr,enter:fr,exit:vr,join:xr,merge:_r,selection:Sa,order:br,sort:kr,call:Er,nodes:Sr,node:Cr,size:Mr,empty:$r,each:Br,attr:Dr,style:Fr,property:Xr,classed:qr,text:Jr,html:oa,raise:ra,lower:la,append:sa,insert:ua,remove:fa,clone:ga,datum:pa,on:_a,dispatch:Na,[Symbol.iterator]:Ea};function ne(e){return typeof e=="string"?new te([[document.querySelector(e)]],[document.documentElement]):new te([[e]],ao)}function Ca(e){let t;for(;t=e.sourceEvent;)e=t;return e}function re(e,t){if(e=Ca(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ma={passive:!1},Ve={capture:!0,passive:!1};function qt(e){e.stopImmediatePropagation()}function Ce(e){e.preventDefault(),e.stopImmediatePropagation()}function lo(e){var t=e.document.documentElement,n=ne(e).on("dragstart.drag",Ce,Ve);"onselectstart"in t?n.on("selectstart.drag",Ce,Ve):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function so(e,t){var n=e.document.documentElement,o=ne(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ce,Ve),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var ut=e=>()=>e;function Kt(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:s,dx:c,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Kt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $a(e){return!e.ctrlKey&&!e.button}function Ba(){return this.parentNode}function Ra(e,t){return t==null?{x:e.x,y:e.y}:t}function za(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(){var e=$a,t=Ba,n=Ra,o=za,i={},a=at("start","drag","end"),l=0,s,c,u,f,g=0;function m(v){v.on("mousedown.drag",w).filter(o).on("touchstart.drag",y).on("touchmove.drag",x,Ma).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(v,C){if(!(f||!e.call(this,v,C))){var S=E(this,t.call(this,v,C),v,C,"mouse");!S||(ne(v.view).on("mousemove.drag",d,Ve).on("mouseup.drag",p,Ve),lo(v.view),qt(v),u=!1,s=v.clientX,c=v.clientY,S("start",v))}}function d(v){if(Ce(v),!u){var C=v.clientX-s,S=v.clientY-c;u=C*C+S*S>g}i.mouse("drag",v)}function p(v){ne(v.view).on("mousemove.drag mouseup.drag",null),so(v.view,u),Ce(v),i.mouse("end",v)}function y(v,C){if(!!e.call(this,v,C)){var S=v.changedTouches,z=t.call(this,v,C),T=S.length,H,X;for(H=0;H<T;++H)(X=E(this,z,v,C,S[H].identifier,S[H]))&&(qt(v),X("start",v,S[H]))}}function x(v){var C=v.changedTouches,S=C.length,z,T;for(z=0;z<S;++z)(T=i[C[z].identifier])&&(Ce(v),T("drag",v,C[z]))}function O(v){var C=v.changedTouches,S=C.length,z,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),z=0;z<S;++z)(T=i[C[z].identifier])&&(qt(v),T("end",v,C[z]))}function E(v,C,S,z,T,H){var X=a.copy(),L=re(H||S,C),G,I,h;if((h=n.call(v,new Kt("beforestart",{sourceEvent:S,target:m,identifier:T,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:X}),z))!=null)return G=h.x-L[0]||0,I=h.y-L[1]||0,function N(b,B,A){var V=L,R;switch(b){case"start":i[T]=N,R=l++;break;case"end":delete i[T],--l;case"drag":L=re(A||B,C),R=l;break}X.call(b,v,new Kt(b,{sourceEvent:B,subject:h,target:m,identifier:T,active:R,x:L[0]+G,y:L[1]+I,dx:L[0]-V[0],dy:L[1]-V[1],dispatch:X}),z)}}return m.filter=function(v){return arguments.length?(e=typeof v=="function"?v:ut(!!v),m):e},m.container=function(v){return arguments.length?(t=typeof v=="function"?v:ut(v),m):t},m.subject=function(v){return arguments.length?(n=typeof v=="function"?v:ut(v),m):n},m.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:ut(!!v),m):o},m.on=function(){var v=a.on.apply(a,arguments);return v===a?m:v},m.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,m):Math.sqrt(g)},m}function jt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function co(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function He(){}var Fe=.7,dt=1/Fe,Me="\\s*([+-]?\\d+)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pa=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${Me},${Me},${Me}\\)$`),Ia=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Da=new RegExp(`^rgba\\(${Me},${Me},${Me},${Le}\\)$`),Aa=new RegExp(`^rgba\\(${ae},${ae},${ae},${Le}\\)$`),Va=new RegExp(`^hsl\\(${Le},${ae},${ae}\\)$`),Ha=new RegExp(`^hsla\\(${Le},${ae},${ae},${Le}\\)$`),uo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jt(He,Ze,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fo,formatHex:fo,formatHex8:Fa,formatHsl:La,formatRgb:ho,toString:ho});function fo(){return this.rgb().formatHex()}function Fa(){return this.rgb().formatHex8()}function La(){return wo(this).formatHsl()}function ho(){return this.rgb().formatRgb()}function Ze(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mo(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ft(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ft(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ta.exec(e))?new J(t[1],t[2],t[3],1):(t=Ia.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Da.exec(e))?ft(t[1],t[2],t[3],t[4]):(t=Aa.exec(e))?ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Va.exec(e))?yo(t[1],t[2]/100,t[3]/100,1):(t=Ha.exec(e))?yo(t[1],t[2]/100,t[3]/100,t[4]):uo.hasOwnProperty(e)?mo(uo[e]):e==="transparent"?new J(NaN,NaN,NaN,0):null}function mo(e){return new J(e>>16&255,e>>8&255,e&255,1)}function ft(e,t,n,o){return o<=0&&(e=t=n=NaN),new J(e,t,n,o)}function Za(e){return e instanceof He||(e=Ze(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function Qt(e,t,n,o){return arguments.length===1?Za(e):new J(e,t,n,o==null?1:o)}function J(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}jt(J,Qt,co(He,{brighter(e){return e=e==null?dt:Math.pow(dt,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fe:Math.pow(Fe,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(ye(this.r),ye(this.g),ye(this.b),ht(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:go,formatHex:go,formatHex8:Ua,formatRgb:po,toString:po}));function go(){return`#${we(this.r)}${we(this.g)}${we(this.b)}`}function Ua(){return`#${we(this.r)}${we(this.g)}${we(this.b)}${we((isNaN(this.opacity)?1:this.opacity)*255)}`}function po(){const e=ht(this.opacity);return`${e===1?"rgb(":"rgba("}${ye(this.r)}, ${ye(this.g)}, ${ye(this.b)}${e===1?")":`, ${e})`}`}function ht(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function we(e){return e=ye(e),(e<16?"0":"")+e.toString(16)}function yo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oe(e,t,n,o)}function wo(e){if(e instanceof oe)return new oe(e.h,e.s,e.l,e.opacity);if(e instanceof He||(e=Ze(e)),!e)return new oe;if(e instanceof oe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,s=a-i,c=(a+i)/2;return s?(t===a?l=(n-o)/s+(n<o)*6:n===a?l=(o-t)/s+2:l=(t-n)/s+4,s/=c<.5?a+i:2-a-i,l*=60):s=c>0&&c<1?0:l,new oe(l,s,c,e.opacity)}function Xa(e,t,n,o){return arguments.length===1?wo(e):new oe(e,t,n,o==null?1:o)}function oe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}jt(oe,Xa,co(He,{brighter(e){return e=e==null?dt:Math.pow(dt,e),new oe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fe:Math.pow(Fe,e),new oe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new J(Jt(e>=240?e-240:e+120,i,o),Jt(e,i,o),Jt(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new oe(vo(this.h),mt(this.s),mt(this.l),ht(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ht(this.opacity);return`${e===1?"hsl(":"hsla("}${vo(this.h)}, ${mt(this.s)*100}%, ${mt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vo(e){return e=(e||0)%360,e<0?e+360:e}function mt(e){return Math.max(0,Math.min(1,e||0))}function Jt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var xo=e=>()=>e;function Ya(e,t){return function(n){return e+n*t}}function Ga(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Wa(e){return(e=+e)==1?_o:function(t,n){return n-t?Ga(t,n,e):xo(isNaN(t)?n:t)}}function _o(e,t){var n=t-e;return n?Ya(e,n):xo(isNaN(e)?t:e)}var bo=function e(t){var n=Wa(t);function o(i,a){var l=n((i=Qt(i)).r,(a=Qt(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=_o(i.opacity,a.opacity);return function(f){return i.r=l(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return o.gamma=e,o}(1);function me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var en=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp(en.source,"g");function qa(e){return function(){return e}}function Ka(e){return function(t){return e(t)+""}}function ja(e,t){var n=en.lastIndex=tn.lastIndex=0,o,i,a,l=-1,s=[],c=[];for(e=e+"",t=t+"";(o=en.exec(e))&&(i=tn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[l]?s[l]+=a:s[++l]=a),(o=o[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,c.push({i:l,x:me(o,i)})),n=tn.lastIndex;return n<t.length&&(a=t.slice(n),s[l]?s[l]+=a:s[++l]=a),s.length<2?c[0]?Ka(c[0].x):qa(t):(t=c.length,function(u){for(var f=0,g;f<t;++f)s[(g=c[f]).i]=g.x(u);return s.join("")})}var ko=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function No(e,t,n,o,i,a){var l,s,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,c/=s),e*o<t*n&&(e=-e,t=-t,c=-c,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ko,skewX:Math.atan(c)*ko,scaleX:l,scaleY:s}}var gt;function Qa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nn:No(t.a,t.b,t.c,t.d,t.e,t.f)}function Ja(e){return e==null||(gt||(gt=document.createElementNS("http://www.w3.org/2000/svg","g")),gt.setAttribute("transform",e),!(e=gt.transform.baseVal.consolidate()))?nn:(e=e.matrix,No(e.a,e.b,e.c,e.d,e.e,e.f))}function Eo(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,f,g,m,w,d){if(u!==g||f!==m){var p=w.push("translate(",null,t,null,n);d.push({i:p-4,x:me(u,g)},{i:p-2,x:me(f,m)})}else(g||m)&&w.push("translate("+g+t+m+n)}function l(u,f,g,m){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),m.push({i:g.push(i(g)+"rotate(",null,o)-2,x:me(u,f)})):f&&g.push(i(g)+"rotate("+f+o)}function s(u,f,g,m){u!==f?m.push({i:g.push(i(g)+"skewX(",null,o)-2,x:me(u,f)}):f&&g.push(i(g)+"skewX("+f+o)}function c(u,f,g,m,w,d){if(u!==g||f!==m){var p=w.push(i(w)+"scale(",null,",",null,")");d.push({i:p-4,x:me(u,g)},{i:p-2,x:me(f,m)})}else(g!==1||m!==1)&&w.push(i(w)+"scale("+g+","+m+")")}return function(u,f){var g=[],m=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,g,m),l(u.rotate,f.rotate,g,m),s(u.skewX,f.skewX,g,m),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,g,m),u=f=null,function(w){for(var d=-1,p=m.length,y;++d<p;)g[(y=m[d]).i]=y.x(w);return g.join("")}}}var el=Eo(Qa,"px, ","px)","deg)"),tl=Eo(Ja,", ",")",")"),nl=1e-12;function So(e){return((e=Math.exp(e))+1/e)/2}function ol(e){return((e=Math.exp(e))-1/e)/2}function il(e){return((e=Math.exp(2*e))-1)/(e+1)}var rl=function e(t,n,o){function i(a,l){var s=a[0],c=a[1],u=a[2],f=l[0],g=l[1],m=l[2],w=f-s,d=g-c,p=w*w+d*d,y,x;if(p<nl)x=Math.log(m/u)/t,y=function(z){return[s+z*w,c+z*d,u*Math.exp(t*z*x)]};else{var O=Math.sqrt(p),E=(m*m-u*u+o*p)/(2*u*n*O),v=(m*m-u*u-o*p)/(2*m*n*O),C=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(v*v+1)-v);x=(S-C)/t,y=function(z){var T=z*x,H=So(C),X=u/(n*O)*(H*il(t*T+C)-ol(C));return[s+X*w,c+X*d,u*H/So(t*T+C)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return i.rho=function(a){var l=Math.max(.001,+a),s=l*l,c=s*s;return e(l,s,c)},i}(Math.SQRT2,2,4),$e=0,Ue=0,Xe=0,Co=1e3,pt,Ye,yt=0,ve=0,wt=0,Ge=typeof performance=="object"&&performance.now?performance:Date,Mo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function on(){return ve||(Mo(al),ve=Ge.now()+wt)}function al(){ve=0}function vt(){this._call=this._time=this._next=null}vt.prototype=$o.prototype={constructor:vt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?on():+n)+(t==null?0:+t),!this._next&&Ye!==this&&(Ye?Ye._next=this:pt=this,Ye=this),this._call=e,this._time=n,rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,rn())}};function $o(e,t,n){var o=new vt;return o.restart(e,t,n),o}function ll(){on(),++$e;for(var e=pt,t;e;)(t=ve-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$e}function Bo(){ve=(yt=Ge.now())+wt,$e=Ue=0;try{ll()}finally{$e=0,cl(),ve=0}}function sl(){var e=Ge.now(),t=e-yt;t>Co&&(wt-=t,yt=e)}function cl(){for(var e,t=pt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pt=n);Ye=e,rn(o)}function rn(e){if(!$e){Ue&&(Ue=clearTimeout(Ue));var t=e-ve;t>24?(e<1/0&&(Ue=setTimeout(Bo,e-Ge.now()-wt)),Xe&&(Xe=clearInterval(Xe))):(Xe||(yt=Ge.now(),Xe=setInterval(sl,Co)),$e=1,Mo(Bo))}}function Ro(e,t,n){var o=new vt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var ul=at("start","end","cancel","interrupt"),dl=[],zo=0,Oo=1,an=2,xt=3,Po=4,ln=5,_t=6;function bt(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;fl(e,n,{name:t,index:o,group:i,on:ul,tween:dl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:zo})}function sn(e,t){var n=ie(e,t);if(n.state>zo)throw new Error("too late; already scheduled");return n}function le(e,t){var n=ie(e,t);if(n.state>xt)throw new Error("too late; already running");return n}function ie(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fl(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=$o(a,0,n.time);function a(u){n.state=Oo,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,g,m,w;if(n.state!==Oo)return c();for(f in o)if(w=o[f],w.name===n.name){if(w.state===xt)return Ro(l);w.state===Po?(w.state=_t,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete o[f]):+f<t&&(w.state=_t,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete o[f])}if(Ro(function(){n.state===xt&&(n.state=Po,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=an,n.on.call("start",e,e.__data__,n.index,n.group),n.state===an){for(n.state=xt,i=new Array(m=n.tween.length),f=0,g=-1;f<m;++f)(w=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++g]=w);i.length=g+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ln,1),g=-1,m=i.length;++g<m;)i[g].call(e,f);n.state===ln&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=_t,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function kt(e,t){var n=e.__transition,o,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>an&&o.state<ln,o.state=_t,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function hl(e){return this.each(function(){kt(this,e)})}function ml(e,t){var n,o;return function(){var i=le(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function gl(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=le(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var s={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function pl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ie(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?ml:gl)(n,e,t))}function cn(e,t,n){var o=e._id;return e.each(function(){var i=le(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ie(i,o).value[t]}}function To(e,t){var n;return(typeof t=="number"?me:t instanceof Ze?bo:(n=Ze(t))?(t=n,bo):ja)(e,t)}function yl(e){return function(){this.removeAttribute(e)}}function wl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vl(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function xl(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function _l(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function bl(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function kl(e,t){var n=st(e),o=n==="transform"?tl:To;return this.attrTween(e,typeof t=="function"?(n.local?bl:_l)(n,o,cn(this,"attr."+e,t)):t==null?(n.local?wl:yl)(n):(n.local?xl:vl)(n,o,t))}function Nl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function El(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Sl(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&El(e,a)),n}return i._value=t,i}function Cl(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Nl(e,a)),n}return i._value=t,i}function Ml(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=st(e);return this.tween(n,(o.local?Sl:Cl)(o,t))}function $l(e,t){return function(){sn(this,e).delay=+t.apply(this,arguments)}}function Bl(e,t){return t=+t,function(){sn(this,e).delay=t}}function Rl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$l:Bl)(t,e)):ie(this.node(),t).delay}function zl(e,t){return function(){le(this,e).duration=+t.apply(this,arguments)}}function Ol(e,t){return t=+t,function(){le(this,e).duration=t}}function Pl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zl:Ol)(t,e)):ie(this.node(),t).duration}function Tl(e,t){if(typeof t!="function")throw new Error;return function(){le(this,e).ease=t}}function Il(e){var t=this._id;return arguments.length?this.each(Tl(t,e)):ie(this.node(),t).ease}function Dl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;le(this,e).ease=n}}function Al(e){if(typeof e!="function")throw new Error;return this.each(Dl(this._id,e))}function Vl(e){typeof e!="function"&&(e=jn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new ue(o,this._parents,this._name,this._id)}function Hl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),s=0;s<a;++s)for(var c=t[s],u=n[s],f=c.length,g=l[s]=new Array(f),m,w=0;w<f;++w)(m=c[w]||u[w])&&(g[w]=m);for(;s<o;++s)l[s]=t[s];return new ue(l,this._parents,this._name,this._id)}function Fl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ll(e,t,n){var o,i,a=Fl(t)?sn:le;return function(){var l=a(this,e),s=l.on;s!==o&&(i=(o=s).copy()).on(t,n),l.on=i}}function Zl(e,t){var n=this._id;return arguments.length<2?ie(this.node(),n).on.on(e):this.each(Ll(n,e,t))}function Ul(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Xl(){return this.on("end.remove",Ul(this._id))}function Yl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gt(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s=o[l],c=s.length,u=a[l]=new Array(c),f,g,m=0;m<c;++m)(f=s[m])&&(g=e.call(f,f.__data__,m,s))&&("__data__"in f&&(g.__data__=f.__data__),u[m]=g,bt(u[m],t,n,m,u,ie(f,n)));return new ue(a,this._parents,t,n)}function Gl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kn(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var c=o[s],u=c.length,f,g=0;g<u;++g)if(f=c[g]){for(var m=e.call(f,f.__data__,g,c),w,d=ie(f,n),p=0,y=m.length;p<y;++p)(w=m[p])&&bt(w,t,n,p,m,d);a.push(m),l.push(f)}return new ue(a,l,t,n)}var Wl=Ae.prototype.constructor;function ql(){return new Wl(this._groups,this._parents)}function Kl(e,t){var n,o,i;return function(){var a=Se(this,e),l=(this.style.removeProperty(e),Se(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function Io(e){return function(){this.style.removeProperty(e)}}function jl(e,t,n){var o,i=n+"",a;return function(){var l=Se(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Ql(e,t,n){var o,i,a;return function(){var l=Se(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Se(this,e))),l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s))}}function Jl(e,t){var n,o,i,a="style."+t,l="end."+a,s;return function(){var c=le(this,e),u=c.on,f=c.value[a]==null?s||(s=Io(t)):void 0;(u!==n||i!==f)&&(o=(n=u).copy()).on(l,i=f),c.on=o}}function es(e,t,n){var o=(e+="")=="transform"?el:To;return t==null?this.styleTween(e,Kl(e,o)).on("end.style."+e,Io(e)):typeof t=="function"?this.styleTween(e,Ql(e,o,cn(this,"style."+e,t))).each(Jl(this._id,e)):this.styleTween(e,jl(e,o,t),n).on("end.style."+e,null)}function ts(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function ns(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&ts(e,l,n)),o}return a._value=t,a}function os(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,ns(e,t,n==null?"":n))}function is(e){return function(){this.textContent=e}}function rs(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function as(e){return this.tween("text",typeof e=="function"?rs(cn(this,"text",e)):is(e==null?"":e+""))}function ls(e){return function(t){this.textContent=e.call(this,t)}}function ss(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ls(i)),t}return o._value=e,o}function cs(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ss(e))}function us(){for(var e=this._name,t=this._id,n=Do(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)if(c=l[u]){var f=ie(c,t);bt(c,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ue(o,this._parents,e,n)}function ds(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var s={value:l},c={value:function(){--i===0&&a()}};n.each(function(){var u=le(this,o),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),i===0&&a()})}var fs=0;function ue(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Do(){return++fs}var de=Ae.prototype;ue.prototype={constructor:ue,select:Yl,selectAll:Gl,selectChild:de.selectChild,selectChildren:de.selectChildren,filter:Vl,merge:Hl,selection:ql,transition:us,call:de.call,nodes:de.nodes,node:de.node,size:de.size,empty:de.empty,each:de.each,on:Zl,attr:kl,attrTween:Ml,style:es,styleTween:os,text:as,textTween:cs,remove:Xl,tween:pl,delay:Rl,duration:Pl,ease:Il,easeVarying:Al,end:ds,[Symbol.iterator]:de[Symbol.iterator]};function hs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ms={time:null,delay:0,duration:250,ease:hs};function gs(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ps(e){var t,n;e instanceof ue?(t=e._id,e=e._name):(t=Do(),(n=ms).time=on(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&bt(c,e,t,u,l,n||gs(c,t));return new ue(o,this._parents,e,t)}Ae.prototype.interrupt=hl,Ae.prototype.transition=ps;var Nt=e=>()=>e;function ys(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function fe(e,t,n){this.k=e,this.x=t,this.y=n}fe.prototype={constructor:fe,scale:function(e){return e===1?this:new fe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Et=new fe(1,0,0);fe.prototype;function un(e){e.stopImmediatePropagation()}function We(e){e.preventDefault(),e.stopImmediatePropagation()}function ws(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vs(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ao(){return this.__zoom||Et}function xs(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _s(){return navigator.maxTouchPoints||"ontouchstart"in this}function bs(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function ks(){var e=ws,t=vs,n=bs,o=xs,i=_s,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,c=rl,u=at("start","zoom","end"),f,g,m,w=500,d=150,p=0,y=10;function x(h){h.property("__zoom",Ao).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",X).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(h,N,b,B){var A=h.selection?h.selection():h;A.property("__zoom",Ao),h!==A?C(h,N,b,B):A.interrupt().each(function(){S(this,arguments).event(B).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},x.scaleBy=function(h,N,b,B){x.scaleTo(h,function(){var A=this.__zoom.k,V=typeof N=="function"?N.apply(this,arguments):N;return A*V},b,B)},x.scaleTo=function(h,N,b,B){x.transform(h,function(){var A=t.apply(this,arguments),V=this.__zoom,R=b==null?v(A):typeof b=="function"?b.apply(this,arguments):b,U=V.invert(R),q=typeof N=="function"?N.apply(this,arguments):N;return n(E(O(V,q),R,U),A,l)},b,B)},x.translateBy=function(h,N,b,B){x.transform(h,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),l)},null,B)},x.translateTo=function(h,N,b,B,A){x.transform(h,function(){var V=t.apply(this,arguments),R=this.__zoom,U=B==null?v(V):typeof B=="function"?B.apply(this,arguments):B;return n(Et.translate(U[0],U[1]).scale(R.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof b=="function"?-b.apply(this,arguments):-b),V,l)},B,A)};function O(h,N){return N=Math.max(a[0],Math.min(a[1],N)),N===h.k?h:new fe(N,h.x,h.y)}function E(h,N,b){var B=N[0]-b[0]*h.k,A=N[1]-b[1]*h.k;return B===h.x&&A===h.y?h:new fe(h.k,B,A)}function v(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function C(h,N,b,B){h.on("start.zoom",function(){S(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(B).end()}).tween("zoom",function(){var A=this,V=arguments,R=S(A,V).event(B),U=t.apply(A,V),q=b==null?v(U):typeof b=="function"?b.apply(A,V):b,k=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),_=A.__zoom,M=typeof N=="function"?N.apply(A,V):N,P=c(_.invert(q).concat(k/_.k),M.invert(q).concat(k/M.k));return function($){if($===1)$=M;else{var D=P($),W=k/D[2];$=new fe(W,q[0]-D[0]*W,q[1]-D[1]*W)}R.zoom(null,$)}})}function S(h,N,b){return!b&&h.__zooming||new z(h,N)}function z(h,N){this.that=h,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,N),this.taps=0}z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,N){return this.mouse&&h!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var N=ne(this.that).datum();u.call(h,this.that,new ys(h,{sourceEvent:this.sourceEvent,target:x,type:h,transform:this.that.__zoom,dispatch:u}),N)}};function T(h,...N){if(!e.apply(this,arguments))return;var b=S(this,N).event(h),B=this.__zoom,A=Math.max(a[0],Math.min(a[1],B.k*Math.pow(2,o.apply(this,arguments)))),V=re(h);if(b.wheel)(b.mouse[0][0]!==V[0]||b.mouse[0][1]!==V[1])&&(b.mouse[1]=B.invert(b.mouse[0]=V)),clearTimeout(b.wheel);else{if(B.k===A)return;b.mouse=[V,B.invert(V)],kt(this),b.start()}We(h),b.wheel=setTimeout(R,d),b.zoom("mouse",n(E(O(B,A),b.mouse[0],b.mouse[1]),b.extent,l));function R(){b.wheel=null,b.end()}}function H(h,...N){if(m||!e.apply(this,arguments))return;var b=h.currentTarget,B=S(this,N,!0).event(h),A=ne(h.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",k,!0),V=re(h,b),R=h.clientX,U=h.clientY;lo(h.view),un(h),B.mouse=[V,this.__zoom.invert(V)],kt(this),B.start();function q(_){if(We(_),!B.moved){var M=_.clientX-R,P=_.clientY-U;B.moved=M*M+P*P>p}B.event(_).zoom("mouse",n(E(B.that.__zoom,B.mouse[0]=re(_,b),B.mouse[1]),B.extent,l))}function k(_){A.on("mousemove.zoom mouseup.zoom",null),so(_.view,B.moved),We(_),B.event(_).end()}}function X(h,...N){if(!!e.apply(this,arguments)){var b=this.__zoom,B=re(h.changedTouches?h.changedTouches[0]:h,this),A=b.invert(B),V=b.k*(h.shiftKey?.5:2),R=n(E(O(b,V),B,A),t.apply(this,N),l);We(h),s>0?ne(this).transition().duration(s).call(C,R,B,h):ne(this).call(x.transform,R,B,h)}}function L(h,...N){if(!!e.apply(this,arguments)){var b=h.touches,B=b.length,A=S(this,N,h.changedTouches.length===B).event(h),V,R,U,q;for(un(h),R=0;R<B;++R)U=b[R],q=re(U,this),q=[q,this.__zoom.invert(q),U.identifier],A.touch0?!A.touch1&&A.touch0[2]!==q[2]&&(A.touch1=q,A.taps=0):(A.touch0=q,V=!0,A.taps=1+!!f);f&&(f=clearTimeout(f)),V&&(A.taps<2&&(g=q[0],f=setTimeout(function(){f=null},w)),kt(this),A.start())}}function G(h,...N){if(!!this.__zooming){var b=S(this,N).event(h),B=h.changedTouches,A=B.length,V,R,U,q;for(We(h),V=0;V<A;++V)R=B[V],U=re(R,this),b.touch0&&b.touch0[2]===R.identifier?b.touch0[0]=U:b.touch1&&b.touch1[2]===R.identifier&&(b.touch1[0]=U);if(R=b.that.__zoom,b.touch1){var k=b.touch0[0],_=b.touch0[1],M=b.touch1[0],P=b.touch1[1],$=($=M[0]-k[0])*$+($=M[1]-k[1])*$,D=(D=P[0]-_[0])*D+(D=P[1]-_[1])*D;R=O(R,Math.sqrt($/D)),U=[(k[0]+M[0])/2,(k[1]+M[1])/2],q=[(_[0]+P[0])/2,(_[1]+P[1])/2]}else if(b.touch0)U=b.touch0[0],q=b.touch0[1];else return;b.zoom("touch",n(E(R,U,q),b.extent,l))}}function I(h,...N){if(!!this.__zooming){var b=S(this,N).event(h),B=h.changedTouches,A=B.length,V,R;for(un(h),m&&clearTimeout(m),m=setTimeout(function(){m=null},w),V=0;V<A;++V)R=B[V],b.touch0&&b.touch0[2]===R.identifier?delete b.touch0:b.touch1&&b.touch1[2]===R.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(R=re(R,this),Math.hypot(g[0]-R[0],g[1]-R[1])<y)){var U=ne(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return x.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Nt(+h),x):o},x.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Nt(!!h),x):e},x.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:Nt(!!h),x):i},x.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Nt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),x):t},x.scaleExtent=function(h){return arguments.length?(a[0]=+h[0],a[1]=+h[1],x):[a[0],a[1]]},x.translateExtent=function(h){return arguments.length?(l[0][0]=+h[0][0],l[1][0]=+h[1][0],l[0][1]=+h[0][1],l[1][1]=+h[1][1],x):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},x.constrain=function(h){return arguments.length?(n=h,x):n},x.duration=function(h){return arguments.length?(s=+h,x):s},x.interpolate=function(h){return arguments.length?(c=h,x):c},x.on=function(){var h=u.on.apply(u,arguments);return h===u?x:h},x.clickDistance=function(h){return arguments.length?(p=(h=+h)*h,x):Math.sqrt(p)},x.tapDistance=function(h){return arguments.length?(y=+h,x):y},x}var Z=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Z||{}),Vo=(e=>(e.Lines="lines",e.Dots="dots",e))(Vo||{}),xe=(e=>(e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(xe||{}),_e=(e=>(e.Strict="strict",e.Loose="loose",e))(_e||{}),Ho=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Ho||{}),qe=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(qe||{});const dn=Symbol("vueFlow"),fn=Symbol("nodeId"),Fo=Symbol("nodeRef"),Lo=Symbol("edgeId"),Zo=Symbol("edgeRef"),St=Symbol("slots"),Ns=()=>({edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F()});var Es=(e,t)=>{r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Ie(()=>{o.off(i)})}})};const Ke=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ct=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),hn=(e,t)=>({x:Ct(e.x,t[0][0],t[1][0]),y:Ct(e.y,t[0][1],t[1][1])}),Uo=e=>{const t=e.getRootNode(),n=Re();return"elementFromPoint"in t?t:n.document},se=e=>e&&"id"in e&&"source"in e&&"target"in e,je=e=>se(e)&&"sourceNode"in e&&"targetNode"in e,Mt=e=>e&&"id"in e&&!se(e),ge=e=>Mt(e)&&"computedPosition"in e,Ss=(e,t,n)=>{var i;let o=n;return ge(e)||(o={type:(i=e.type)!=null?i:"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:r.shallowReactive({source:[],target:[]}),computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,...n}),{...o,...e,id:e.id.toString()}},mn=(e,t)=>(t=je(e)?t:{sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:e.type,source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:e.updatable,selectable:e.selectable,data:e.data,...t},Object.assign({id:e.id.toString()},e,t)),Xo=(e,t,n)=>{if(!Mt(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>se(a)&&a[o]===e.id).map(a=>se(a)&&a[n]);return t.filter(a=>i.includes(a.id))},Cs=(e,t)=>Xo(e,t,"target"),Ms=(e,t)=>Xo(e,t,"source"),$t=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`,gn=(e,t)=>t.some(n=>se(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),$s=(e,t,n)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),t;let o;return se(e)?o={...e}:o={...e,id:$t(e)},o=mn(o,n),gn(o,t)||t.push(o),t},Bs=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>se(a)&&a.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),n;const i={...e,id:$t(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)},pn=({x:e,y:t},{x:n,y:o,zoom:i},a,[l,s])=>{const c={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(c.x/l),y:s*Math.round(c.y/s)}:c},Yo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Be=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Go=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Rs=(e,t)=>Go(Yo(Be(e),Be(t))),Bt=e=>{const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Yo(n,Be({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Go(t)},zs=({x:e,y:t},{x:n,y:o,zoom:i})=>({x:e*i+n,y:t*i+o}),yn=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1)=>{const l=Be({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter(s=>{if(!s||s.selectable===!1)return!1;const{computedPosition:c={x:0,y:0},dimensions:u={width:0,height:0}}=s,f=Be({...c,...u}),g=Math.max(0,Math.min(l.x2,f.x2)-Math.max(l.x,f.x)),m=Math.max(0,Math.min(l.y2,f.y2)-Math.max(l.y,f.y)),w=Math.ceil(g*m),d=typeof u.width=="undefined"||typeof u.height=="undefined"||u.width===0||u.height===0,p=a&&w>0,y=u.width*u.height;return d||p||w>=y})},Q=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},wn=(e,t,n,o,i,a=.1,l={x:0,y:0})=>{var p,y;const s=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(s,c),f=Ct(u,o,i),g=e.x+e.width/2,m=e.y+e.height/2,w=t/2-g*f+((p=l.x)!=null?p:0),d=n/2-m*f+((y=l.y)!=null?y:0);return{x:w,y:d,zoom:f}},Os=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),Wo=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Wo(n,t):!1},pe=e=>typeof e=="undefined"?"":typeof e=="string"?e:Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&"),qo=(e,t,n)=>{var s,c,u,f;const o=((s=n==null?void 0:n.x)!=null?s:0)+t.x,i=((c=n==null?void 0:n.y)!=null?c:0)+t.y,a=(u=n==null?void 0:n.width)!=null?u:t.width,l=(f=n==null?void 0:n.height)!=null?f:t.height;switch(e){case Z.Top:return{x:o+a/2,y:i};case Z.Right:return{x:o+a,y:i+l/2};case Z.Bottom:return{x:o+a/2,y:i+l};case Z.Left:return{x:o,y:i+l/2}}},Ko=(e=[],t)=>{if(!e.length)return;let n;return!t&&e.length===1?n=e[0]:t&&(n=e.find(o=>o.id===t)),n||e[0]},Ps=(e,t,n,o,i,a)=>{const l=qo(n,{...e.dimensions,...e.computedPosition},t),s=qo(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}};function Ts({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:s,viewport:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f=Be({x:(0-c.x)/c.zoom,y:(0-c.y)/c.zoom,width:l/c.zoom,height:s/c.zoom}),g=Math.max(0,Math.min(f.x2,u.x2)-Math.max(f.x,u.x)),m=Math.max(0,Math.min(f.y2,u.y2)-Math.max(f.y,u.y));return Math.ceil(g*m)>0}const Is=(e,t)=>{let n=-1;const o=e.reduce((i,a)=>{const l=t(a.source),s=t(a.target);if(!l||!s)return i;const c=a.z?a.z:Math.max(l.computedPosition.z||0,s.computedPosition.z||0);return i[c]?i[c].push(a):i[c]=[a],n=c>n?c:n,i},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===n}})},jo=(e,t,n)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-a.left)/n,y:(s.top-a.top)/n,...Ke(l)}})},Qo=(e,t,n,o,i)=>{i.value=!1,e.selected?e.selected&&t&&o({nodes:[e]}):n([e])};function Jo(e,t){var n,o;if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,a=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||a>0||e.position.x<0||e.position.y<0){if(t.style={...t.style},t.style.width=(n=t.style.width)!=null?n:t.dimensions.width,t.style.height=(o=t.style.height)!=null?o:t.dimensions.height,i>0)if(typeof t.style.width=="string"){const l=parseInt(t.style.width,10);t.style.width=`${l+i}px`}else t.style.width+=i;if(a>0)if(typeof t.style.height=="string"){const l=parseInt(t.style.height,10);t.style.height=`${l+a}px`}else t.style.height+=a;if(e.position.x<0){const l=Math.abs(e.position.x);if(t.position.x=t.position.x-l,typeof t.style.width=="string"){const s=parseInt(t.style.width,10);t.style.width=`${s+l}px`}else t.style.width+=l;e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);if(t.position.y=t.position.y-l,typeof t.style.height=="string"){const s=parseInt(t.style.height,10);t.style.height=`${s+l}px`}else t.style.height+=l;e.position.y=0}}}}const Qe=(e,t)=>{let n=t.map(o=>o.id);return e.forEach(o=>{if(o.type==="add"){const l=o.item;return t.push(l)}const i=n.indexOf(o.id),a=t[i];switch(o.type){case"select":(ge(a)||je(a))&&(a.selected=o.selected);break;case"position":if(ge(a)&&(typeof o.position!="undefined"&&(a.position=o.position),typeof o.computedPosition!="undefined"&&(a.computedPosition={...a.computedPosition,...o.computedPosition}),a.expandParent&&a.parentNode)){const l=t[n.indexOf(a.parentNode)];l&&ge(l)&&Jo(a,l)}break;case"dimensions":if(ge(a)&&(typeof o.dimensions!="undefined"&&(a.dimensions=o.dimensions),a.expandParent&&a.parentNode)){const l=t[n.indexOf(a.parentNode)];l&&ge(l)&&Jo(a,l)}break;case"remove":n.includes(o.id)&&(t.splice(i,1),n=t.map(l=>l.id));break}}),t},Ds=(e,t)=>Qe(e,t),As=(e,t)=>Qe(e,t),Rt=(e,t)=>({id:e,type:"select",selected:t}),ei=e=>({item:e,type:"add"}),vn=e=>({id:e,type:"remove"}),ti=(e,t)=>e.reduce((n,o)=>{const i=t.includes(o.id);return!o.selected&&i?(o.selected=!0,n.push(Rt(o.id,!0))):o.selected&&!i&&(o.selected=!1,n.push(Rt(o.id,!1))),n},[]),Vs=e=>typeof e!="undefined",Hs=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return se(e)?n={...e}:n={...e,id:$t(e)},n=mn(n),gn(n,t)?!1:n},Fs=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;const o=n.find(a=>je(a)&&a.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;const i={...e,id:$t(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),i},ni=(e,t,n,o)=>{const i={},a=e.map(l=>{const s=r.shallowReactive(Ss(l,o,{...t(l.id),parentNode:l.parentNode}));return l.parentNode&&(i[l.parentNode]=!0),s});return a.forEach(l=>{const s=[...a,...n];if(l.parentNode&&!s.find(c=>c.id===l.parentNode)&&console.warn(`[vueflow]: Parent node ${l.parentNode} not found`),l.parentNode||i[l.id]){i[l.id]&&(l.isParent=!0);const c=l.parentNode?t(l.parentNode):void 0;c&&(c.isParent=!0)}}),a},Ls=["data-handleid","data-nodeid","data-handlepos"],Zs={name:"Handle"},Je=r.defineComponent({...Zs,props:{id:null,type:{default:"source"},position:{default:()=>"top"},isValidConnection:null,connectable:{type:Boolean,default:!0}},setup(e){const t=j(),n=r.toRef(t,"connectionStartHandle"),o=r.toRef(t,"connectionMode"),i=r.toRef(t,"vueFlowRef"),{id:a,node:l,nodeEl:s}=vi(),c=r.ref(),u=r.computed(()=>{var p;return(p=e.id)!=null?p:o.value===_e.Strict?null:`${a}__handle-${e.position}`}),{onMouseDown:f,onClick:g}=Cn(),m=p=>{f(p,u.value,a,e.type==="target",e.isValidConnection,void 0)},w=p=>{var y;g(p,(y=u.value)!=null?y:null,a,e.type,e.isValidConnection)},d=r.computed(()=>["vue-flow__handle",`vue-flow__handle-${e.position}`,`vue-flow__handle-${u.value}`,"nodrag",{source:e.type!=="target",target:e.type==="target",connectable:e.connectable,connecting:n.value&&n.value.nodeId===a&&n.value.handleId===u.value&&n.value.type===e.type}]);return r.onMounted(()=>{var S,z;const p=(S=l.handleBounds[e.type])==null?void 0:S.find(T=>T.id===u.value);if(!i.value||p)return;const y=i.value.querySelector(".vue-flow__transformationpane");if(!s||!c.value||!y)return;const x=s.value.getBoundingClientRect(),O=c.value.getBoundingClientRect(),E=window.getComputedStyle(y),{m22:v}=new window.DOMMatrixReadOnly(E.transform),C={id:u.value,position:e.position,x:(O.left-x.left)/v,y:(O.top-x.top)/v,...Ke(c.value)};l.handleBounds[e.type]=[...(z=l.handleBounds[e.type])!=null?z:[],C]}),(p,y)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:c,"data-handleid":u.value,"data-nodeid":r.unref(a),"data-handlepos":e.position,class:r.normalizeClass(r.unref(d)),onMousedown:m,onClick:w},[r.renderSlot(p.$slots,"default",{id:e.id})],42,Ls))}}),xn=function({sourcePosition:e=Z.Bottom,targetPosition:t=Z.Top,label:n,connectable:o=!1,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(Je,{type:"target",position:t,isConnectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(Je,{type:"source",position:e,isConnectable:o,isValidConnection:a})]};xn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],xn.inheritAttrs=!1;const _n=function({sourcePosition:e=Z.Bottom,label:t,connectable:n=!1,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(Je,{type:"source",position:e,isConnectable:n,isValidConnection:o})]};_n.props=["sourcePosition","label","isValidSourcePos","connectable"],_n.inheritAttrs=!1;const bn=function({targetPosition:e=Z.Top,label:t,connectable:n=!1,isValidTargetPos:o}){return[r.h(Je,{type:"target",position:e,isConnectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};bn.props=["targetPosition","label","isValidTargetPos","connectable"],bn.inheritAttrs=!1;const Us=["data-id"],Xs={name:"Node",inheritAttrs:!1},Ys=r.defineComponent({...Xs,props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null,type:{type:[null,Function,Object,Boolean]},name:null,node:null,resizeObserver:null},setup(e){const t=r.createPropsRestProxy(e,["id","type","name","draggable","selectable","connectable","snapGrid"]);r.provide(fn,e.id);const n=j();r.toRef(n,"nodeExtent");const o=r.toRef(n,"edges");r.toRef(n,"viewport");const i=r.toRef(n,"noPanClassName"),a=r.toRef(n,"selectNodesOnDrag"),l=r.toRef(n,"nodesSelectionActive"),s=r.toRef(n,"multiSelectionActive"),c=r.toRef(n,"emits"),u=r.toRef(n,"getNode"),f=r.toRef(n,"removeSelectedElements"),g=r.toRef(n,"addSelectedNodes"),m=r.toRef(n,"updateNodeDimensions"),w=r.toRef(n,"onUpdateNodeInternals"),d=rt(t,"node"),p=r.computed(()=>d.value.parentNode?u.value(d.value.parentNode):void 0),y=r.ref();r.provide(Fo,y);const{emit:x,on:O}=bc(d.value,c.value),E=wi({id:e.id,el:y,disabled:r.computed(()=>!e.draggable),onStart(h,N,b){x.dragStart({event:h,node:N,nodes:b})},onDrag(h,N,b){x.drag({event:h,node:N,nodes:b})},onStop(h,N,b){x.dragStop({event:h,node:N,nodes:b})}}),v=(h,N)=>{N?d.value.computedPosition=Os({x:N.x,y:N.y,z:N.z},h):d.value.computedPosition=h},C=()=>{y.value&&m.value([{id:e.id,nodeElement:y.value,forceUpdate:!0}]),v({x:d.value.position.x,y:d.value.position.y,z:d.value.computedPosition.z?d.value.computedPosition.z:d.value.selected?1e3:0},p.value?{...p.value.computedPosition}:void 0)};w.value(h=>{h.includes(e.id)&&C()}),v({x:d.value.position.x,y:d.value.position.y,z:d.value.computedPosition.z?d.value.computedPosition.z:d.value.selected?1e3:0},p.value?{...p.value.computedPosition}:void 0),r.onMounted(()=>{t.resizeObserver.observe(y.value)}),r.watch([()=>d.value.type,()=>d.value.sourcePosition,()=>d.value.targetPosition],()=>{m.value([{id:e.id,nodeElement:y.value,forceUpdate:!0}])},{flush:"post"}),r.watch([()=>d.value.position.x,()=>d.value.position.y,()=>{var h;return(h=p.value)==null?void 0:h.computedPosition.x},()=>{var h;return(h=p.value)==null?void 0:h.computedPosition.y},()=>{var h;return(h=p.value)==null?void 0:h.computedPosition.z},()=>d.value.selected,()=>d.value.dimensions,()=>{var h;return(h=p.value)==null?void 0:h.dimensions}],([h,N,b,B,A])=>{const V={x:h,y:N,z:d.value.selected?1e3:0};v(V,b&&B?{x:b,y:B,z:A}:void 0)},{flush:"post"}),r.onBeforeUnmount(()=>{t.resizeObserver.unobserve(y.value)});const S=h=>{E!=null&&E.value||x.mouseEnter({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},z=h=>{E!=null&&E.value||x.mouseMove({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},T=h=>{E!=null&&E.value||x.mouseLeave({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},H=h=>{x.contextMenu({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},X=h=>{x.doubleClick({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},L=h=>{e.selectable&&(!a.value||!e.draggable)&&Qo(d.value,s.value,g.value,f.value,l),x.click({event:h,node:d.value,connectedEdges:Q([d.value],o.value)})},G=r.computed(()=>d.value.class instanceof Function?d.value.class(d.value):d.value.class),I=r.computed(()=>{const h=(d.value.style instanceof Function?d.value.style(d.value):d.value.style)||{},N=d.value.width instanceof Function?d.value.width(d.value):d.value.width,b=d.value.height instanceof Function?d.value.height(d.value):d.value.height;return N&&(h.width=typeof N=="string"?N:`${N}px`),b&&(h.height=typeof b=="string"?b:`${b}px`),h});return(h,N)=>{var b;return r.openBlock(),r.createElementBlock("div",{ref_key:"nodeElement",ref:y,class:r.normalizeClass(["vue-flow__node",[`vue-flow__node-${e.name}`,i.value,{dragging:r.unref(E),selected:d.value.selected,selectable:e.selectable},r.unref(G)]]),style:r.normalizeStyle({zIndex:(b=d.value.computedPosition.z)!=null?b:0,transform:`translate(${d.value.computedPosition.x}px,${d.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...r.unref(I)}),"data-id":d.value.id,onMouseenter:S,onMousemove:z,onMouseleave:T,onContextmenu:H,onClick:L,onDblclick:X},[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.type),{id:d.value.id,type:d.value.type,data:d.value.data,events:{...d.value.events,...r.unref(O)},selected:!!d.value.selected,connectable:e.connectable,position:d.value.position,dimensions:d.value.dimensions,"is-valid-target-pos":d.value.isValidTargetPos,"is-valid-source-pos":d.value.isValidSourcePos,"parent-node":d.value.parentNode,dragging:r.unref(E),"z-index":d.value.computedPosition.z,"target-position":d.value.targetPosition,"source-position":d.value.sourcePosition,label:d.value.label,"drag-handle":d.value.dragHandle,onUpdateNodeInternals:C},null,40,["id","type","data","events","selected","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle"]))],46,Us)}}}),Gs=["transform"],Ws=["width","height","x","y","rx","ry"],qs=["y"],Ks={name:"EdgeText"},oi=r.defineComponent({...Ks,props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=r.ref();let n=r.ref({x:0,y:0,width:0,height:0});r.onMounted(()=>{n.value=t.value.getBBox()});const o=r.computed(()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`);return(i,a)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Ws)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(i.$attrs,{ref_key:"el",ref:t,class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(i.$slots,"default",{},()=>[typeof e.label!="string"&&typeof e.label?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0})):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64))])],16,qs)],8,Gs))}}),be=function({path:e,centerX:t,centerY:n,label:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:s,labelStyle:c,markerStart:u,markerEnd:f,style:g}){return[r.h("path",{style:{...g},d:e,class:"vue-flow__edge-path","marker-end":f,"marker-start":u}),o?r.h(oi,{x:t,y:n,label:o,labelStyle:c,labelShowBg:s,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};be.props=["path","centerX","centerY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","style"],be.inheritAttrs=!1;function zt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ot({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,s;switch(e){case Z.Left:l=t-zt(t-o,a),s=n;break;case Z.Right:l=t+zt(o-t,a),s=n;break;case Z.Top:l=t,s=n-zt(n-i,a);break;case Z.Bottom:l=t,s=n+zt(i-n,a);break}return[l,s]}function kn({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:o,targetY:i,targetPosition:a=Z.Top,curvature:l=.25}){const[s,c]=Ot({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,f]=Ot({pos:a,x1:o,y1:i,x2:e,y2:t,c:l});return`M${e},${t} C${s},${c} ${u},${f} ${o},${i}`}function ii({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:o,targetY:i,targetPosition:a=Z.Top,curvature:l=.25}){const[s,c]=Ot({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,f]=Ot({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),g=e*.125+s*.375+u*.375+o*.125,m=t*.125+c*.375+f*.375+i*.125,w=Math.abs(g-e),d=Math.abs(m-t);return[g,m,w,d]}function Pt({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case Z.Left:case Z.Right:a=.5*(t+o),l=n;break;case Z.Top:case Z.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function ri({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:o,targetY:i,targetPosition:a=Z.Top}){const[l,s]=Pt({pos:n,x1:e,y1:t,x2:o,y2:i}),[c,u]=Pt({pos:a,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${l},${s} ${c},${u} ${o},${i}`}function ai({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:o,targetY:i,targetPosition:a=Z.Top}){const[l,s]=Pt({pos:n,x1:e,y1:t,x2:o,y2:i}),[c,u]=Pt({pos:a,x1:o,y1:i,x2:e,y2:t}),f=e*.125+l*.375+c*.375+o*.125,g=t*.125+s*.375+u*.375+i*.125,m=Math.abs(f-e),w=Math.abs(g-t);return[f,g,m,w]}const li=[Z.Left,Z.Right],Nn=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=Z.Bottom,targetPosition:a=Z.Top})=>{const l=li.includes(i),s=li.includes(a);if(l&&!s||s&&!l){const w=l?Math.abs(n-e):0,d=e>n?e-w:e+w,p=l?0:Math.abs(o-t),y=t<o?t+p:t-p;return[d,y,w,p]}const u=Math.abs(n-e)/2,f=n<e?n+u:n-u,g=Math.abs(o-t)/2,m=o<t?o+g:o-g;return[f,m,u,g]},si={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},js=({source:e,sourcePosition:t=Z.Bottom,target:n})=>t===Z.Left||t===Z.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ci=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function Qs({source:e,sourcePosition:t=Z.Bottom,target:n,targetPosition:o=Z.Top,center:i,offset:a}){const l=si[t],s=si[o],c={x:e.x+l.x*a,y:e.y+l.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},f=js({source:c,sourcePosition:t,target:u}),g=f.x!==0?"x":"y",m=f[g];let w=[];if(l[g]*s[g]===-1){const d=[{x:i.x,y:c.y},{x:i.x,y:u.y}],p=[{x:c.x,y:i.y},{x:u.x,y:i.y}];l[g]===m?w=g==="x"?d:p:w=g==="x"?p:d}else{const d=[{x:c.x,y:u.y}],p=[{x:u.x,y:c.y}];if(g==="x"?w=l.x===m?p:d:w=l.y===m?d:p,t!==o){const y=g==="x"?"y":"x",x=l[g]===s[y],O=c[y]>u[y],E=c[y]<u[y];(l[g]===1&&(!x&&O||x&&E)||l[g]!==1&&(!x&&E||x&&O))&&(w=g==="x"?d:p)}}return[e,c,...w,u,n]}function Js(e,t,n,o){const i=Math.min(ci(e,t)/2,ci(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${a+i*u},${l}Q ${a},${l} ${a},${l+i*f}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${l+i*c}Q ${a},${l} ${a+i*s},${l}`}function Tt({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:o,targetY:i,targetPosition:a=Z.Top,borderRadius:l=5,centerX:s,centerY:c,offset:u=20}){const[f,g]=Nn({sourceX:e,sourceY:t,targetX:o,targetY:i}),d=Qs({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:typeof s!="undefined"?s:f,y:typeof c!="undefined"?c:g},offset:u});return d.reduce((p,y,x)=>{let O="";return x>0&&x<d.length-1?O=Js(d[x-1],y,d[x+1],l):O=`${x===0?"M":"L"}${y.x} ${y.y}`,p+=O,p},"")}const It=function({sourcePosition:e=Z.Bottom,targetPosition:t=Z.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:c,sourceX:u,targetX:f,targetY:g,curvature:m,markerEnd:w,markerStart:d,style:p}){const[y,x]=ii({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t,curvature:m}),O=kn({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t,curvature:m});return r.h(be,{path:O,centerX:y,centerY:x,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:p,markerEnd:w,markerStart:d})};It.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","style"],It.inheritAttrs=!1;const Dt=function({sourcePosition:e=Z.Bottom,targetPosition:t=Z.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:c,sourceX:u,targetX:f,targetY:g,markerEnd:m,markerStart:w,style:d}){const[p,y]=ai({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t}),x=ri({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t});return r.h(be,{path:x,centerX:p,centerY:y,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:d,markerEnd:m,markerStart:w})};Dt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],Dt.inheritAttrs=!1;const et=function({sourcePosition:e=Z.Bottom,targetPosition:t=Z.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:c,sourceX:u,targetX:f,targetY:g,markerEnd:m,markerStart:w,borderRadius:d,offset:p,style:y}){const[x,O]=Nn({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t}),E=Tt({sourceX:u,sourceY:c,targetX:f,targetY:g,sourcePosition:e,targetPosition:t,borderRadius:d,offset:p});return r.h(be,{path:E,centerX:x,centerY:O,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:y,markerEnd:m,markerStart:w})};et.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","offset","markerEnd","markerStart","style"],et.inheritAttrs=!1;const At=function(e){return r.h(et,{...e,borderRadius:0})};At.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],At.inheritAttrs=!1;const Vt=function({label:e,labelStyle:t={},labelShowBg:n=!0,labelBgStyle:o={},labelBgPadding:i,labelBgBorderRadius:a,sourceY:l,sourceX:s,targetX:c,targetY:u,markerEnd:f,markerStart:g,style:m}){const w=r.computed(()=>{const p=Math.abs(u-l)/2;return u<l?u+p:u-p}),d=r.computed(()=>{const p=Math.abs(c-s)/2;return c<s?c+p:c-p});return r.h(be,{path:`M ${s},${l}L ${c},${u}`,centerX:d.value,centerY:w.value,label:e,labelStyle:t,labelShowBg:n,labelBgStyle:o,labelBgPadding:i,labelBgBorderRadius:a,style:m,markerEnd:f,markerStart:g})};Vt.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],Vt.inheritAttrs=!1;const ec=(e,t,n)=>n===Z.Left?e-t:n===Z.Right?e+t:e,tc=(e,t,n)=>n===Z.Top?e-t:n===Z.Bottom?e+t:e,En=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Z.Top}){const i=r.computed(()=>{const l=ec(t,e,o);return isNaN(l)?0:l}),a=r.computed(()=>{const l=tc(n,e,o);return isNaN(l)?0:l});return r.h("circle",{class:"vue-flow__edgeupdater",cx:i.value,cy:a.value,r:e,stroke:"transparent",fill:"transparent"})};En.props=["radius","centerX","centerY","position"];const nc=r.defineComponent({props:["name","type","id","data","events","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","labelShowBg","style","animated","label","updatable","selectable","target","source","sourceNode","targetNode","sourceHandleId","targetHandleId","selected","markerEnd","markerStart","connectionMode","edgeUpdaterRadius","updating"],emits:["source-mousedown","target-mousedown"],setup(e,{emit:t}){let n=r.ref(!1);const o=r.ref();r.provide(Lo,e.id),r.provide(Zo,o);const i=()=>n.value=!0,a=()=>n.value=!1,l=c=>{t("source-mousedown",c)},s=c=>{t("target-mousedown",c)};return()=>{var O,E;if(!e.sourceNode||!e.targetNode)return null;let c;e.connectionMode===_e.Strict?c=e.sourceNode.handleBounds.source:c=(O=e.sourceNode.handleBounds.source)!=null?O:e.sourceNode.handleBounds.target;const u=Ko(c,e.sourceHandleId);let f;e.connectionMode===_e.Strict?f=e.targetNode.handleBounds.target:f=(E=e.targetNode.handleBounds.target)!=null?E:e.targetNode.handleBounds.source;const g=Ko(f,e.targetHandleId),m=u?u.position:Z.Bottom,w=g?g.position:Z.Top,{sourceX:d,sourceY:p,targetY:y,targetX:x}=Ps(e.sourceNode,u,m,e.targetNode,g,w);return r.h("g",{ref:o,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.name}`,{updating:n.value,selected:e.selected,animated:e.animated,inactive:!e.selectable}]},[e.updating?null:r.h(e.type,{id:e.id,sourceNode:e.sourceNode,targetNode:e.targetNode,source:e.source,target:e.target,updatable:e.updatable,selected:e.selected,animated:e.animated,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,data:e.data,events:e.events,style:e.style,markerStart:`url(#${pe(e.markerStart)})`,markerEnd:`url(#${pe(e.markerEnd)})`,sourcePosition:m,targetPosition:w,sourceX:d,sourceY:p,targetX:x,targetY:y,sourceHandleId:e.sourceHandleId,targetHandleId:e.targetHandleId}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:l,onMouseenter:i,onMouseout:a},r.h(En,{position:m,centerX:d,centerY:p,radius:e.edgeUpdaterRadius,"data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:s,onMouseenter:i,onMouseout:a},r.h(En,{position:w,centerX:x,centerY:y,radius:e.edgeUpdaterRadius,"data-type":"target"}))]:null]])}}}),oc={class:"vue-flow__connection"},ic=["d","marker-end","marker-start"],rc={name:"ConnectionLine"},ac=r.defineComponent({...rc,props:{sourceNode:null},setup(e){var z,T,H;const t=j(),n=r.toRef(t,"getNodes"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionPosition"),a=r.toRef(t,"connectionLineType"),l=r.toRef(t,"connectionLineStyle"),s=r.toRef(t,"connectionLineOptions"),c=r.toRef(t,"viewport"),u=(z=r.inject(St))==null?void 0:z["connection-line"],f=u==null?void 0:u({}),g=o.value.handleId;o.value.nodeId;const m=o.value.type,w=g&&m?(T=e.sourceNode.handleBounds[m])==null?void 0:T.find(X=>X.id===g):m&&((H=e.sourceNode.handleBounds[m!=null?m:"source"])==null?void 0:H[0]),d=w?w.x+w.width/2:e.sourceNode.dimensions.width/2,p=w?w.y+w.height/2:e.sourceNode.dimensions.height,y=e.sourceNode.computedPosition.x+d,x=e.sourceNode.computedPosition.y+p,E=(w==null?void 0:w.position)===Z.Left||(w==null?void 0:w.position)===Z.Right?Z.Left:Z.Top,v=r.computed(()=>(i.value.x-c.value.x)/c.value.zoom),C=r.computed(()=>(i.value.y-c.value.y)/c.value.zoom),S=r.computed(()=>{let X=`M${y},${x} ${v.value},${C.value}`;switch(a.value||s.value.type){case xe.Bezier:X=kn({sourceX:y,sourceY:x,sourcePosition:w==null?void 0:w.position,targetX:v.value,targetY:C.value,targetPosition:E});break;case xe.Step:X=Tt({sourceX:y,sourceY:x,sourcePosition:w==null?void 0:w.position,targetX:v.value,targetY:C.value,targetPosition:E,borderRadius:0});break;case xe.SmoothStep:X=Tt({sourceX:y,sourceY:x,sourcePosition:w==null?void 0:w.position,targetX:v.value,targetY:C.value,targetPosition:E});break}return X});return(X,L)=>{var G;return r.openBlock(),r.createElementBlock("g",oc,[r.unref(f)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(u)),r.normalizeProps(r.mergeProps({key:0},{sourceX:y,sourceY:x,sourcePosition:(G=r.unref(w))==null?void 0:G.position,targetX:v.value,targetY:C.value,targetPosition:r.unref(E),nodes:n.value,sourceNode:e.sourceNode,sourceHandle:r.unref(w),markerEnd:`url(#${r.unref(pe)(s.value.markerEnd)})`,markerStart:`url(#${r.unref(pe)(s.value.markerStart)})`})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(S),class:r.normalizeClass(["vue-flow__connection-path",s.value.class]),style:r.normalizeStyle(l.value||s.value.style||{}),"marker-end":`url(#${r.unref(pe)(s.value.markerEnd)})`,"marker-start":`url(#${r.unref(pe)(s.value.markerStart)})`},null,14,ic))])}}}),lc={name:"NodesSelection"},sc=r.defineComponent({...lc,setup(e){const t=j(),n=r.toRef(t,"emits");r.toRef(t,"setState");const o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes");r.toRef(t,"snapToGrid"),r.toRef(t,"snapGrid");const a=r.toRef(t,"noPanClassName"),l=r.ref();wi({el:l,onStart(f,g,m){n.value.selectionDragStart({event:f,node:g,nodes:m})},onDrag(f,g,m){n.value.selectionDrag({event:f,node:g,nodes:m})},onStop(f,g,m){n.value.selectionDragStop({event:f,node:g,nodes:m})}});const s=r.computed(()=>Bt(i.value)),c=r.computed(()=>({width:`${s.value.width}px`,height:`${s.value.height}px`,top:`${s.value.y}px`,left:`${s.value.x}px`})),u=f=>n.value.selectionContextMenu({event:f,nodes:i.value});return(f,g)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",a.value]),style:r.normalizeStyle({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:l,class:"vue-flow__nodesselection-rect",style:r.normalizeStyle(r.unref(c)),onContextmenu:u},null,36)],6))}}),cc={name:"SelectionRect"},uc=r.defineComponent({...cc,props:{width:null,height:null,x:null,y:null},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection",style:r.normalizeStyle({width:`${e.width}px`,height:`${e.height}px`,transform:`translate(${e.x}px, ${e.y}px)`})},null,4))}});function ui(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const dc={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},fc={name:"UserSelection"},hc=r.defineComponent({...fc,setup(e){const{userSelectionActive:t,nodesSelectionActive:n,getNodes:o,getEdges:i,viewport:a,addSelectedEdges:l,addSelectedNodes:s}=j(),c=Ln("user-selection",null);let u=r.ref(0),f=r.ref(0);const g=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1});let m=r.ref(g());const w=()=>{m.value=g(),u.value=0,f.value=0,t.value=!1},d=O=>{const E=ui(O);!E||(m.value={width:0,height:0,startX:E.x,startY:E.y,x:E.x,y:E.y,draw:!0},t.value=!0,n.value=!0)},p=O=>{if(!t||!m.value.draw)return;const E=ui(O);if(!E)return;const v=m.value.startX,C=m.value.startY,S={...m.value,x:E.x<v?E.x:m.value.x,y:E.y<C?E.y:m.value.y,width:Math.abs(E.x-v),height:Math.abs(E.y-C)},z=yn(o.value,m.value,a.value),T=Q(z,i.value);m.value=S,s(z),l(T),u.value=z.length,f.value=T.length},y=()=>{m.value=g(),n.value=u.value>0,t.value=!1},x=()=>{n.value=u.value>0,w()};return he(c,"mousedown",d),he(c,"mousemove",p),he(c,"click",y),he(c,"mouseup",y),he(c,"mouseleave",x),r.onBeforeUnmount(w),(O,E)=>(r.openBlock(),r.createElementBlock("div",dc,[m.value.draw?(r.openBlock(),r.createBlock(uc,{key:0,width:m.value.width,height:m.value.height,x:m.value.x,y:m.value.y},null,8,["width","height","x","y"])):r.createCommentVNode("",!0)],512))}}),di={input:_n,default:xn,output:bn},fi={default:It,straight:Vt,step:At,smoothstep:et,simplebezier:Dt},mc=e=>typeof e!="undefined",gc=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:qe.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:xe.Bezier,connectionLineOptions:{type:xe.Bezier,style:{}},connectionMode:_e.Loose,connectionStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:Ns(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,vueFlowVersion:"0.4.40"});var hi=e=>{const t=gc();return e&&Object.keys(e).forEach(n=>{const o=e[n];mc(o)&&(t[n]=o)}),t},pc=(e,t)=>{const n=k=>{e.hooks.updateNodeInternals.trigger(k)},o=r.ref();e.hooks.paneReady.on(({id:k})=>{o.value=pi(k)});const i=async()=>new Promise(k=>{o.value?k(o.value):De(o).not.toBeUndefined().then(()=>k(o.value))}),a=(k,_,M)=>{const P=[];k.forEach($=>{var W,K,ce,Oe;const D={id:$.id,type:"position",dragging:M,from:$.from};if(_&&(D.computedPosition=$.position,D.position=$.position,$.parentNode)){const Pe=t.getNode.value($.parentNode);D.position={x:D.position.x-((K=(W=Pe==null?void 0:Pe.computedPosition)==null?void 0:W.x)!=null?K:0),y:D.position.y-((Oe=(ce=Pe==null?void 0:Pe.computedPosition)==null?void 0:ce.y)!=null?Oe:0)}}P.push(D)}),P!=null&&P.length&&e.hooks.nodesChange.trigger(P)},l=k=>{if(!e.vueFlowRef)return;const _=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!_)return;const M=k.reduce((P,$)=>{const D=t.getNode.value($.id);if(D){const W=Ke($.nodeElement),K=window.getComputedStyle(_),{m22:ce}=new window.DOMMatrixReadOnly(K.transform);(!!(W.width&&W.height&&(D.dimensions.width!==W.width||D.dimensions.height!==W.height))||$.forceUpdate)&&(D.handleBounds.source=jo(".source",$.nodeElement,ce),D.handleBounds.target=jo(".target",$.nodeElement,ce),D.dimensions=W,P.push({id:D.id,type:"dimensions",dimensions:W}))}return P},[]);M.length&&e.hooks.nodesChange.trigger(M)},s=(k,_)=>{const M=k.map($=>$.id);let P;e.multiSelectionActive?P=M.map($=>Rt($,_)):P=ti(e.nodes,M),P.length&&e.hooks.nodesChange.trigger(P)},c=(k,_)=>{const M=k.map($=>$.id);let P;e.multiSelectionActive?P=M.map($=>Rt($,_)):P=ti(e.edges,M),P.length&&e.hooks.edgesChange.trigger(P)},u=k=>{s(k,!0)},f=k=>{c(k,!0)},g=k=>{u(k.filter(ge)),f(k.filter(je))},m=k=>{s(k,!1)},w=k=>{c(k,!1)},d=k=>{k?(k.nodes&&m(k.nodes.filter(ge)),k.edges&&w(k.edges.filter(je))):(m([]),w([]))},p=k=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([k,e.maxZoom]),e.minZoom=k},y=k=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([e.minZoom,k]),e.maxZoom=k},x=k=>{var _;(_=e.d3Zoom)==null||_.translateExtent(k),e.translateExtent=k},O=async k=>{if(e.nodeExtent=k,o.value){const _=t.getNodes.value.map(M=>M.id);n(_)}},E=k=>{e.nodesDraggable=k,e.nodesConnectable=k,e.elementsSelectable=k},v=(k,_)=>{if(!e.initialized&&!k.length)return;e.nodes||(e.nodes=[]);const M=k instanceof Function?k(e.nodes):k;e.nodes=ni(M,t.getNode.value,e.nodes,_!=null?_:e.nodeExtent)},C=k=>{if(!e.initialized&&!k.length)return;const _=k instanceof Function?k(e.edges):k;e.edges=_.reduce((M,P)=>{const $=t.getNode.value(P.source),D=t.getNode.value(P.target),W=!$||typeof $=="undefined",K=!D||typeof D=="undefined";if(W&&console.warn(`[vue-flow]: Couldn't create edge for source id: ${P.source}; edge id: ${P.id}`),K&&console.warn(`[vue-flow]: Couldn't create edge for target id: ${P.target}; edge id: ${P.id}`),W||K)return M;const ce=t.getEdge.value(P.id);return M.push(r.shallowReactive({...mn(P,Object.assign({},ce,e.defaultEdgeOptions)),sourceNode:$,targetNode:D})),M},[])},S=(k,_)=>{if(!e.initialized&&!k.length||!k)return;const M=k instanceof Function?k([...e.nodes,...e.edges]):k;v(M.filter(Mt),_),C(M.filter(se))},z=(k,_)=>{const M=k instanceof Function?k(e.nodes):k,$=ni(M,t.getNode.value,e.nodes,_!=null?_:e.nodeExtent).map(ei);$.length&&e.hooks.nodesChange.trigger($)},T=k=>{const M=(k instanceof Function?k(e.edges):k).reduce((P,$)=>{const D=Hs({...$,...e.defaultEdgeOptions},e.edges);if(D){const W=t.getNode.value(D.source),K=t.getNode.value(D.target),ce=!W||typeof W=="undefined",Oe=!K||typeof K=="undefined";if(ce&&console.warn(`[vueflow]: Couldn't create edge for source id: ${D.source}; edge id: ${D.id}`),Oe&&console.warn(`[vueflow]: Couldn't create edge for target id: ${D.target}; edge id: ${D.id}`),Oe||ce)return P;P.push(ei(r.shallowReactive({...D,sourceNode:W,targetNode:K})))}return P},[]);M.length&&e.hooks.edgesChange.trigger(M)},H=(k,_=!0)=>{const M=k instanceof Function?k(e.nodes):k,P=[],$=[];M.forEach(D=>{if(P.push(vn(typeof D=="string"?D:D.id)),_){const W=Q([typeof D=="string"?{id:D}:D],e.edges);$.push(...W.map(K=>vn(K.id)))}}),P.length&&e.hooks.nodesChange.trigger(P),$.length&&e.hooks.edgesChange.trigger($)},X=k=>{const _=k instanceof Function?k(e.edges):k,M=[];_.forEach(P=>{M.push(vn(typeof P=="string"?P:P.id))}),e.hooks.edgesChange.trigger(M)},L=r.computed(()=>e.nodes.map(k=>k.id)),G=r.computed(()=>e.edges.map(k=>k.id)),I=k=>e.nodes&&!L.value.length?e.nodes.find(_=>_.id===k):e.nodes[L.value.indexOf(k)],h=k=>e.edges&&!G.value.length?e.edges.find(_=>_.id===k):e.edges[G.value.indexOf(k)],N=(k,_)=>Fs(k,_,e.edges),b=k=>Qe(k,e.nodes),B=k=>Qe(k,e.edges),A=(k,_,M)=>{e.connectionStartHandle=k,_&&(e.connectionPosition=_),e.hooks.connectStart.trigger({event:M,nodeId:k.nodeId,handleId:k.handleId,handleType:k.type})},V=k=>{e.connectionPosition=k},R=k=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStartHandle=null,e.hooks.connectEnd.trigger(k)},U=k=>{var $,D;const _=k instanceof Function?k(e):k,M=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"];typeof _.modelValue!="undefined"&&S(_.modelValue,($=_.nodeExtent)!=null?$:e.nodeExtent),typeof _.nodes!="undefined"&&v(_.nodes,(D=_.nodeExtent)!=null?D:e.nodeExtent),typeof _.edges!="undefined"&&C(_.edges);const P=()=>{typeof _.maxZoom!="undefined"&&y(_.maxZoom),typeof _.minZoom!="undefined"&&p(_.minZoom),typeof _.translateExtent!="undefined"&&x(_.translateExtent),typeof _.nodeExtent!="undefined"&&O(_.nodeExtent)};Object.keys(_).forEach(W=>{const K=_[W];!M.includes(W)&&Vs(K)&&(e[W]=K)}),e.d3Zoom?P():De(()=>e.d3Zoom).not.toBeUndefined().then(P),e.initialized||(e.initialized=!0)};return{updateNodePositions:a,updateNodeDimensions:l,setElements:S,setNodes:v,setEdges:C,addNodes:z,addEdges:T,removeNodes:H,removeEdges:X,findNode:I,findEdge:h,updateEdge:N,applyEdgeChanges:B,applyNodeChanges:b,addSelectedElements:g,addSelectedNodes:u,addSelectedEdges:f,setMinZoom:p,setMaxZoom:y,setTranslateExtent:x,setNodeExtent:O,removeSelectedElements:d,removeSelectedNodes:m,removeSelectedEdges:w,startConnection:A,updateConnection:V,endConnection:R,setInteractive:E,setState:U,fitView:async(k={padding:.1})=>{const{fitView:_}=await i();_(k)},zoomIn:async k=>{const{zoomIn:_}=await i();_(k)},zoomOut:async k=>{const{zoomOut:_}=await i();_(k)},zoomTo:async(k,_)=>{const{zoomTo:M}=await i();M(k,_)},setTransform:async(k,_)=>{const{setTransform:M}=await i();M(k,_)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(k,_,M)=>{const{setCenter:P}=await i();P(k,_,M)},fitBounds:async(k,_)=>{const{fitBounds:M}=await i();M(k,_)},project:k=>pn(k,e.viewport,e.snapToGrid,e.snapGrid),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:n,$reset:()=>{U(hi())},$destroy:()=>{}}},yc=e=>{const t=r.computed(()=>e.nodes.map(d=>d.id)),n=r.computed(()=>e.edges.map(d=>d.id)),o=r.computed(()=>d=>e.nodes&&!t.value.length?e.nodes.find(p=>p.id===d):e.nodes[t.value.indexOf(d)]),i=r.computed(()=>d=>e.edges&&!n.value.length?e.edges.find(p=>p.id===d):e.edges[n.value.indexOf(d)]),a=r.computed(()=>{var y;const d={...fi,...e.edgeTypes},p=Object.keys(d);return(y=e.edges)==null||y.forEach(x=>x.type&&!p.includes(x.type)&&(d[x.type]=x.type)),d}),l=r.computed(()=>{var y;const d={...di,...e.nodeTypes},p=Object.keys(d);return(y=e.nodes)==null||y.forEach(x=>x.type&&!p.includes(x.type)&&(d[x.type]=x.type)),d}),s=r.computed(()=>{const d=e.nodes.filter(p=>!p.hidden);return e.onlyRenderVisibleElements?d&&yn(d,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):d!=null?d:[]}),c=(d,p,y)=>{if(p=p!=null?p:o.value(d.source),y=y!=null?y:o.value(d.target),!p||!y){e.edges=e.edges.filter(x=>x.id!==d.id),console.warn(`[vue-flow]: Orphaned edge ${d.id} removed.`);return}return!d.hidden&&y&&!y.hidden&&p&&!p.hidden&&p.dimensions.width&&p.dimensions.height&&y.dimensions.width&&y.dimensions.height},u=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(d=>{const p=o.value(d.source),y=o.value(d.target);return c(d,p,y)&&Ts({sourcePos:p.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:p.dimensions.width,sourceHeight:p.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(d=>c(d))),f=r.computed(()=>[...s.value,...u.value]),g=r.computed(()=>e.nodes.filter(d=>d.selected)),m=r.computed(()=>e.edges.filter(d=>d.selected)),w=r.computed(()=>{var d,p;return[...(d=g.value)!=null?d:[],...(p=m.value)!=null?p:[]]});return{getNode:o,getEdge:i,getElements:f,getEdgeTypes:a,getNodeTypes:l,getEdges:u,getNodes:s,getSelectedElements:w,getSelectedNodes:g,getSelectedEdges:m}};class ke{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return ke.instance||(ke.instance=new ke),ke.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=hi(n),i=r.reactive(o),a=yc(i),l=pc(i,a),s={};Object.entries(i.hooks).forEach(([f,g])=>{const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;s[m]=g.on});const c={};Object.entries(i.hooks).forEach(([f,g])=>{c[f]=g.trigger}),l.setState(i),n&&(n.modelValue&&l.setElements(n.modelValue),n.nodes&&l.setNodes(n.nodes),n.edges&&l.setEdges(n.edges));const u={...s,...a,...l,...r.toRefs(i),emits:c,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,u),u}getId(){return`vue-flow-${this.currentId++}`}}var j=e=>{const t=ke.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const s=r.inject(dn,null);typeof s!="undefined"&&s!==null&&(a=s)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const s=o!=null?o:t.getId();a=t.create(s,e),n&&(l=!0)}else e&&a.setState(e);if(!a)throw new Error("[vueflow]: store instance not found.");return n&&(r.provide(dn,a),n.vueFlowId=a.id,l&&Ie(()=>{t.get(a.id)&&a.$destroy(),a=null})),a};const Sn=(e,t,n,o,i,a,l,s,c)=>{var w,d;const u=l.elementFromPoint(e.clientX,e.clientY),f=(u==null?void 0:u.classList.contains("target"))||!1,g=(u==null?void 0:u.classList.contains("source"))||!1,m={elementBelow:u,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(u&&(f||g)&&(m.isHoveringHandle=!0,t===_e.Strict?n&&g||!n&&f:!0)){const y=(w=u.getAttribute("data-nodeid"))!=null?w:"",x=(d=u.getAttribute("data-handleid"))!=null?d:"",O=n?y:o,E=n?x:i,v=n?o:y,S={source:O,sourceHandle:E,target:v,targetHandle:n?i:x};m.connection=S,m.isValid=(Te(a)?a(S,{edges:s,sourceNode:c(O),targetNode:c(v)}):!0)||!m.connection.target||!m.connection.source}return m},mi=e=>{e==null||e.classList.remove("vue-flow__handle-valid"),e==null||e.classList.remove("vue-flow__handle-connecting")};var Cn=()=>{const e=j(),t=r.toRef(e,"edges"),n=r.toRef(e,"connectOnClick"),o=r.toRef(e,"nodesConnectable"),i=r.toRef(e,"connectionStartHandle"),a=r.toRef(e,"connectionMode"),l=r.toRef(e,"emits"),s=r.toRef(e,"startConnection"),c=r.toRef(e,"updateConnection"),u=r.toRef(e,"endConnection"),f=r.toRef(e,"getNode"),g=r.toRef(e,"vueFlowRef");let m;return{onMouseDown:(p,y,x,O,E,v,C,S)=>{const z=Uo(p.target);if(!z)return;let T=E;const H=f.value(x);if(H&&(typeof H.connectable=="undefined"?o.value:H.connectable)===!1)return;E||H&&(T=O?H.isValidSourcePos:H.isValidTargetPos);const X=z.elementFromPoint(p.clientX,p.clientY),L=X==null?void 0:X.classList.contains("target"),G=X==null?void 0:X.classList.contains("source");if(!g.value||!L&&!G&&!v)return;const I=v!=null?v:L?"target":"source",h=g.value.getBoundingClientRect();s.value({nodeId:x,handleId:y,type:I},{x:p.clientX-h.left,y:p.clientY-h.top},p);function N(B){c.value({x:B.clientX-h.left,y:B.clientY-h.top});const{connection:A,elementBelow:V,isValid:R,isHoveringHandle:U}=Sn(B,a.value,O,x,y,T,z,t.value,f.value);if(!U)return mi(m);!(A.source===A.target)&&V&&(m=V,V.classList.add("vue-flow__handle-connecting"),V.classList.toggle("vue-flow__handle-valid",R))}function b(B){const{connection:A,isValid:V}=Sn(B,a.value,O,x,y,T,z,t.value,f.value),R=A.source===A.target;V&&!R&&(C?C(A):l.value.connect(A)),v&&(S==null||S()),mi(m),u.value(B),z.removeEventListener("mousemove",N),z.removeEventListener("mouseup",b)}z.addEventListener("mousemove",N),z.addEventListener("mouseup",b)},onClick:(p,y,x,O,E)=>{var v;if(!!n.value)if(!i.value)s.value({nodeId:x,type:O,handleId:y},void 0,p);else{let C=E!=null?E:()=>!0;const S=f.value(x);if(S&&(typeof S.connectable=="undefined"?o.value:S.connectable)===!1)return;E||S&&(C=(v=O!=="target"?S.isValidTargetPos:S.isValidSourcePos)!=null?v:()=>!0);const z=Uo(p.target),{connection:T,isValid:H}=Sn(p,a.value,i.value.type==="target",i.value.nodeId,i.value.handleId||null,C,z,t.value,f.value),X=T.source===T.target;H&&!X&&l.value.connect(T),u.value(p)}}}},Re=()=>typeof window!="undefined"?window:{chrome:!1};function gi(e){const t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}var tt=(e,t)=>{const n=Re();let o=r.ref(!1);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),Fn(r.unref(e),i=>{gi(i)||(i.preventDefault(),o.value=!0)},{eventName:"keydown"}),Fn(r.unref(e),i=>{gi(i)||(i.preventDefault(),o.value=!1)},{eventName:"keyup"}),typeof n.addEventListener!="undefined"&&he(n,"blur",()=>{o.value=!1}),t&&typeof t=="function"&&t(o.value),o};const Mn=.1,$n=(e,t=0)=>e.transition().duration(t),ze=async(e,t)=>{const n=Re();return"screen"in n&&(await De(e).toMatch(({height:o,width:i})=>!isNaN(i)&&i>0&&!isNaN(o)&&o>0),t.length>0&&await De(t).toMatch(o=>!!o.filter(({dimensions:{width:i,height:a}})=>!isNaN(i)&&i>0&&!isNaN(a)&&a>0).length)),!0};var pi=e=>{const t=j({id:e}),n=r.toRef(t,"onPaneReady"),o=r.toRef(t,"nodes"),i=r.toRef(t,"d3Zoom"),a=r.toRef(t,"d3Selection"),l=r.toRef(t,"dimensions"),s=r.toRef(t,"translateExtent"),c=r.toRef(t,"minZoom"),u=r.toRef(t,"maxZoom"),f=r.toRef(t,"viewport"),g=r.toRef(t,"snapToGrid"),m=r.toRef(t,"snapGrid"),w=r.toRef(t,"getNodes");let d=r.ref(!1);n.value(()=>d.value=!0);const p=async(v,C)=>{d.value||await ze(l.value,w.value),a.value&&i.value&&i.value.scaleTo($n(a.value,C==null?void 0:C.duration),v)},y=async(v,C)=>{d.value||await ze(l.value,w.value),a.value&&i.value&&i.value.scaleBy($n(a.value,C),v)},x=async v=>{await y(1.2,v==null?void 0:v.duration)},O=async v=>{await y(1/1.2,v==null?void 0:v.duration)},E=(v,C,S,z)=>{const{x:T,y:H}=hn({x:-v,y:-C},s.value),X=Et.translate(-T,-H).scale(S);a.value&&i.value&&i.value.transform($n(a.value,z),X)};return{zoomIn:x,zoomOut:O,zoomTo:p,setTransform:async(v,C)=>{d.value||await ze(l.value,w.value),E(v.x,v.y,v.zoom,C==null?void 0:C.duration)},getTransform:()=>({x:f.value.x,y:f.value.y,zoom:f.value.zoom}),fitView:async(v={padding:Mn,includeHiddenNodes:!1,duration:0})=>{var X,L,G;if(d.value||await ze(l.value,w.value),!w.value.length)return;let C=[];v.nodes&&(C=o.value.filter(I=>{var h;return(h=v.nodes)==null?void 0:h.includes(I.id)})),(!C||!C.length)&&(C=v.includeHiddenNodes?C:w.value);const S=Bt(C),{x:z,y:T,zoom:H}=wn(S,l.value.width,l.value.height,(X=v.minZoom)!=null?X:c.value,(L=v.maxZoom)!=null?L:u.value,(G=v.padding)!=null?G:Mn,v.offset);E(z,T,H,v==null?void 0:v.duration)},setCenter:async(v,C,S)=>{d.value||await ze(l.value,w.value);const z=typeof(S==null?void 0:S.zoom)!="undefined"?S.zoom:u.value,T=l.value.width/2-v*z,H=l.value.height/2-C*z;E(T,H,z,S==null?void 0:S.duration)},fitBounds:async(v,C={padding:Mn})=>{d.value||await ze(l.value,w.value);const{x:S,y:z,zoom:T}=wn(v,l.value.width,l.value.height,c.value,u.value,C.padding);E(S,z,T,C==null?void 0:C.duration)},project:v=>pn(v,f.value,g.value,m.value)}};function yi(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function wc(e,t,n,o){return e.filter(i=>(i.selected||i.id===o)&&(!i.parentNode||!Wo(i,n))).map(i=>{var a,l;return r.markRaw({id:i.id,position:i.computedPosition||{x:0,y:0,z:0},distance:{x:t.x-((a=i.computedPosition)==null?void 0:a.x)||0,y:t.y-((l=i.computedPosition)==null?void 0:l.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function Bn({id:e,dragItems:t,getNode:n}){const o=t.map(i=>({...n.value(i.id)}));return[e?o.find(i=>i.id===e):o[0],o]}function vc(e,t,n,o,i,a){const l={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&o){const[c,u]=o;l.x=c*Math.round(l.x/c),l.y=u*Math.round(l.y/u)}const s=xc(e,a,i);return e.position=s?hn(l,s):l,e}function xc(e,t,n){var i,a,l,s;let o=e.extent||t;if(e.extent==="parent"&&n)e.parentNode&&e.dimensions.width&&e.dimensions.height&&(o=n.computedPosition&&n.dimensions.width&&n.dimensions.height?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:o);else if(e.extent&&e.parentNode){const c=e.extent,u=(a=(i=n==null?void 0:n.computedPosition)==null?void 0:i.x)!=null?a:0,f=(s=(l=n==null?void 0:n.computedPosition)==null?void 0:l.y)!=null?s:0;o=[[c[0][0]+u,c[0][1]+f],[c[1][0]+u,c[1][1]+f]]}return o}function wi(e){const t=r.effectScope(),n=t.run(()=>{const o=j(),i=r.toRef(o,"viewport"),a=r.toRef(o,"snapToGrid"),l=r.toRef(o,"snapGrid"),s=r.toRef(o,"noDragClassName"),c=r.toRef(o,"nodes"),u=r.toRef(o,"nodeExtent"),f=r.toRef(o,"getNode"),g=r.toRef(o,"multiSelectionActive"),m=r.toRef(o,"nodesSelectionActive"),w=r.toRef(o,"selectNodesOnDrag"),d=r.toRef(o,"removeSelectedElements"),p=r.toRef(o,"addSelectedNodes"),y=r.toRef(o,"updateNodePositions"),x=e,O=r.toRef(x,"onStart"),E=r.toRef(x,"onDrag"),v=r.toRef(x,"onStop"),C=r.toRef(x,"el"),S=r.toRef(x,"disabled",!1),z=r.toRef(x,"id"),T=r.ref(!1);let H=r.ref(),X=r.ref({x:void 0,y:void 0}),L=r.ref();const G=h=>(h!=null?h:a.value)?l.value:void 0,I=(h,N)=>{const b=h.sourceEvent.touches?h.sourceEvent.touches[0].clientX:h.sourceEvent.clientX,B=h.sourceEvent.touches?h.sourceEvent.touches[0].clientY:h.sourceEvent.clientY;return pn({x:b,y:B},i.value,!!N,N!=null?N:l.value)};return r.watch([()=>S.value,()=>C.value],()=>{if(C.value){const h=ne(C.value),N=z.value?f.value(z.value):void 0;S.value?h.on(".drag",null):(L.value=Oa().on("start",b=>{!w.value&&!g.value&&z.value&&(N!=null&&N.selected||d.value()),N&&!S.value&&w.value&&Qo(N,g.value,p.value,d.value,m);const B=I(b,G(N==null?void 0:N.snapGrid));if(H.value=wc(c.value,B,f.value,z.value),O.value&&H.value){const[A,V]=Bn({id:z.value,dragItems:H.value,getNode:f});O.value(b.sourceEvent,A,V)}}).on("drag",b=>{const B=G(N==null?void 0:N.snapGrid),A=I(b,B);if((X.value.x!==A.x||X.value.y!==A.y)&&H.value&&(X.value=A,H.value=H.value.map(V=>vc(V,A,!!B,B!=null?B:l.value,V.parentNode?f.value(V.parentNode):void 0,u.value)),y.value(H.value,!0,!0),T.value=!0,E.value)){const[V,R]=Bn({id:z.value,dragItems:H.value,getNode:f});E.value(b.sourceEvent,V,R)}b.on("end",V=>{if(T.value=!1,v.value&&H.value){y.value(H.value,!1,!1);const[R,U]=Bn({id:z.value,dragItems:H.value,getNode:f});v.value(V.sourceEvent,R,U)}})}).filter(b=>{const B=b.target;return!b.button&&(!s.value||!yi(B,`.${s.value}`,C)&&(!(N!=null&&N.dragHandle)||yi(B,N.dragHandle,C)))}),h.call(L.value))}}),T});return Ie(()=>t.stop()),n}const _c=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()});function bc(e,t){const n=_c();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const kc=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()});function Nc(e,t){const n=kc();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Ec(e){const t=e!=null?e:r.inject(Lo,""),n=r.inject(Zo,null),{findEdge:o}=j(),i=o(t);if(!i)throw new Error(`[vue-flow]: useEdge - Edge with id ${t} not found!`);return{id:t,edge:i,edgeEl:n}}function vi(e){const t=e!=null?e:r.inject(fn,""),n=r.inject(Fo,null),{findNode:o,getEdges:i}=j(),a=o(t);if(!a)throw new Error(`[vue-flow]: useNode - Node with id ${t} not found!`);return{id:t,node:a,nodeEl:n,parentNode:a.parentNode?o(a.parentNode):void 0,connectedEdges:r.computed(()=>Q([a],i.value))}}const Sc={name:"SelectionPane",inheritAttrs:!1},Cc=r.defineComponent({...Sc,setup(e){const{id:t,deleteKeyCode:n,selectionKeyCode:o,multiSelectionKeyCode:i,emits:a,nodesSelectionActive:l,userSelectionActive:s,multiSelectionActive:c,elementsSelectable:u,getNodes:f,getSelectedEdges:g,removeSelectedElements:m,removeNodes:w,removeEdges:d}=j(),p=S=>{a.paneClick(S),l.value=!1,m()},y=S=>a.paneContextMenu(S),x=S=>a.paneScroll(S),O=S=>a.paneMouseEnter(S),E=S=>a.paneMouseLeave(S),v=S=>a.paneMouseMove(S);tt(n,S=>{if(!S)return;const z=f.value.reduce((T,H)=>((!H.selected&&H.parentNode&&T.find(X=>X.id===H.parentNode)||H.selected)&&T.push(H),T),[]);(z||g.value)&&(g.value.length>0&&d(g.value),z.length>0&&w(z),l.value=!1,m())}),tt(i,S=>{c.value=S});const C=tt(o,S=>{s.value&&S||(s.value=S&&u.value)});return(S,z)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.unref(C)?(r.openBlock(),r.createBlock(r.unref(hc),{key:`user-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),r.unref(l)?(r.openBlock(),r.createBlock(r.unref(sc),{key:`nodes-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),(r.openBlock(),r.createElementBlock("div",{key:`pane-${r.unref(t)}`,class:"vue-flow__pane vue-flow__container",onClick:p,onContextmenu:y,onWheel:x,onMouseenter:O,onMousemove:v,onMouseleave:E},null,32))],64))}}),Mc={class:"vue-flow__nodes vue-flow__container"},$c={name:"Nodes"},Bc=r.defineComponent({...$c,setup(e){const t=r.inject(St),n=j(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"elementsSelectable"),a=r.toRef(n,"nodesConnectable");r.toRef(n,"noPanClassName"),r.toRef(n,"snapToGrid"),r.toRef(n,"snapGrid"),r.toRef(n,"getNode");const l=r.toRef(n,"getNodes"),s=r.toRef(n,"getNodeTypes"),c=r.toRef(n,"updateNodeDimensions"),u=d=>typeof d=="undefined"?o.value:d,f=d=>typeof d=="undefined"?i.value:d,g=d=>typeof d=="undefined"?a.value:d,m=r.ref();r.onMounted(()=>{m.value=new ResizeObserver(d=>{const p=d.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));c.value(p)})}),r.onBeforeUnmount(()=>{var d;return(d=m.value)==null?void 0:d.disconnect()});const w=(d,p)=>{const y=d||"default";let x=p!=null?p:s.value[y];const O=r.getCurrentInstance();if(typeof x=="string"&&O){const v=Object.keys(O.appContext.components);v&&v.includes(y)&&(x=r.resolveComponent(y,!1))}if(typeof x!="string")return x;const E=t==null?void 0:t[`node-${y}`];return E!=null&&E({})?E:(console.warn(`[vueflow]: Node type "${d}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(d,p)=>(r.openBlock(),r.createElementBlock("div",Mc,[m.value?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(l.value,y=>(r.openBlock(),r.createBlock(r.unref(Ys),{id:y.id,key:y.id,"resize-observer":m.value,type:w(y.type,y.template),name:y.type||"default",draggable:u(y.draggable),selectable:f(y.selectable),connectable:g(y.connectable),node:y},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","node"]))),128)):r.createCommentVNode("",!0)]))}}),Rc=["id","markerWidth","markerHeight","markerUnits","orient"],zc=["stroke","stroke-width","fill"],Oc=["stroke","stroke-width"],Pc={name:"MarkerType"},Tc=r.defineComponent({...Pc,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type==="arrowclosed"?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,zc)):r.createCommentVNode("",!0),e.type==="arrow"?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Oc)):r.createCommentVNode("",!0)],8,Rc))}}),Ic={name:"MarkerDefinitions"},Dc=r.defineComponent({...Ic,setup(e){const t=j(),n=r.toRef(t,"edges"),o=r.toRef(t,"connectionLineOptions"),i=r.toRef(t,"defaultMarkerColor"),a=r.computed(()=>{const l=[],s=[],c=u=>{if(u){const f=pe(u);l.includes(f)||(typeof u=="object"?s.push({...u,id:f,color:u.color||i.value}):s.push({id:f,color:i.value,type:u}),l.push(f))}};return[o.value.markerEnd,o.value.markerStart].forEach(c),n.value.reduce((u,f)=>([f.markerStart,f.markerEnd].forEach(c),u.sort((g,m)=>g.id.localeCompare(m.id))),s),s});return(l,s)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(a),c=>(r.openBlock(),r.createBlock(Tc,{id:c.id,key:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,"stroke-width":c.strokeWidth,orient:c.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Ac={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Vc={name:"Edges"},Hc=r.defineComponent({...Vc,setup(e){const t=r.inject(St),n=j(),o=r.toRef(n,"emits"),i=r.toRef(n,"connectionMode"),a=r.toRef(n,"edgeUpdaterRadius"),l=r.toRef(n,"onPaneReady"),s=r.toRef(n,"connectionStartHandle"),c=r.toRef(n,"nodesConnectable"),u=r.toRef(n,"edgesUpdatable"),f=r.toRef(n,"elementsSelectable"),g=r.toRef(n,"getSelectedNodes"),m=r.toRef(n,"nodesSelectionActive"),w=r.toRef(n,"getNode");r.toRef(n,"getNodes");const d=r.toRef(n,"getEdges"),p=r.toRef(n,"getEdgeTypes"),y=r.toRef(n,"addSelectedEdges"),x=r.toRef(n,"noPanClassName"),O=r.toRef(n,"elevateEdgesOnSelect"),E=_=>typeof _=="undefined"?f.value:_,v=_=>typeof _=="undefined"?u.value:_,C=r.ref(),S=ot(()=>{var _;return(_=s.value)==null?void 0:_.nodeId},()=>{var _;return(_=s.value)!=null&&_.nodeId?w.value(s.value.nodeId):!1}),z=ot(()=>{var _;return(_=s.value)==null?void 0:_.nodeId},()=>{var _,M;return!!(S.value&&(typeof S.value.connectable=="undefined"?c.value:S.value.connectable)&&((_=s.value)==null?void 0:_.nodeId)&&((M=s.value)==null?void 0:M.type))}),T=r.ref({});let H=r.ref([]),X=r.effectScope();l.value(()=>{X||(X=r.effectScope()),X.run(()=>{r.watch([g,d],()=>{d.value.forEach(_=>{T.value[_.id]||(T.value[_.id]=Nc(_,o.value))}),O.value?r.nextTick(()=>H.value=Is(d.value,w.value)):H.value=[{isMaxLevel:!0,edges:d.value,level:0}]},{immediate:!0})})}),r.onBeforeUnmount(()=>{X==null||X.stop(),X=null});const L=(_,M)=>{const P=_||"default";let $=M!=null?M:p.value[P];const D=r.getCurrentInstance();if(typeof $=="string"&&D){const K=Object.keys(D.appContext.components);K&&K.includes(P)&&($=r.resolveComponent(P,!1))}if($&&typeof $!="string")return $;const W=t==null?void 0:t[`edge-${P}`];return W!=null&&W({})?W:(console.warn(`[vueflow]: Edge type "${_}" not found and no edge-slot detected. Using fallback type "default".`),!1)},G=(_,M)=>{const P={event:_,edge:M};E(M.selectable)&&(m.value=!1,y.value([M])),T.value[M.id].emit.click(P)},I=(_,M)=>T.value[M.id].emit.contextMenu({event:_,edge:M}),h=(_,M)=>T.value[M.id].emit.doubleClick({event:_,edge:M}),N=(_,M)=>T.value[M.id].emit.mouseEnter({event:_,edge:M}),b=(_,M)=>T.value[M.id].emit.mouseMove({event:_,edge:M}),B=(_,M)=>T.value[M.id].emit.mouseLeave({event:_,edge:M}),A=(_,M)=>{C.value=M.id,U(_,M,!0)},V=(_,M)=>{C.value=M.id,U(_,M,!1)},{onMouseDown:R}=Cn(),U=(_,M,P)=>{var W;const $=P?M.target:M.source,D=(W=P?M.targetHandle:M.sourceHandle)!=null?W:"";T.value[M.id].emit.updateStart({event:_,edge:M}),R(_,D,$,P,void 0,P?"target":"source",K=>{gn(K,d.value)||T.value[M.id].emit.update({edge:M,connection:K})},()=>{T.value[M.id].emit.updateEnd({event:_,edge:M}),C.value=""})},q=_=>{const M=_.class instanceof Function?_.class(_):_.class;return[x.value,M]},k=_=>_.style instanceof Function?_.style(_):_.style;return(_,M)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(H.value,P=>(r.openBlock(),r.createElementBlock("svg",{key:P.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${P.level}`)},[P.isMaxLevel?(r.openBlock(),r.createBlock(Dc,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(P.edges,$=>(r.openBlock(),r.createBlock(r.unref(nc),{id:$.id,key:$.id,type:L($.type,$.template),name:$.type||"default",source:$.source,target:$.target,"target-handle-id":$.targetHandle,"source-handle-id":$.sourceHandle,"source-node":w.value($.source),"target-node":w.value($.target),label:$.label,data:$.data,events:{...$.events,...T.value[$.id].on},animated:$.animated,selectable:E($.selectable),selected:$.selected,updatable:v($.updatable),updating:$.id===C.value,"label-style":$.labelStyle,"label-show-bg":$.labelShowBg,"label-bg-style":$.labelBgStyle,"label-bg-padding":$.labelBgPadding,"label-bg-border-radius":$.labelBgBorderRadius,"connection-mode":i.value,"edge-updater-radius":a.value,"marker-end":$.markerEnd,"marker-start":$.markerStart,style:r.normalizeStyle(k($)),class:r.normalizeClass(q($)),onClick:D=>G(D,$),onDblclick:D=>h(D,$),onContextmenu:D=>I(D,$),onMouseenter:D=>N(D,$),onMousemove:D=>b(D,$),onMouseleave:D=>B(D,$),onSourceMousedown:D=>A(D,$),onTargetMousedown:D=>V(D,$)},null,8,["id","type","name","source","target","target-handle-id","source-handle-id","source-node","target-node","label","data","events","animated","selectable","selected","updatable","updating","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","connection-mode","edge-updater-radius","marker-end","marker-start","style","class","onClick","onDblclick","onContextmenu","onMouseenter","onMousemove","onMouseleave","onSourceMousedown","onTargetMousedown"]))),128))])],4))),128)),z.value&&!!S.value?(r.openBlock(),r.createElementBlock("svg",Ac,[r.createVNode(ac,{"source-node":S.value},null,8,["source-node"])])):r.createCommentVNode("",!0)],64))}}),Fc={name:"Transform"},Lc=r.defineComponent({...Fc,setup(e){const{id:t,viewport:n,dimensions:o,fitViewOnInit:i,emits:a,fitView:l,...s}=j(),c=async f=>{const g=Re();return"screen"in g&&await De(f).toMatch(({height:m,width:w})=>!isNaN(w)&&w>0&&!isNaN(m)&&m>0),!0};let u=r.ref(!1);return r.onMounted(async()=>{await c(o.value),u.value=!0,a.paneReady({id:t,viewport:n,dimensions:o,fitViewOnInit:i,fitView:l,emits:a,...s}),i!=null&&i.value&&l()}),(f,g)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:u.value?void 0:0})},[r.createVNode(Hc),r.createVNode(Bc),r.renderSlot(f.$slots,"default")],4))}}),Zc={name:"Viewport"},Uc=r.defineComponent({...Zc,setup(e){const t=j(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultZoom"),l=r.toRef(t,"defaultPosition"),s=r.toRef(t,"translateExtent"),c=r.toRef(t,"dimensions"),u=r.toRef(t,"zoomActivationKeyCode"),f=r.toRef(t,"selectionKeyCode"),g=r.toRef(t,"panOnScroll"),m=r.toRef(t,"panOnScrollMode"),w=r.toRef(t,"panOnScrollSpeed"),d=r.toRef(t,"panOnDrag"),p=r.toRef(t,"zoomOnDoubleClick"),y=r.toRef(t,"zoomOnPinch"),x=r.toRef(t,"zoomOnScroll"),O=r.toRef(t,"preventScrolling"),E=r.toRef(t,"noWheelClassName"),v=r.toRef(t,"noPanClassName"),C=r.toRef(t,"setState"),S=r.toRef(t,"emits"),z=Ln("viewport",null);let T=r.ref(!1);const H=(h,N)=>h.x!==N.x&&!isNaN(N.x)||h.y!==N.y&&!isNaN(N.y)||h.zoom!==N.k&&!isNaN(N.k),X=h=>({x:h.x,y:h.y,zoom:h.k}),L=(h,N)=>h.target.closest(`.${N}`),G=Ct(a.value,o.value,i.value);let I=r.ref({...hn({x:l.value[0],y:l.value[1]},s.value),zoom:G});return r.onMounted(()=>{Fi(z,()=>{if(!z.value)return;const{width:N,height:b}=Ke(z.value);c.value.width=N,c.value.height=b});const h=Re();he(h,"resize",()=>{if(!z.value)return;const{width:N,height:b}=Ke(z.value);c.value.width=N,c.value.height=b})}),r.onMounted(()=>{const h=ks().scaleExtent([o.value,i.value]).translateExtent(s.value),N=ne(z.value).call(h),b=N.on("wheel.zoom"),B=Et.translate(I.value.x,I.value.y).scale(I.value.zoom);h.transform(N,B),C.value({d3Zoom:h,d3Selection:N,d3ZoomHandler:b,viewport:{x:B.x,y:B.y,zoom:B.k},viewportRef:z.value});const A=tt(f.value,R=>{R&&!T.value?h.on("zoom",null):R||h.on("zoom",U=>{C.value({viewport:{x:U.transform.x,y:U.transform.y,zoom:U.transform.k}});const q=X(U.transform);S.value.move({event:U,flowTransform:q})})}),V=tt(u.value);h.on("start",R=>{T.value=!0;const U=X(R.transform);I.value=U,S.value.moveStart({event:R,flowTransform:U})}),h.on("end",R=>{if(T.value=!1,H(I.value,R.transform)){const U=X(R.transform);I.value=U,S.value.moveEnd({event:R,flowTransform:U})}}),r.watchEffect(()=>{g.value&&!V.value?N.on("wheel",R=>{var M;if(L(R,(M=E.value)==null?void 0:M.value))return!1;R.preventDefault(),R.stopImmediatePropagation();const U=N.property("__zoom").k||1;if(R.ctrlKey&&y.value){const P=re(R),$=-R.deltaY*(R.deltaMode===1?.05:R.deltaMode?1:.002)*10,D=U*2**$;h.scaleTo(N,D,P);return}const q=R.deltaMode===1?20:1,k=m.value===qe.Vertical?0:R.deltaX*q,_=m.value===qe.Horizontal?0:R.deltaY*q;h.translateBy(N,-(k/U)*w.value,-(_/U)*w.value)}).on("wheel.zoom",null):typeof b!="undefined"&&N.on("wheel",R=>{var U;if(!O.value||L(R,(U=E.value)==null?void 0:U.value))return null;R.preventDefault()}).on("wheel.zoom",b)}),h.filter(R=>{const U=V.value||x.value,q=y.value&&R.ctrlKey;return!d.value&&!U&&!g.value&&!p.value&&!y.value||A.value||!p.value&&R.type==="dblclick"||L(R,E.value)&&R.type==="wheel"||L(R,v.value)&&R.type!=="wheel"||!y.value&&R.ctrlKey&&R.type==="wheel"||!U&&!g.value&&!q&&R.type==="wheel"||!d.value&&(R.type==="mousedown"||R.type==="touchstart")?!1:(!R.ctrlKey||R.type==="wheel")&&!R.button})}),(h,N)=>(r.openBlock(),r.createElementBlock("div",{ref:"viewport",key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(Lc,null,{default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Cc)]))}}),ee=e=>typeof r.unref(e)!="undefined";var Xc=(e,t,n)=>{const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let d,p;d=Ee([e.modelValue,()=>{var y,x;return(x=(y=e.modelValue)==null?void 0:y.value)==null?void 0:x.length}],([y])=>{y&&Array.isArray(y)&&(p&&p.pause(),d&&d.pause(),n.setElements(y),p=Ee([n.edges,n.nodes,()=>n.edges.value.length,()=>n.nodes.value.length],([x,O])=>{d&&d.pause();const E=[...O,...x];E.length&&(e.modelValue.value=E),r.nextTick(()=>{d&&d.resume()})},{immediate:!0}),r.nextTick(()=>{p&&p.resume(),d&&d.resume()}))},{immediate:!!(e.modelValue&&e.modelValue.value)})})},()=>{o.run(()=>{let d,p;d=Ee([e.nodes,()=>{var y,x;return(x=(y=e.nodes)==null?void 0:y.value)==null?void 0:x.length}],async([y])=>{y&&Array.isArray(y)&&(p&&p.pause(),d&&d.pause(),n.setNodes(y),p=Ee(()=>n.nodes.value.length,()=>{n.nodes.value.length&&(e.nodes.value=[...n.nodes.value])},{immediate:!0}),r.nextTick(()=>{p&&p.resume(),d&&d.resume()}))},{immediate:!!(e.nodes&&e.nodes.value)})})},()=>{o.run(()=>{let d,p;d=Ee([e.edges,()=>{var y,x;return(x=(y=e.edges)==null?void 0:y.value)==null?void 0:x.length}],async([y])=>{y&&Array.isArray(y)&&(p&&p.pause(),d&&d.pause(),n.setEdges(y),p=Ee(()=>n.edges.value.length,()=>{n.edges.value.length&&(e.edges.value=[...n.edges.value])},{immediate:!0}),r.nextTick(()=>{p&&p.resume(),d&&d.resume()}))},{immediate:!!(e.edges&&e.edges.value)})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&ee(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:ee(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&ee(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:ee(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&ee(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:ee(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&ee(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:ee(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{ee(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:ee(t.applyDefault)}),r.watch(n.applyDefault,(d,p,y)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),y(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const d=async p=>{let y=p;Te(t.autoConnect)&&(y=await t.autoConnect(p)),y!==!1&&n.addEdges([y])};r.watch(()=>t.autoConnect,()=>{ee(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:ee(t.autoConnect)}),r.watch(n.autoConnect,(p,y,x)=>{p?n.onConnect(d):n.hooks.value.connect.off(d),x(()=>{n.hooks.value.connect.off(d)})},{immediate:!0})})},()=>{const d=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(p=>{if(!d.includes(p)){const y=r.toRef(t,p),x=n[p];o.run(()=>{r.watch(y,()=>{ee(y)&&(x.value=y.value)},{immediate:ee(y)})})}})}].forEach(d=>d())}),()=>o.stop()};const Yc={name:"VueFlow"},Gc=r.defineComponent({...Yc,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=rt(o,"modelValue",n),a=rt(o,"nodes",n),l=rt(o,"edges",n),{vueFlowRef:s,id:c,hooks:u,getNodeTypes:f,getEdgeTypes:g,$reset:m,...w}=j({id:o.id}),d=Xc({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:s,id:c,hooks:u,getNodeTypes:f,getEdgeTypes:g,$reset:m,...w}),p=r.ref();return r.onUnmounted(()=>{d()}),r.onMounted(()=>{s.value=p.value}),Es(n,u),r.provide(St,r.useSlots()),t({vueFlowRef:s,id:c,hooks:u,getNodeTypes:f,getEdgeTypes:g,$reset:m,...w}),(y,x)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:p,class:"vue-flow"},[r.createVNode(Uc,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(f)),O=>r.renderSlot(y.$slots,`node-${O}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(g)),O=>r.renderSlot(y.$slots,`edge-${O}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(y.$slots,"connection-line")]),default:r.withCtx(()=>[r.renderSlot(y.$slots,"zoom-pane")]),_:3}),r.renderSlot(y.$slots,"default")],512))}}),Ht=function({position:{x:e,y:t},dimensions:{height:n,width:o},strokeWidth:i,strokeColor:a,borderRadius:l,color:s,shapeRendering:c="geometricPrecision"},{attrs:u,emit:f,slots:g}){var w,d;const m=(w=u.style)!=null?w:{};return[r.h("rect",{class:["vue-flow__minimap-node",u.class].join(" "),style:m,x:e,y:t,rx:l,ry:l,width:o,height:n,fill:s||m.background||m.backgroundColor,stroke:a,strokeWidth:i,shapeRendering:c,onClick:p=>f("click",p),onDblClick:p=>f("dblclick",p),onMouseenter:p=>f("mouseenter",p),onMousemove:p=>f("mousemove",p),onMouseleave:p=>f("mouseleave",p)}),(d=g==null?void 0:g.default)==null?void 0:d.call(g)]};Ht.props=["position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering"],Ht.emits=["click","dblclick","mouseenter","mousemove","mouseleave"];const Wc=["width","height","viewBox"],qc=["d","fill"],Kc={name:"MiniMap"},jc=r.defineComponent({...Kc,props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:null,nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"},width:null,height:null},emits:["nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=r.useAttrs(),o=Re(),i=200,a=150,l=j(),s=r.toRef(l,"edges"),c=r.toRef(l,"viewport"),u=r.toRef(l,"dimensions"),f=r.toRef(l,"emits"),g=r.toRef(l,"getNodes"),m=r.computed(()=>{var L,G,I;return(I=(G=e.width)!=null?G:(L=n.style)==null?void 0:L.width)!=null?I:i}),w=r.computed(()=>{var L,G,I;return(I=(G=e.height)!=null?G:(L=n.style)==null?void 0:L.height)!=null?I:a}),d=e.nodeColor instanceof Function?e.nodeColor:()=>e.nodeColor,p=e.nodeStrokeColor instanceof Function?e.nodeStrokeColor:()=>e.nodeStrokeColor,y=e.nodeClassName instanceof Function?e.nodeClassName:()=>e.nodeClassName,x=typeof o=="undefined"||!!o.chrome?"crispEdges":"geometricPrecision",O=r.computed(()=>Bt(g.value)),E=r.computed(()=>({x:-c.value.x/c.value.zoom,y:-c.value.y/c.value.zoom,width:u.value.width/c.value.zoom,height:u.value.height/c.value.zoom})),v=ot(E,()=>{const L=g.value&&g.value.length?Rs(O.value,E.value):E.value,G=L.width/m.value,I=L.height/w.value,h=Math.max(G,I),N=h*m.value,b=h*w.value,B=5*h;return{offset:B,x:L.x-(N-L.width)/2-B,y:L.y-(b-L.height)/2-B,width:N+B*2,height:b+B*2}}),C=ot(v,()=>v.value.x&&v.value.y?`
    M${v.value.x-v.value.offset},${v.value.y-v.value.offset}
    h${v.value.width+v.value.offset*2}
    v${v.value.height+v.value.offset*2}
    h${-v.value.width-v.value.offset*2}z
    M${E.value.x},${E.value.y}
    h${E.value.width}
    v${E.value.height}
    h${-E.value.width}z`:""),S=(L,G)=>{const I={event:L,node:G,connectedEdges:Q([G],s.value)};f.value.miniMapNodeClick(I),t("nodeClick",I)},z=(L,G)=>{const I={event:L,node:G,connectedEdges:Q([G],s.value)};f.value.miniMapNodeDoubleClick(I),t("nodeDblclick",I)},T=(L,G)=>{const I={event:L,node:G,connectedEdges:Q([G],s.value)};f.value.miniMapNodeMouseEnter(I),t("nodeMouseenter",I)},H=(L,G)=>{const I={event:L,node:G,connectedEdges:Q([G],s.value)};f.value.miniMapNodeMouseMove(I),t("nodeMousemove",I)},X=(L,G)=>{const I={event:L,node:G,connectedEdges:Q([G],s.value)};f.value.miniMapNodeMouseLeave(I),t("nodeMouseleave",I)};return(L,G)=>(r.openBlock(),r.createElementBlock("svg",{width:m.value,height:w.value,viewBox:[v.value.x,v.value.y,v.value.width,v.value.height].join(" "),class:"vue-flow__minimap"},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(g.value,I=>(r.openBlock(),r.createBlock(r.unref(Ht),{id:I.id,key:I.id,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(y)(I)),color:r.unref(d)(I),"border-radius":e.nodeBorderRadius,"stroke-color":r.unref(p)(I),"stroke-width":e.nodeStrokeWidth,"shape-rendering":r.unref(x),onClick:h=>S(h,I),onDblclick:h=>z(h,I),onMouseenter:h=>T(h,I),onMousemove:h=>H(h,I),onMouseleave:h=>X(h,I)},{default:r.withCtx(()=>[r.renderSlot(L.$slots,`node-${I.type}`,{id:I.id,parentNode:I.parentNode,selected:I.selected,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(y)(I)),color:r.unref(d)(I),borderRadius:e.nodeBorderRadius,strokeColor:r.unref(p)(I),strokeWidth:e.nodeStrokeWidth,shapeRendering:r.unref(x)})]),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),r.createElementVNode("path",{class:"vue-flow__minimap-mask",d:r.unref(C),fill:e.maskColor,"fill-rule":"evenodd"},null,8,qc)],8,Wc))}});var Qc=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const Jc={name:"ControlButton"},eu={class:"vue-flow__controls-button"};function tu(e,t,n,o,i,a){return r.openBlock(),r.createElementBlock("button",eu,[r.renderSlot(e.$slots,"default")])}var nt=Qc(Jc,[["render",tu]]);const nu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ou=[r.createElementVNode("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1)];function iu(e,t){return r.openBlock(),r.createElementBlock("svg",nu,ou)}var ru={render:iu};const au={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lu=[r.createElementVNode("path",{d:"M0 0h32v4.2H0z"},null,-1)];function su(e,t){return r.openBlock(),r.createElementBlock("svg",au,lu)}var cu={render:su};const uu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},du=[r.createElementVNode("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1)];function fu(e,t){return r.openBlock(),r.createElementBlock("svg",uu,du)}var hu={render:fu};const mu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},gu=[r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1)];function pu(e,t){return r.openBlock(),r.createElementBlock("svg",mu,gu)}var yu={render:pu};const wu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},vu=[r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1)];function xu(e,t){return r.openBlock(),r.createElementBlock("svg",wu,vu)}var _u={render:xu};const bu={class:"vue-flow__controls"},ku={name:"Controls"},Nu=r.defineComponent({...ku,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=j(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"setInteractive"),s=r.toRef(n,"zoomIn"),c=r.toRef(n,"zoomOut"),u=r.toRef(n,"fitView"),f=r.computed(()=>o.value&&i.value&&a.value),g=()=>{s.value(),t("zoomIn")},m=()=>{c.value(),t("zoomOut")},w=()=>{u.value(e.fitViewParams),t("fitView")},d=()=>{l.value(!f.value),t("interactionChange",!f.value)};return(p,y)=>(r.openBlock(),r.createElementBlock("div",bu,[r.renderSlot(p.$slots,"top"),e.showZoom?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.renderSlot(p.$slots,"control-zoom-in",{},()=>[r.createVNode(nt,{class:"vue-flow__controls-zoomin",onClick:g},{default:r.withCtx(()=>[r.renderSlot(p.$slots,"icon-zoom-in",{},()=>[r.createVNode(r.unref(ru))])]),_:3})]),r.renderSlot(p.$slots,"control-zoom-out",{},()=>[r.createVNode(nt,{class:"vue-flow__controls-zoomout",onClick:m},{default:r.withCtx(()=>[r.renderSlot(p.$slots,"icon-zoom-out",{},()=>[r.createVNode(r.unref(cu))])]),_:3})])],64)):r.createCommentVNode("",!0),e.showFitView?r.renderSlot(p.$slots,"control-fit-view",{key:1},()=>[r.createVNode(nt,{class:"vue-flow__controls-fitview",onClick:w},{default:r.withCtx(()=>[r.renderSlot(p.$slots,"icon-fit-view",{},()=>[r.createVNode(r.unref(hu))])]),_:3})]):r.createCommentVNode("",!0),e.showInteractive?r.renderSlot(p.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(r.openBlock(),r.createBlock(nt,{key:0,class:"vue-flow__controls-interactive",onClick:d},{default:r.withCtx(()=>[r.unref(f)?r.renderSlot(p.$slots,"icon-unlock",{key:0},()=>[r.createVNode(r.unref(_u))]):r.createCommentVNode("",!0),r.unref(f)?r.createCommentVNode("",!0):r.renderSlot(p.$slots,"icon-lock",{key:1},()=>[r.createVNode(r.unref(yu))])]),_:3})):r.createCommentVNode("",!0)]):r.createCommentVNode("",!0),r.renderSlot(p.$slots,"default")]))}}),Eu=["x","y","width","height"],Su=["stroke","stroke-width","d"],Cu=["cx","cy","r","fill"],Mu={key:2,height:"100",width:"100"},$u=["fill"],Bu=["x","y","fill"],Ru={name:"Background"},zu=r.defineComponent({...Ru,props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},n=j(),o=r.toRef(n,"viewport"),i=r.computed(()=>{const c=e.gap&&e.gap*o.value.zoom,u=c&&o.value.x%c,f=c&&o.value.y%c,g=e.size*o.value.zoom;return{scaledGap:c,xOffset:u,yOffset:f,size:g}}),a=`pattern-${Math.floor(Math.random()*1e5)}`,l=r.computed(()=>e.patternColor||t[e.variant||"dots"]),s=r.computed(()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`);return(c,u)=>(r.openBlock(),r.createElementBlock("svg",{class:"vue-flow__background",style:r.normalizeStyle({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[r.renderSlot(c.$slots,"pattern-container",{id:a},()=>[r.createElementVNode("pattern",{id:a,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[r.renderSlot(c.$slots,"pattern",{},()=>[e.variant==="lines"?(r.openBlock(),r.createElementBlock("path",{key:0,stroke:r.unref(l),"stroke-width":e.size,d:r.unref(s)},null,8,Su)):e.variant==="dots"?(r.openBlock(),r.createElementBlock("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:r.unref(l)},null,8,Cu)):r.createCommentVNode("",!0),e.bgColor?(r.openBlock(),r.createElementBlock("svg",Mu,[r.createElementVNode("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,$u)])):r.createCommentVNode("",!0)])],8,Eu)]),r.createElementVNode("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${a})`},null,8,Bu),r.renderSlot(c.$slots,"default",{id:a})],4))}});return Y.Background=zu,Y.BackgroundVariant=Vo,Y.BaseEdge=be,Y.BezierEdge=It,Y.ConnectionLineType=xe,Y.ConnectionMode=_e,Y.ControlButton=nt,Y.Controls=Nu,Y.EdgeText=oi,Y.GlobalVueFlowStorage=ke,Y.Handle=Je,Y.MarkerType=Ho,Y.MiniMap=jc,Y.MiniMapNode=Ht,Y.NodeIdInjection=fn,Y.PanOnScrollMode=qe,Y.Position=Z,Y.SimpleBezierEdge=Dt,Y.SmoothStepEdge=et,Y.StepEdge=At,Y.StraightEdge=Vt,Y.VueFlow=Gc,Y.VueFlowInjection=dn,Y.addEdge=$s,Y.applyChanges=Qe,Y.applyEdgeChanges=Ds,Y.applyNodeChanges=As,Y.defaultEdgeTypes=fi,Y.defaultNodeTypes=di,Y.getBezierCenter=ii,Y.getBezierPath=kn,Y.getConnectedEdges=Q,Y.getEdgeCenter=Nn,Y.getIncomers=Ms,Y.getMarkerId=pe,Y.getNodesInside=yn,Y.getOutgoers=Cs,Y.getRectOfNodes=Bt,Y.getSimpleBezierCenter=ai,Y.getSimpleBezierPath=ri,Y.getSmoothStepPath=Tt,Y.getTransformForBounds=wn,Y.graphPosToZoomedPos=zs,Y.isEdge=se,Y.isNode=Mt,Y.updateEdge=Bs,Y.useEdge=Ec,Y.useHandle=Cn,Y.useNode=vi,Y.useVueFlow=j,Y.useZoomPanHelper=pi,Object.defineProperties(Y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),Y}({},Vue);
